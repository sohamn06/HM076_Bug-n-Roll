(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function FI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var E0={exports:{}},wc={},T0={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),VI=Symbol.for("react.portal"),UI=Symbol.for("react.fragment"),zI=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),$I=Symbol.for("react.provider"),WI=Symbol.for("react.context"),HI=Symbol.for("react.forward_ref"),qI=Symbol.for("react.suspense"),GI=Symbol.for("react.memo"),KI=Symbol.for("react.lazy"),cy=Symbol.iterator;function QI(t){return t===null||typeof t!="object"?null:(t=cy&&t[cy]||t["@@iterator"],typeof t=="function"?t:null)}var I0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b0=Object.assign,S0={};function Bi(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||I0}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function k0(){}k0.prototype=Bi.prototype;function tm(t,e,n){this.props=t,this.context=e,this.refs=S0,this.updater=n||I0}var nm=tm.prototype=new k0;nm.constructor=tm;b0(nm,Bi.prototype);nm.isPureReactComponent=!0;var dy=Array.isArray,C0=Object.prototype.hasOwnProperty,rm={current:null},R0={key:!0,ref:!0,__self:!0,__source:!0};function N0(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)C0.call(e,r)&&!R0.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:za,type:t,key:i,ref:o,props:s,_owner:rm.current}}function YI(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sm(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function XI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hy=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?XI(""+t.key):e.toString(36)}function Jl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case VI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jd(o,0):r,dy(s)?(n="",t!=null&&(n=t.replace(hy,"$&/")+"/"),Jl(s,e,n,"",function(d){return d})):s!=null&&(sm(s)&&(s=YI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(hy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",dy(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+jd(i,l);o+=Jl(i,e,n,u,s)}else if(u=QI(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+jd(i,l++),o+=Jl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Jl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function JI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Zl={transition:null},ZI={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:rm};function A0(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!sm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=Bi;te.Fragment=UI;te.Profiler=BI;te.PureComponent=tm;te.StrictMode=zI;te.Suspense=qI;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI;te.act=A0;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=b0({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=rm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)C0.call(e,u)&&!R0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:za,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:WI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$I,_context:t},t.Consumer=t};te.createElement=N0;te.createFactory=function(t){var e=N0.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:HI,render:t}};te.isValidElement=sm;te.lazy=function(t){return{$$typeof:KI,_payload:{_status:-1,_result:t},_init:JI}};te.memo=function(t,e){return{$$typeof:GI,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};te.unstable_act=A0;te.useCallback=function(t,e){return pt.current.useCallback(t,e)};te.useContext=function(t){return pt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};te.useEffect=function(t,e){return pt.current.useEffect(t,e)};te.useId=function(){return pt.current.useId()};te.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return pt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};te.useRef=function(t){return pt.current.useRef(t)};te.useState=function(t){return pt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return pt.current.useTransition()};te.version="18.3.1";T0.exports=te;var A=T0.exports;const eb=FI(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tb=A,nb=Symbol.for("react.element"),rb=Symbol.for("react.fragment"),sb=Object.prototype.hasOwnProperty,ib=tb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ob={key:!0,ref:!0,__self:!0,__source:!0};function P0(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sb.call(e,r)&&!ob.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:nb,type:t,key:i,ref:o,props:s,_owner:ib.current}}wc.Fragment=rb;wc.jsx=P0;wc.jsxs=P0;E0.exports=wc;var c=E0.exports,Rh={},D0={exports:{}},Ot={},j0={exports:{}},O0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,q){var X=U.length;U.push(q);e:for(;0<X;){var ae=X-1>>>1,Ne=U[ae];if(0<s(Ne,q))U[ae]=q,U[X]=Ne,X=ae;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],X=U.pop();if(X!==q){U[0]=X;e:for(var ae=0,Ne=U.length,ts=Ne>>>1;ae<ts;){var Ft=2*(ae+1)-1,ns=U[Ft],Xt=Ft+1,sr=U[Xt];if(0>s(ns,X))Xt<Ne&&0>s(sr,ns)?(U[ae]=sr,U[Xt]=X,ae=Xt):(U[ae]=ns,U[Ft]=X,ae=Ft);else if(Xt<Ne&&0>s(sr,X))U[ae]=sr,U[Xt]=X,ae=Xt;else break e}}return q}function s(U,q){var X=U.sortIndex-q.sortIndex;return X!==0?X:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,_=!1,I=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(U){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=U)r(d),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(d)}}function P(U){if(b=!1,x(U),!I)if(n(u)!==null)I=!0,Zr(M);else{var q=n(d);q!==null&&es(P,q.startTime-U)}}function M(U,q){I=!1,b&&(b=!1,E(w),w=-1),_=!0;var X=p;try{for(x(q),m=n(u);m!==null&&(!(m.expirationTime>q)||U&&!N());){var ae=m.callback;if(typeof ae=="function"){m.callback=null,p=m.priorityLevel;var Ne=ae(m.expirationTime<=q);q=t.unstable_now(),typeof Ne=="function"?m.callback=Ne:m===n(u)&&r(u),x(q)}else r(u);m=n(u)}if(m!==null)var ts=!0;else{var Ft=n(d);Ft!==null&&es(P,Ft.startTime-q),ts=!1}return ts}finally{m=null,p=X,_=!1}}var F=!1,S=null,w=-1,T=5,k=-1;function N(){return!(t.unstable_now()-k<T)}function D(){if(S!==null){var U=t.unstable_now();k=U;var q=!0;try{q=S(!0,U)}finally{q?R():(F=!1,S=null)}}else F=!1}var R;if(typeof y=="function")R=function(){y(D)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,Yt=Fe.port2;Fe.port1.onmessage=D,R=function(){Yt.postMessage(null)}}else R=function(){C(D,0)};function Zr(U){S=U,F||(F=!0,R())}function es(U,q){w=C(function(){U(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Zr(M))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var X=p;p=q;try{return U()}finally{p=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=p;p=U;try{return q()}finally{p=X}},t.unstable_scheduleCallback=function(U,q,X){var ae=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ae+X:ae):X=ae,U){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=X+Ne,U={id:h++,callback:q,priorityLevel:U,startTime:X,expirationTime:Ne,sortIndex:-1},X>ae?(U.sortIndex=X,e(d,U),n(u)===null&&U===n(d)&&(b?(E(w),w=-1):b=!0,es(P,X-ae))):(U.sortIndex=Ne,e(u,U),I||_||(I=!0,Zr(M))),U},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(U){var q=p;return function(){var X=p;p=q;try{return U.apply(this,arguments)}finally{p=X}}}})(O0);j0.exports=O0;var ab=j0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lb=A,jt=ab;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M0=new Set,ca={};function Fs(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(ca[t]=e,t=0;t<e.length;t++)M0.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=Object.prototype.hasOwnProperty,ub=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fy={},my={};function cb(t){return Nh.call(my,t)?!0:Nh.call(fy,t)?!1:ub.test(t)?my[t]=!0:(fy[t]=!0,!1)}function db(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hb(t,e,n,r){if(e===null||typeof e>"u"||db(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var im=/[\-:]([a-z])/g;function om(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(im,om);Je[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(im,om);Je[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(im,om);Je[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function am(t,e,n,r){var s=Je.hasOwnProperty(e)?Je[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hb(e,n,s,r)&&(n=null),r||s===null?cb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var er=lb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),lm=Symbol.for("react.strict_mode"),Ah=Symbol.for("react.profiler"),L0=Symbol.for("react.provider"),F0=Symbol.for("react.context"),um=Symbol.for("react.forward_ref"),Ph=Symbol.for("react.suspense"),Dh=Symbol.for("react.suspense_list"),cm=Symbol.for("react.memo"),mr=Symbol.for("react.lazy"),V0=Symbol.for("react.offscreen"),py=Symbol.iterator;function wo(t){return t===null||typeof t!="object"?null:(t=py&&t[py]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Od;function Mo(t){if(Od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Od=e&&e[1]||""}return`
`+Od+t}var Md=!1;function Ld(t,e){if(!t||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function fb(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Ld(t.type,!1),t;case 11:return t=Ld(t.type.render,!1),t;case 1:return t=Ld(t.type,!0),t;default:return""}}function jh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case Ah:return"Profiler";case lm:return"StrictMode";case Ph:return"Suspense";case Dh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case F0:return(t.displayName||"Context")+".Consumer";case L0:return(t._context.displayName||"Context")+".Provider";case um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case cm:return e=t.displayName||null,e!==null?e:jh(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return jh(t(e))}catch{}}return null}function mb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(e);case 8:return e===lm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Mr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pb(t){var e=U0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function bl(t){t._valueTracker||(t._valueTracker=pb(t))}function z0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=U0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oh(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Mr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function B0(t,e){e=e.checked,e!=null&&am(t,"checked",e,!1)}function Mh(t,e){B0(t,e);var n=Mr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Lh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Lh(t,e.type,Mr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Lh(t,e,n){(e!=="number"||Tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lo=Array.isArray;function fi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Mr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Fh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _y(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Lo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Mr(n)}}function $0(t,e){var n=Mr(e.value),r=Mr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Sl,H0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Sl=Sl||document.createElement("div"),Sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Go={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gb=["Webkit","ms","Moz","O"];Object.keys(Go).forEach(function(t){gb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Go[e]=Go[t]})});function q0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Go.hasOwnProperty(t)&&Go[t]?(""+e).trim():e+"px"}function G0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=q0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var yb=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uh(t,e){if(e){if(yb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function zh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bh=null;function dm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $h=null,mi=null,pi=null;function wy(t){if(t=Wa(t)){if(typeof $h!="function")throw Error(z(280));var e=t.stateNode;e&&(e=bc(e),$h(t.stateNode,t.type,e))}}function K0(t){mi?pi?pi.push(t):pi=[t]:mi=t}function Q0(){if(mi){var t=mi,e=pi;if(pi=mi=null,wy(t),e)for(t=0;t<e.length;t++)wy(e[t])}}function Y0(t,e){return t(e)}function X0(){}var Fd=!1;function J0(t,e,n){if(Fd)return t(e,n);Fd=!0;try{return Y0(t,e,n)}finally{Fd=!1,(mi!==null||pi!==null)&&(X0(),Q0())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Wh=!1;if(zn)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){Wh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{Wh=!1}function _b(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Ko=!1,Iu=null,bu=!1,Hh=null,vb={onError:function(t){Ko=!0,Iu=t}};function wb(t,e,n,r,s,i,o,l,u){Ko=!1,Iu=null,_b.apply(vb,arguments)}function xb(t,e,n,r,s,i,o,l,u){if(wb.apply(this,arguments),Ko){if(Ko){var d=Iu;Ko=!1,Iu=null}else throw Error(z(198));bu||(bu=!0,Hh=d)}}function Vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xy(t){if(Vs(t)!==t)throw Error(z(188))}function Eb(t){var e=t.alternate;if(!e){if(e=Vs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return xy(s),t;if(i===r)return xy(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function ew(t){return t=Eb(t),t!==null?tw(t):null}function tw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tw(t);if(e!==null)return e;t=t.sibling}return null}var nw=jt.unstable_scheduleCallback,Ey=jt.unstable_cancelCallback,Tb=jt.unstable_shouldYield,Ib=jt.unstable_requestPaint,Pe=jt.unstable_now,bb=jt.unstable_getCurrentPriorityLevel,hm=jt.unstable_ImmediatePriority,rw=jt.unstable_UserBlockingPriority,Su=jt.unstable_NormalPriority,Sb=jt.unstable_LowPriority,sw=jt.unstable_IdlePriority,xc=null,_n=null;function kb(t){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(xc,t,void 0,(t.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:Nb,Cb=Math.log,Rb=Math.LN2;function Nb(t){return t>>>=0,t===0?32:31-(Cb(t)/Rb|0)|0}var kl=64,Cl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Fo(l):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-rn(e),s=1<<n,r|=t[n],e&=~s;return r}function Ab(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-rn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=Ab(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function qh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function iw(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Vd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ba(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rn(e),t[e]=n}function Db(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-rn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function fm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-rn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ce=0;function ow(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aw,mm,lw,uw,cw,Gh=!1,Rl=[],Ir=null,br=null,Sr=null,fa=new Map,ma=new Map,gr=[],jb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ty(t,e){switch(t){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Eo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wa(e),e!==null&&mm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Ob(t,e,n,r,s){switch(e){case"focusin":return Ir=Eo(Ir,t,e,n,r,s),!0;case"dragenter":return br=Eo(br,t,e,n,r,s),!0;case"mouseover":return Sr=Eo(Sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,Eo(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ma.set(i,Eo(ma.get(i)||null,t,e,n,r,s)),!0}return!1}function dw(t){var e=ms(t.target);if(e!==null){var n=Vs(e);if(n!==null){if(e=n.tag,e===13){if(e=Z0(n),e!==null){t.blockedOn=e,cw(t.priority,function(){lw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bh=r,n.target.dispatchEvent(r),Bh=null}else return e=Wa(n),e!==null&&mm(e),t.blockedOn=n,!1;e.shift()}return!0}function Iy(t,e,n){eu(t)&&n.delete(e)}function Mb(){Gh=!1,Ir!==null&&eu(Ir)&&(Ir=null),br!==null&&eu(br)&&(br=null),Sr!==null&&eu(Sr)&&(Sr=null),fa.forEach(Iy),ma.forEach(Iy)}function To(t,e){t.blockedOn===e&&(t.blockedOn=null,Gh||(Gh=!0,jt.unstable_scheduleCallback(jt.unstable_NormalPriority,Mb)))}function pa(t){function e(s){return To(s,t)}if(0<Rl.length){To(Rl[0],t);for(var n=1;n<Rl.length;n++){var r=Rl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ir!==null&&To(Ir,t),br!==null&&To(br,t),Sr!==null&&To(Sr,t),fa.forEach(e),ma.forEach(e),n=0;n<gr.length;n++)r=gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<gr.length&&(n=gr[0],n.blockedOn===null);)dw(n),n.blockedOn===null&&gr.shift()}var gi=er.ReactCurrentBatchConfig,Cu=!0;function Lb(t,e,n,r){var s=ce,i=gi.transition;gi.transition=null;try{ce=1,pm(t,e,n,r)}finally{ce=s,gi.transition=i}}function Fb(t,e,n,r){var s=ce,i=gi.transition;gi.transition=null;try{ce=4,pm(t,e,n,r)}finally{ce=s,gi.transition=i}}function pm(t,e,n,r){if(Cu){var s=Kh(t,e,n,r);if(s===null)Qd(t,e,r,Ru,n),Ty(t,r);else if(Ob(s,t,e,n,r))r.stopPropagation();else if(Ty(t,r),e&4&&-1<jb.indexOf(t)){for(;s!==null;){var i=Wa(s);if(i!==null&&aw(i),i=Kh(t,e,n,r),i===null&&Qd(t,e,r,Ru,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qd(t,e,r,null,n)}}var Ru=null;function Kh(t,e,n,r){if(Ru=null,t=dm(r),t=ms(t),t!==null)if(e=Vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Z0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ru=t,null}function hw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bb()){case hm:return 1;case rw:return 4;case Su:case Sb:return 16;case sw:return 536870912;default:return 16}default:return 16}}var xr=null,gm=null,tu=null;function fw(){if(tu)return tu;var t,e=gm,n=e.length,r,s="value"in xr?xr.value:xr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return tu=s.slice(t,1<r?1-r:void 0)}function nu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nl(){return!0}function by(){return!1}function Mt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Nl:by,this.isPropagationStopped=by,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),e}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ym=Mt($i),$a=Ie({},$i,{view:0,detail:0}),Vb=Mt($a),Ud,zd,Io,Ec=Ie({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_m,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Io&&(Io&&t.type==="mousemove"?(Ud=t.screenX-Io.screenX,zd=t.screenY-Io.screenY):zd=Ud=0,Io=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:zd}}),Sy=Mt(Ec),Ub=Ie({},Ec,{dataTransfer:0}),zb=Mt(Ub),Bb=Ie({},$a,{relatedTarget:0}),Bd=Mt(Bb),$b=Ie({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Wb=Mt($b),Hb=Ie({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),qb=Mt(Hb),Gb=Ie({},$i,{data:0}),ky=Mt(Gb),Kb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Yb[t])?!!e[t]:!1}function _m(){return Xb}var Jb=Ie({},$a,{key:function(t){if(t.key){var e=Kb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_m,charCode:function(t){return t.type==="keypress"?nu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zb=Mt(Jb),eS=Ie({},Ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=Mt(eS),tS=Ie({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_m}),nS=Mt(tS),rS=Ie({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),sS=Mt(rS),iS=Ie({},Ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oS=Mt(iS),aS=[9,13,27,32],vm=zn&&"CompositionEvent"in window,Qo=null;zn&&"documentMode"in document&&(Qo=document.documentMode);var lS=zn&&"TextEvent"in window&&!Qo,mw=zn&&(!vm||Qo&&8<Qo&&11>=Qo),Ry=" ",Ny=!1;function pw(t,e){switch(t){case"keyup":return aS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function uS(t,e){switch(t){case"compositionend":return gw(e);case"keypress":return e.which!==32?null:(Ny=!0,Ry);case"textInput":return t=e.data,t===Ry&&Ny?null:t;default:return null}}function cS(t,e){if(ri)return t==="compositionend"||!vm&&pw(t,e)?(t=fw(),tu=gm=xr=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return mw&&e.locale!=="ko"?null:e.data;default:return null}}var dS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dS[t.type]:e==="textarea"}function yw(t,e,n,r){K0(r),e=Nu(e,"onChange"),0<e.length&&(n=new ym("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,ga=null;function hS(t){Cw(t,0)}function Tc(t){var e=oi(t);if(z0(e))return t}function fS(t,e){if(t==="change")return e}var _w=!1;if(zn){var $d;if(zn){var Wd="oninput"in document;if(!Wd){var Py=document.createElement("div");Py.setAttribute("oninput","return;"),Wd=typeof Py.oninput=="function"}$d=Wd}else $d=!1;_w=$d&&(!document.documentMode||9<document.documentMode)}function Dy(){Yo&&(Yo.detachEvent("onpropertychange",vw),ga=Yo=null)}function vw(t){if(t.propertyName==="value"&&Tc(ga)){var e=[];yw(e,ga,t,dm(t)),J0(hS,e)}}function mS(t,e,n){t==="focusin"?(Dy(),Yo=e,ga=n,Yo.attachEvent("onpropertychange",vw)):t==="focusout"&&Dy()}function pS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Tc(ga)}function gS(t,e){if(t==="click")return Tc(e)}function yS(t,e){if(t==="input"||t==="change")return Tc(e)}function _S(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:_S;function ya(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Nh.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function jy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Oy(t,e){var n=jy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=jy(n)}}function ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xw(){for(var t=window,e=Tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tu(t.document)}return e}function wm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vS(t){var e=xw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ww(n.ownerDocument.documentElement,n)){if(r!==null&&wm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Oy(n,i);var o=Oy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wS=zn&&"documentMode"in document&&11>=document.documentMode,si=null,Qh=null,Xo=null,Yh=!1;function My(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Yh||si==null||si!==Tu(r)||(r=si,"selectionStart"in r&&wm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&ya(Xo,r)||(Xo=r,r=Nu(Qh,"onSelect"),0<r.length&&(e=new ym("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Hd={},Ew={};zn&&(Ew=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function Ic(t){if(Hd[t])return Hd[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ew)return Hd[t]=e[n];return t}var Tw=Ic("animationend"),Iw=Ic("animationiteration"),bw=Ic("animationstart"),Sw=Ic("transitionend"),kw=new Map,Ly="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(t,e){kw.set(t,e),Fs(e,[t])}for(var qd=0;qd<Ly.length;qd++){var Gd=Ly[qd],xS=Gd.toLowerCase(),ES=Gd[0].toUpperCase()+Gd.slice(1);Hr(xS,"on"+ES)}Hr(Tw,"onAnimationEnd");Hr(Iw,"onAnimationIteration");Hr(bw,"onAnimationStart");Hr("dblclick","onDoubleClick");Hr("focusin","onFocus");Hr("focusout","onBlur");Hr(Sw,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function Fy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xb(r,e,void 0,t),t.currentTarget=null}function Cw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Fy(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Fy(s,l,d),i=u}}}if(bu)throw t=Hh,bu=!1,Hh=null,t}function pe(t,e){var n=e[tf];n===void 0&&(n=e[tf]=new Set);var r=t+"__bubble";n.has(r)||(Rw(e,t,2,!1),n.add(r))}function Kd(t,e,n){var r=0;e&&(r|=4),Rw(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function _a(t){if(!t[Pl]){t[Pl]=!0,M0.forEach(function(n){n!=="selectionchange"&&(TS.has(n)||Kd(n,!1,t),Kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,Kd("selectionchange",!1,e))}}function Rw(t,e,n,r){switch(hw(e)){case 1:var s=Lb;break;case 4:s=Fb;break;default:s=pm}n=s.bind(null,e,n,t),s=void 0,!Wh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ms(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}J0(function(){var d=i,h=dm(n),m=[];e:{var p=kw.get(t);if(p!==void 0){var _=ym,I=t;switch(t){case"keypress":if(nu(n)===0)break e;case"keydown":case"keyup":_=Zb;break;case"focusin":I="focus",_=Bd;break;case"focusout":I="blur",_=Bd;break;case"beforeblur":case"afterblur":_=Bd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=zb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=nS;break;case Tw:case Iw:case bw:_=Wb;break;case Sw:_=sS;break;case"scroll":_=Vb;break;case"wheel":_=oS;break;case"copy":case"cut":case"paste":_=qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Cy}var b=(e&4)!==0,C=!b&&t==="scroll",E=b?p!==null?p+"Capture":null:p;b=[];for(var y=d,x;y!==null;){x=y;var P=x.stateNode;if(x.tag===5&&P!==null&&(x=P,E!==null&&(P=ha(y,E),P!=null&&b.push(va(y,P,x)))),C)break;y=y.return}0<b.length&&(p=new _(p,I,null,n,h),m.push({event:p,listeners:b}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",p&&n!==Bh&&(I=n.relatedTarget||n.fromElement)&&(ms(I)||I[Bn]))break e;if((_||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?ms(I):null,I!==null&&(C=Vs(I),I!==C||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(b=Sy,P="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(b=Cy,P="onPointerLeave",E="onPointerEnter",y="pointer"),C=_==null?p:oi(_),x=I==null?p:oi(I),p=new b(P,y+"leave",_,n,h),p.target=C,p.relatedTarget=x,P=null,ms(h)===d&&(b=new b(E,y+"enter",I,n,h),b.target=x,b.relatedTarget=C,P=b),C=P,_&&I)t:{for(b=_,E=I,y=0,x=b;x;x=Ks(x))y++;for(x=0,P=E;P;P=Ks(P))x++;for(;0<y-x;)b=Ks(b),y--;for(;0<x-y;)E=Ks(E),x--;for(;y--;){if(b===E||E!==null&&b===E.alternate)break t;b=Ks(b),E=Ks(E)}b=null}else b=null;_!==null&&Vy(m,p,_,b,!1),I!==null&&C!==null&&Vy(m,C,I,b,!0)}}e:{if(p=d?oi(d):window,_=p.nodeName&&p.nodeName.toLowerCase(),_==="select"||_==="input"&&p.type==="file")var M=fS;else if(Ay(p))if(_w)M=yS;else{M=pS;var F=mS}else(_=p.nodeName)&&_.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=gS);if(M&&(M=M(t,d))){yw(m,M,n,h);break e}F&&F(t,p,d),t==="focusout"&&(F=p._wrapperState)&&F.controlled&&p.type==="number"&&Lh(p,"number",p.value)}switch(F=d?oi(d):window,t){case"focusin":(Ay(F)||F.contentEditable==="true")&&(si=F,Qh=d,Xo=null);break;case"focusout":Xo=Qh=si=null;break;case"mousedown":Yh=!0;break;case"contextmenu":case"mouseup":case"dragend":Yh=!1,My(m,n,h);break;case"selectionchange":if(wS)break;case"keydown":case"keyup":My(m,n,h)}var S;if(vm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ri?pw(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(mw&&n.locale!=="ko"&&(ri||w!=="onCompositionStart"?w==="onCompositionEnd"&&ri&&(S=fw()):(xr=h,gm="value"in xr?xr.value:xr.textContent,ri=!0)),F=Nu(d,w),0<F.length&&(w=new ky(w,t,null,n,h),m.push({event:w,listeners:F}),S?w.data=S:(S=gw(n),S!==null&&(w.data=S)))),(S=lS?uS(t,n):cS(t,n))&&(d=Nu(d,"onBeforeInput"),0<d.length&&(h=new ky("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=S))}Cw(m,e)})}function va(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(va(t,i,s)),i=ha(t,e),i!=null&&r.push(va(t,i,s))),t=t.return}return r}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ha(n,i),u!=null&&o.unshift(va(n,u,l))):s||(u=ha(n,i),u!=null&&o.push(va(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IS=/\r\n?/g,bS=/\u0000|\uFFFD/g;function Uy(t){return(typeof t=="string"?t:""+t).replace(IS,`
`).replace(bS,"")}function Dl(t,e,n){if(e=Uy(e),Uy(t)!==e&&n)throw Error(z(425))}function Au(){}var Xh=null,Jh=null;function Zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ef=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,zy=typeof Promise=="function"?Promise:void 0,kS=typeof queueMicrotask=="function"?queueMicrotask:typeof zy<"u"?function(t){return zy.resolve(null).then(t).catch(CS)}:ef;function CS(t){setTimeout(function(){throw t})}function Yd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pa(e)}function kr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function By(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),gn="__reactFiber$"+Wi,wa="__reactProps$"+Wi,Bn="__reactContainer$"+Wi,tf="__reactEvents$"+Wi,RS="__reactListeners$"+Wi,NS="__reactHandles$"+Wi;function ms(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Bn]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=By(t);t!==null;){if(n=t[gn])return n;t=By(t)}return e}t=n,n=t.parentNode}return null}function Wa(t){return t=t[gn]||t[Bn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function bc(t){return t[wa]||null}var nf=[],ai=-1;function qr(t){return{current:t}}function ye(t){0>ai||(t.current=nf[ai],nf[ai]=null,ai--)}function fe(t,e){ai++,nf[ai]=t.current,t.current=e}var Lr={},at=qr(Lr),Tt=qr(!1),bs=Lr;function Si(t,e){var n=t.type.contextTypes;if(!n)return Lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function Pu(){ye(Tt),ye(at)}function $y(t,e,n){if(at.current!==Lr)throw Error(z(168));fe(at,e),fe(Tt,n)}function Nw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,mb(t)||"Unknown",s));return Ie({},n,r)}function Du(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lr,bs=at.current,fe(at,t),fe(Tt,Tt.current),!0}function Wy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Nw(t,e,bs),r.__reactInternalMemoizedMergedChildContext=t,ye(Tt),ye(at),fe(at,t)):ye(Tt),fe(Tt,n)}var Rn=null,Sc=!1,Xd=!1;function Aw(t){Rn===null?Rn=[t]:Rn.push(t)}function AS(t){Sc=!0,Aw(t)}function Gr(){if(!Xd&&Rn!==null){Xd=!0;var t=0,e=ce;try{var n=Rn;for(ce=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,Sc=!1}catch(s){throw Rn!==null&&(Rn=Rn.slice(t+1)),nw(hm,Gr),s}finally{ce=e,Xd=!1}}return null}var li=[],ui=0,ju=null,Ou=0,Vt=[],Ut=0,Ss=null,Pn=1,Dn="";function us(t,e){li[ui++]=Ou,li[ui++]=ju,ju=t,Ou=e}function Pw(t,e,n){Vt[Ut++]=Pn,Vt[Ut++]=Dn,Vt[Ut++]=Ss,Ss=t;var r=Pn;t=Dn;var s=32-rn(r)-1;r&=~(1<<s),n+=1;var i=32-rn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Pn=1<<32-rn(e)+s|n<<s|r,Dn=i+t}else Pn=1<<i|n<<s|r,Dn=t}function xm(t){t.return!==null&&(us(t,1),Pw(t,1,0))}function Em(t){for(;t===ju;)ju=li[--ui],li[ui]=null,Ou=li[--ui],li[ui]=null;for(;t===Ss;)Ss=Vt[--Ut],Vt[Ut]=null,Dn=Vt[--Ut],Vt[Ut]=null,Pn=Vt[--Ut],Vt[Ut]=null}var Dt=null,Nt=null,ve=!1,tn=null;function Dw(t,e){var n=Bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Hy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Nt=kr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Nt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ss!==null?{id:Pn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Nt=null,!0):!1;default:return!1}}function rf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function sf(t){if(ve){var e=Nt;if(e){var n=e;if(!Hy(t,e)){if(rf(t))throw Error(z(418));e=kr(n.nextSibling);var r=Dt;e&&Hy(t,e)?Dw(r,n):(t.flags=t.flags&-4097|2,ve=!1,Dt=t)}}else{if(rf(t))throw Error(z(418));t.flags=t.flags&-4097|2,ve=!1,Dt=t}}}function qy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function jl(t){if(t!==Dt)return!1;if(!ve)return qy(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Zh(t.type,t.memoizedProps)),e&&(e=Nt)){if(rf(t))throw jw(),Error(z(418));for(;e;)Dw(t,e),e=kr(e.nextSibling)}if(qy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Nt=kr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Nt=null}}else Nt=Dt?kr(t.stateNode.nextSibling):null;return!0}function jw(){for(var t=Nt;t;)t=kr(t.nextSibling)}function ki(){Nt=Dt=null,ve=!1}function Tm(t){tn===null?tn=[t]:tn.push(t)}var PS=er.ReactCurrentBatchConfig;function bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gy(t){var e=t._init;return e(t._payload)}function Ow(t){function e(E,y){if(t){var x=E.deletions;x===null?(E.deletions=[y],E.flags|=16):x.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=Ar(E,y),E.index=0,E.sibling=null,E}function i(E,y,x){return E.index=x,t?(x=E.alternate,x!==null?(x=x.index,x<y?(E.flags|=2,y):x):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,y,x,P){return y===null||y.tag!==6?(y=sh(x,E.mode,P),y.return=E,y):(y=s(y,x),y.return=E,y)}function u(E,y,x,P){var M=x.type;return M===ni?h(E,y,x.props.children,P,x.key):y!==null&&(y.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mr&&Gy(M)===y.type)?(P=s(y,x.props),P.ref=bo(E,y,x),P.return=E,P):(P=uu(x.type,x.key,x.props,null,E.mode,P),P.ref=bo(E,y,x),P.return=E,P)}function d(E,y,x,P){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=ih(x,E.mode,P),y.return=E,y):(y=s(y,x.children||[]),y.return=E,y)}function h(E,y,x,P,M){return y===null||y.tag!==7?(y=ws(x,E.mode,P,M),y.return=E,y):(y=s(y,x),y.return=E,y)}function m(E,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=sh(""+y,E.mode,x),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Il:return x=uu(y.type,y.key,y.props,null,E.mode,x),x.ref=bo(E,null,y),x.return=E,x;case ti:return y=ih(y,E.mode,x),y.return=E,y;case mr:var P=y._init;return m(E,P(y._payload),x)}if(Lo(y)||wo(y))return y=ws(y,E.mode,x,null),y.return=E,y;Ol(E,y)}return null}function p(E,y,x,P){var M=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:l(E,y,""+x,P);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:return x.key===M?u(E,y,x,P):null;case ti:return x.key===M?d(E,y,x,P):null;case mr:return M=x._init,p(E,y,M(x._payload),P)}if(Lo(x)||wo(x))return M!==null?null:h(E,y,x,P,null);Ol(E,x)}return null}function _(E,y,x,P,M){if(typeof P=="string"&&P!==""||typeof P=="number")return E=E.get(x)||null,l(y,E,""+P,M);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Il:return E=E.get(P.key===null?x:P.key)||null,u(y,E,P,M);case ti:return E=E.get(P.key===null?x:P.key)||null,d(y,E,P,M);case mr:var F=P._init;return _(E,y,x,F(P._payload),M)}if(Lo(P)||wo(P))return E=E.get(x)||null,h(y,E,P,M,null);Ol(y,P)}return null}function I(E,y,x,P){for(var M=null,F=null,S=y,w=y=0,T=null;S!==null&&w<x.length;w++){S.index>w?(T=S,S=null):T=S.sibling;var k=p(E,S,x[w],P);if(k===null){S===null&&(S=T);break}t&&S&&k.alternate===null&&e(E,S),y=i(k,y,w),F===null?M=k:F.sibling=k,F=k,S=T}if(w===x.length)return n(E,S),ve&&us(E,w),M;if(S===null){for(;w<x.length;w++)S=m(E,x[w],P),S!==null&&(y=i(S,y,w),F===null?M=S:F.sibling=S,F=S);return ve&&us(E,w),M}for(S=r(E,S);w<x.length;w++)T=_(S,E,w,x[w],P),T!==null&&(t&&T.alternate!==null&&S.delete(T.key===null?w:T.key),y=i(T,y,w),F===null?M=T:F.sibling=T,F=T);return t&&S.forEach(function(N){return e(E,N)}),ve&&us(E,w),M}function b(E,y,x,P){var M=wo(x);if(typeof M!="function")throw Error(z(150));if(x=M.call(x),x==null)throw Error(z(151));for(var F=M=null,S=y,w=y=0,T=null,k=x.next();S!==null&&!k.done;w++,k=x.next()){S.index>w?(T=S,S=null):T=S.sibling;var N=p(E,S,k.value,P);if(N===null){S===null&&(S=T);break}t&&S&&N.alternate===null&&e(E,S),y=i(N,y,w),F===null?M=N:F.sibling=N,F=N,S=T}if(k.done)return n(E,S),ve&&us(E,w),M;if(S===null){for(;!k.done;w++,k=x.next())k=m(E,k.value,P),k!==null&&(y=i(k,y,w),F===null?M=k:F.sibling=k,F=k);return ve&&us(E,w),M}for(S=r(E,S);!k.done;w++,k=x.next())k=_(S,E,w,k.value,P),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?w:k.key),y=i(k,y,w),F===null?M=k:F.sibling=k,F=k);return t&&S.forEach(function(D){return e(E,D)}),ve&&us(E,w),M}function C(E,y,x,P){if(typeof x=="object"&&x!==null&&x.type===ni&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Il:e:{for(var M=x.key,F=y;F!==null;){if(F.key===M){if(M=x.type,M===ni){if(F.tag===7){n(E,F.sibling),y=s(F,x.props.children),y.return=E,E=y;break e}}else if(F.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===mr&&Gy(M)===F.type){n(E,F.sibling),y=s(F,x.props),y.ref=bo(E,F,x),y.return=E,E=y;break e}n(E,F);break}else e(E,F);F=F.sibling}x.type===ni?(y=ws(x.props.children,E.mode,P,x.key),y.return=E,E=y):(P=uu(x.type,x.key,x.props,null,E.mode,P),P.ref=bo(E,y,x),P.return=E,E=P)}return o(E);case ti:e:{for(F=x.key;y!==null;){if(y.key===F)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(E,y.sibling),y=s(y,x.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=ih(x,E.mode,P),y.return=E,E=y}return o(E);case mr:return F=x._init,C(E,y,F(x._payload),P)}if(Lo(x))return I(E,y,x,P);if(wo(x))return b(E,y,x,P);Ol(E,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,x),y.return=E,E=y):(n(E,y),y=sh(x,E.mode,P),y.return=E,E=y),o(E)):n(E,y)}return C}var Ci=Ow(!0),Mw=Ow(!1),Mu=qr(null),Lu=null,ci=null,Im=null;function bm(){Im=ci=Lu=null}function Sm(t){var e=Mu.current;ye(Mu),t._currentValue=e}function of(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yi(t,e){Lu=t,Im=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function qt(t){var e=t._currentValue;if(Im!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(Lu===null)throw Error(z(308));ci=t,Lu.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var ps=null;function km(t){ps===null?ps=[t]:ps.push(t)}function Lw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,km(e)):(n.next=s.next,s.next=n),e.interleaved=n,$n(t,r)}function $n(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pr=!1;function Cm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Cr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,$n(t,n)}return s=r.interleaved,s===null?(e.next=e,km(r)):(e.next=s.next,s.next=e),r.interleaved=e,$n(t,n)}function ru(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}function Ky(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fu(t,e,n,r){var s=t.updateQueue;pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,h=d=u=null,l=i;do{var p=l.lane,_=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,b=l;switch(p=e,_=n,b.tag){case 1:if(I=b.payload,typeof I=="function"){m=I.call(_,m,p);break e}m=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=b.payload,p=typeof I=="function"?I.call(_,m,p):I,p==null)break e;m=Ie({},m,p);break e;case 2:pr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else _={eventTime:_,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=_,u=m):h=h.next=_,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Cs|=o,t.lanes=o,t.memoizedState=m}}function Qy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Ha={},vn=qr(Ha),xa=qr(Ha),Ea=qr(Ha);function gs(t){if(t===Ha)throw Error(z(174));return t}function Rm(t,e){switch(fe(Ea,e),fe(xa,t),fe(vn,Ha),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vh(e,t)}ye(vn),fe(vn,e)}function Ri(){ye(vn),ye(xa),ye(Ea)}function Vw(t){gs(Ea.current);var e=gs(vn.current),n=Vh(e,t.type);e!==n&&(fe(xa,t),fe(vn,n))}function Nm(t){xa.current===t&&(ye(vn),ye(xa))}var Ee=qr(0);function Vu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jd=[];function Am(){for(var t=0;t<Jd.length;t++)Jd[t]._workInProgressVersionPrimary=null;Jd.length=0}var su=er.ReactCurrentDispatcher,Zd=er.ReactCurrentBatchConfig,ks=0,Te=null,Ue=null,He=null,Uu=!1,Jo=!1,Ta=0,DS=0;function tt(){throw Error(z(321))}function Pm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function Dm(t,e,n,r,s,i){if(ks=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,su.current=t===null||t.memoizedState===null?LS:FS,t=n(r,s),Jo){i=0;do{if(Jo=!1,Ta=0,25<=i)throw Error(z(301));i+=1,He=Ue=null,e.updateQueue=null,su.current=VS,t=n(r,s)}while(Jo)}if(su.current=zu,e=Ue!==null&&Ue.next!==null,ks=0,He=Ue=Te=null,Uu=!1,e)throw Error(z(300));return t}function jm(){var t=Ta!==0;return Ta=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Te.memoizedState=He=t:He=He.next=t,He}function Gt(){if(Ue===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=He===null?Te.memoizedState:He.next;if(e!==null)He=e,Ue=t;else{if(t===null)throw Error(z(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},He===null?Te.memoizedState=He=t:He=He.next=t}return He}function Ia(t,e){return typeof e=="function"?e(t):e}function eh(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var h=d.lane;if((ks&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Te.lanes|=h,Cs|=h}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,ln(r,e.memoizedState)||(Et=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,Cs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function th(t){var e=Gt(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Uw(){}function zw(t,e){var n=Te,r=Gt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Et=!0),r=r.queue,Om(Ww.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ba(9,$w.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(z(349));ks&30||Bw(n,e,s)}return s}function Bw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $w(t,e,n,r){e.value=n,e.getSnapshot=r,Hw(e)&&qw(t)}function Ww(t,e,n){return n(function(){Hw(e)&&qw(t)})}function Hw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function qw(t){var e=$n(t,1);e!==null&&sn(e,t,1,-1)}function Yy(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=MS.bind(null,Te,t),[e.memoizedState,t]}function ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Gw(){return Gt().memoizedState}function iu(t,e,n,r){var s=mn();Te.flags|=t,s.memoizedState=ba(1|e,n,void 0,r===void 0?null:r)}function kc(t,e,n,r){var s=Gt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Pm(r,o.deps)){s.memoizedState=ba(e,n,i,r);return}}Te.flags|=t,s.memoizedState=ba(1|e,n,i,r)}function Xy(t,e){return iu(8390656,8,t,e)}function Om(t,e){return kc(2048,8,t,e)}function Kw(t,e){return kc(4,2,t,e)}function Qw(t,e){return kc(4,4,t,e)}function Yw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xw(t,e,n){return n=n!=null?n.concat([t]):null,kc(4,4,Yw.bind(null,e,t),n)}function Mm(){}function Jw(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zw(t,e){var n=Gt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function e1(t,e,n){return ks&21?(ln(n,e)||(n=iw(),Te.lanes|=n,Cs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function jS(t,e){var n=ce;ce=n!==0&&4>n?n:4,t(!0);var r=Zd.transition;Zd.transition={};try{t(!1),e()}finally{ce=n,Zd.transition=r}}function t1(){return Gt().memoizedState}function OS(t,e,n){var r=Nr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},n1(t))r1(e,n);else if(n=Lw(t,e,n,r),n!==null){var s=mt();sn(n,t,r,s),s1(n,e,r)}}function MS(t,e,n){var r=Nr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(n1(t))r1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,ln(l,o)){var u=e.interleaved;u===null?(s.next=s,km(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Lw(t,e,s,r),n!==null&&(s=mt(),sn(n,t,r,s),s1(n,e,r))}}function n1(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function r1(t,e){Jo=Uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function s1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,fm(t,n)}}var zu={readContext:qt,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useInsertionEffect:tt,useLayoutEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useMutableSource:tt,useSyncExternalStore:tt,useId:tt,unstable_isNewReconciler:!1},LS={readContext:qt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:qt,useEffect:Xy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,iu(4194308,4,Yw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return iu(4194308,4,t,e)},useInsertionEffect:function(t,e){return iu(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OS.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Yy,useDebugValue:Mm,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Yy(!1),e=t[0];return t=jS.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=mn();if(ve){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),qe===null)throw Error(z(349));ks&30||Bw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Xy(Ww.bind(null,r,i,t),[t]),r.flags|=2048,ba(9,$w.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=qe.identifierPrefix;if(ve){var n=Dn,r=Pn;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ta++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FS={readContext:qt,useCallback:Jw,useContext:qt,useEffect:Om,useImperativeHandle:Xw,useInsertionEffect:Kw,useLayoutEffect:Qw,useMemo:Zw,useReducer:eh,useRef:Gw,useState:function(){return eh(Ia)},useDebugValue:Mm,useDeferredValue:function(t){var e=Gt();return e1(e,Ue.memoizedState,t)},useTransition:function(){var t=eh(Ia)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:zw,useId:t1,unstable_isNewReconciler:!1},VS={readContext:qt,useCallback:Jw,useContext:qt,useEffect:Om,useImperativeHandle:Xw,useInsertionEffect:Kw,useLayoutEffect:Qw,useMemo:Zw,useReducer:th,useRef:Gw,useState:function(){return th(Ia)},useDebugValue:Mm,useDeferredValue:function(t){var e=Gt();return Ue===null?e.memoizedState=t:e1(e,Ue.memoizedState,t)},useTransition:function(){var t=th(Ia)[0],e=Gt().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:zw,useId:t1,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function af(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cc={isMounted:function(t){return(t=t._reactInternals)?Vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Nr(t),i=Mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(sn(e,t,s,r),ru(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=mt(),s=Nr(t),i=Mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Cr(t,i,s),e!==null&&(sn(e,t,s,r),ru(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=mt(),r=Nr(t),s=Mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Cr(t,s,r),e!==null&&(sn(e,t,r,n),ru(e,t,r))}};function Jy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(s,i):!0}function i1(t,e,n){var r=!1,s=Lr,i=e.contextType;return typeof i=="object"&&i!==null?i=qt(i):(s=It(e)?bs:at.current,r=e.contextTypes,i=(r=r!=null)?Si(t,s):Lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Zy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cc.enqueueReplaceState(e,e.state,null)}function lf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Cm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=qt(i):(i=It(e)?bs:at.current,s.context=Si(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(af(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cc.enqueueReplaceState(s,s.state,null),Fu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ni(t,e){try{var n="",r=e;do n+=fb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function uf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var US=typeof WeakMap=="function"?WeakMap:Map;function o1(t,e,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,vf=r),uf(t,e)},n}function a1(t,e,n){n=Mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){uf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){uf(t,e),typeof r!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function e_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new US;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=e2.bind(null,t,e,n),e.then(t,t))}function t_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function n_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mn(-1,1),e.tag=2,Cr(n,e,1))),n.lanes|=1),t)}var zS=er.ReactCurrentOwner,Et=!1;function ht(t,e,n,r){e.child=t===null?Mw(e,null,n,r):Ci(e,t.child,n,r)}function r_(t,e,n,r,s){n=n.render;var i=e.ref;return yi(e,s),r=Dm(t,e,n,r,i,s),n=jm(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(ve&&n&&xm(e),e.flags|=1,ht(t,e,r,s),e.child)}function s_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Wm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,l1(t,e,i,r,s)):(t=uu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Ar(i,r),t.ref=e.ref,t.return=e,e.child=t}function l1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ya(i,r)&&t.ref===e.ref)if(Et=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return cf(t,e,n,r,s)}function u1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(hi,Rt),Rt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(hi,Rt),Rt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe(hi,Rt),Rt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,fe(hi,Rt),Rt|=r;return ht(t,e,s,n),e.child}function c1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function cf(t,e,n,r,s){var i=It(n)?bs:at.current;return i=Si(e,i),yi(e,s),n=Dm(t,e,n,r,i,s),r=jm(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(ve&&r&&xm(e),e.flags|=1,ht(t,e,n,s),e.child)}function i_(t,e,n,r,s){if(It(n)){var i=!0;Du(e)}else i=!1;if(yi(e,s),e.stateNode===null)ou(t,e),i1(e,n,r),lf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=qt(d):(d=It(n)?bs:at.current,d=Si(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Zy(e,o,r,d),pr=!1;var p=e.memoizedState;o.state=p,Fu(e,r,o,s),u=e.memoizedState,l!==r||p!==u||Tt.current||pr?(typeof h=="function"&&(af(e,n,h,r),u=e.memoizedState),(l=pr||Jy(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Fw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Zt(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=qt(u):(u=It(n)?bs:at.current,u=Si(e,u));var _=n.getDerivedStateFromProps;(h=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Zy(e,o,r,u),pr=!1,p=e.memoizedState,o.state=p,Fu(e,r,o,s);var I=e.memoizedState;l!==m||p!==I||Tt.current||pr?(typeof _=="function"&&(af(e,n,_,r),I=e.memoizedState),(d=pr||Jy(e,n,d,r,p,I,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return df(t,e,n,r,i,s)}function df(t,e,n,r,s,i){c1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Wy(e,n,!1),Wn(t,e,i);r=e.stateNode,zS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,i),e.child=Ci(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&Wy(e,n,!0),e.child}function d1(t){var e=t.stateNode;e.pendingContext?$y(t,e.pendingContext,e.pendingContext!==e.context):e.context&&$y(t,e.context,!1),Rm(t,e.containerInfo)}function o_(t,e,n,r,s){return ki(),Tm(s),e.flags|=256,ht(t,e,n,r),e.child}var hf={dehydrated:null,treeContext:null,retryLane:0};function ff(t){return{baseLanes:t,cachePool:null,transitions:null}}function h1(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),fe(Ee,s&1),t===null)return sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ac(o,r,0,null),t=ws(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ff(n),e.memoizedState=hf,t):Lm(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return BS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ar(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ar(l,i):(i=ws(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ff(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=hf,r}return i=t.child,t=i.sibling,r=Ar(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lm(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ml(t,e,n,r){return r!==null&&Tm(r),Ci(e,t.child,null,n),t=Lm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nh(Error(z(422))),Ml(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ac({mode:"visible",children:r.children},s,0,null),i=ws(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ci(e,t.child,null,o),e.child.memoizedState=ff(o),e.memoizedState=hf,i);if(!(e.mode&1))return Ml(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=nh(i,r,void 0),Ml(t,e,o,r)}if(l=(o&t.childLanes)!==0,Et||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,$n(t,s),sn(r,t,s,-1))}return $m(),r=nh(Error(z(421))),Ml(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=t2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Nt=kr(s.nextSibling),Dt=e,ve=!0,tn=null,t!==null&&(Vt[Ut++]=Pn,Vt[Ut++]=Dn,Vt[Ut++]=Ss,Pn=t.id,Dn=t.overflow,Ss=e),e=Lm(e,r.children),e.flags|=4096,e)}function a_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),of(t.return,e,n)}function rh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function f1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&a_(t,n,e);else if(t.tag===19)a_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rh(e,!0,n,null,i);break;case"together":rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Cs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Ar(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ar(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function $S(t,e,n){switch(e.tag){case 3:d1(e),ki();break;case 5:Vw(e);break;case 1:It(e.type)&&Du(e);break;case 4:Rm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;fe(Mu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?h1(t,e,n):(fe(Ee,Ee.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);fe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return f1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,u1(t,e,n)}return Wn(t,e,n)}var m1,mf,p1,g1;m1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mf=function(){};p1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,gs(vn.current);var i=null;switch(n){case"input":s=Oh(t,s),r=Oh(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Fh(t,s),r=Fh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Au)}Uh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ca.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ca.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&pe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};g1=function(t,e,n,r){n!==r&&(e.flags|=4)};function So(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WS(t,e,n){var r=e.pendingProps;switch(Em(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nt(e),null;case 1:return It(e.type)&&Pu(),nt(e),null;case 3:return r=e.stateNode,Ri(),ye(Tt),ye(at),Am(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(Ef(tn),tn=null))),mf(t,e),nt(e),null;case 5:Nm(e);var s=gs(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)p1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return nt(e),null}if(t=gs(vn.current),jl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[wa]=i,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(s=0;s<Vo.length;s++)pe(Vo[s],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":gy(r,i),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},pe("invalid",r);break;case"textarea":_y(r,i),pe("invalid",r)}Uh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Dl(r.textContent,l,t),s=["children",""+l]):ca.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":bl(r),yy(r,i,!0);break;case"textarea":bl(r),vy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Au)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[wa]=r,m1(t,e,!1,!1),e.stateNode=t;e:{switch(o=zh(n,r),n){case"dialog":pe("cancel",t),pe("close",t),s=r;break;case"iframe":case"object":case"embed":pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vo.length;s++)pe(Vo[s],t);s=r;break;case"source":pe("error",t),s=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),s=r;break;case"details":pe("toggle",t),s=r;break;case"input":gy(t,r),s=Oh(t,r),pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),pe("invalid",t);break;case"textarea":_y(t,r),s=Fh(t,r),pe("invalid",t);break;default:s=r}Uh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?G0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&da(t,u):typeof u=="number"&&da(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ca.hasOwnProperty(i)?u!=null&&i==="onScroll"&&pe("scroll",t):u!=null&&am(t,i,u,o))}switch(n){case"input":bl(t),yy(t,r,!1);break;case"textarea":bl(t),vy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Mr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fi(t,!!r.multiple,i,!1):r.defaultValue!=null&&fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Au)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return nt(e),null;case 6:if(t&&e.stateNode!=null)g1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=gs(Ea.current),gs(vn.current),jl(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return nt(e),null;case 13:if(ye(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Nt!==null&&e.mode&1&&!(e.flags&128))jw(),ki(),e.flags|=98560,i=!1;else if(i=jl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[gn]=e}else ki(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;nt(e),i=!1}else tn!==null&&(Ef(tn),tn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?ze===0&&(ze=3):$m())),e.updateQueue!==null&&(e.flags|=4),nt(e),null);case 4:return Ri(),mf(t,e),t===null&&_a(e.stateNode.containerInfo),nt(e),null;case 10:return Sm(e.type._context),nt(e),null;case 17:return It(e.type)&&Pu(),nt(e),null;case 19:if(ye(Ee),i=e.memoizedState,i===null)return nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)So(i,!1);else{if(ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vu(t),o!==null){for(e.flags|=128,So(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>Ai&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),So(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return nt(e),null}else 2*Pe()-i.renderingStartTime>Ai&&n!==1073741824&&(e.flags|=128,r=!0,So(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=Ee.current,fe(Ee,r?n&1|2:n&1),e):(nt(e),null);case 22:case 23:return Bm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Rt&1073741824&&(nt(e),e.subtreeFlags&6&&(e.flags|=8192)):nt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function HS(t,e){switch(Em(e),e.tag){case 1:return It(e.type)&&Pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ri(),ye(Tt),ye(at),Am(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nm(e),null;case 13:if(ye(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ki()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(Ee),null;case 4:return Ri(),null;case 10:return Sm(e.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var Ll=!1,it=!1,qS=typeof WeakSet=="function"?WeakSet:Set,H=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function pf(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var l_=!1;function GS(t,e){if(Xh=Cu,t=xw(),wm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)p=m,m=_;for(;;){if(m===t)break t;if(p===n&&++d===s&&(l=o),p===i&&++h===r&&(u=o),(_=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Jh={focusedElem:t,selectionRange:n},Cu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var b=I.memoizedProps,C=I.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?b:Zt(e.type,b),C);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){Ce(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return I=l_,l_=!1,I}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&pf(e,n,i)}s=s.next}while(s!==r)}}function Rc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y1(t){var e=t.alternate;e!==null&&(t.alternate=null,y1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[wa],delete e[tf],delete e[RS],delete e[NS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _1(t){return t.tag===5||t.tag===3||t.tag===4}function u_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Au));else if(r!==4&&(t=t.child,t!==null))for(yf(t,e,n),t=t.sibling;t!==null;)yf(t,e,n),t=t.sibling}function _f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_f(t,e,n),t=t.sibling;t!==null;)_f(t,e,n),t=t.sibling}var Ke=null,en=!1;function dr(t,e,n){for(n=n.child;n!==null;)v1(t,e,n),n=n.sibling}function v1(t,e,n){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(xc,n)}catch{}switch(n.tag){case 5:it||di(n,e);case 6:var r=Ke,s=en;Ke=null,dr(t,e,n),Ke=r,en=s,Ke!==null&&(en?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(en?(t=Ke,n=n.stateNode,t.nodeType===8?Yd(t.parentNode,n):t.nodeType===1&&Yd(t,n),pa(t)):Yd(Ke,n.stateNode));break;case 4:r=Ke,s=en,Ke=n.stateNode.containerInfo,en=!0,dr(t,e,n),Ke=r,en=s;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pf(n,e,o),s=s.next}while(s!==r)}dr(t,e,n);break;case 1:if(!it&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}dr(t,e,n);break;case 21:dr(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,dr(t,e,n),it=r):dr(t,e,n);break;default:dr(t,e,n)}}function c_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new qS),e.forEach(function(r){var s=n2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,en=!1;break e;case 3:Ke=l.stateNode.containerInfo,en=!0;break e;case 4:Ke=l.stateNode.containerInfo,en=!0;break e}l=l.return}if(Ke===null)throw Error(z(160));v1(i,o,s),Ke=null,en=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Ce(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w1(e,t),e=e.sibling}function w1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),fn(t),r&4){try{Zo(3,t,t.return),Rc(3,t)}catch(b){Ce(t,t.return,b)}try{Zo(5,t,t.return)}catch(b){Ce(t,t.return,b)}}break;case 1:Jt(e,t),fn(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(Jt(e,t),fn(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(b){Ce(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&B0(s,i),zh(l,o);var d=zh(l,i);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?G0(s,m):h==="dangerouslySetInnerHTML"?H0(s,m):h==="children"?da(s,m):am(s,h,m,d)}switch(l){case"input":Mh(s,i);break;case"textarea":$0(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?fi(s,!!i.multiple,_,!1):p!==!!i.multiple&&(i.defaultValue!=null?fi(s,!!i.multiple,i.defaultValue,!0):fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[wa]=i}catch(b){Ce(t,t.return,b)}}break;case 6:if(Jt(e,t),fn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Ce(t,t.return,b)}}break;case 3:if(Jt(e,t),fn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pa(e.containerInfo)}catch(b){Ce(t,t.return,b)}break;case 4:Jt(e,t),fn(t);break;case 13:Jt(e,t),fn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Um=Pe())),r&4&&c_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(it=(d=it)||h,Jt(e,t),it=d):Jt(e,t),fn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(m=H=h;H!==null;){switch(p=H,_=p.child,p.tag){case 0:case 11:case 14:case 15:Zo(4,p,p.return);break;case 1:di(p,p.return);var I=p.stateNode;if(typeof I.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(b){Ce(r,n,b)}}break;case 5:di(p,p.return);break;case 22:if(p.memoizedState!==null){h_(m);continue}}_!==null?(_.return=p,H=_):h_(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=q0("display",o))}catch(b){Ce(t,t.return,b)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(b){Ce(t,t.return,b)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Jt(e,t),fn(t),r&4&&c_(t);break;case 21:break;default:Jt(e,t),fn(t)}}function fn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_1(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=u_(t);_f(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=u_(t);yf(t,l,o);break;default:throw Error(z(161))}}catch(u){Ce(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function KS(t,e,n){H=t,x1(t)}function x1(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ll;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||it;l=Ll;var d=it;if(Ll=o,(it=u)&&!d)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?f_(s):u!==null?(u.return=o,H=u):f_(s);for(;i!==null;)H=i,x1(i),i=i.sibling;H=s,Ll=l,it=d}d_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):d_(t)}}function d_(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||Rc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Qy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&pa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}it||e.flags&512&&gf(e)}catch(p){Ce(e,e.return,p)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function h_(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function f_(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Rc(4,e)}catch(u){Ce(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Ce(e,s,u)}}var i=e.return;try{gf(e)}catch(u){Ce(e,i,u)}break;case 5:var o=e.return;try{gf(e)}catch(u){Ce(e,o,u)}}}catch(u){Ce(e,e.return,u)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var QS=Math.ceil,Bu=er.ReactCurrentDispatcher,Fm=er.ReactCurrentOwner,$t=er.ReactCurrentBatchConfig,oe=0,qe=null,je=null,Xe=0,Rt=0,hi=qr(0),ze=0,Sa=null,Cs=0,Nc=0,Vm=0,ea=null,vt=null,Um=0,Ai=1/0,Cn=null,$u=!1,vf=null,Rr=null,Fl=!1,Er=null,Wu=0,ta=0,wf=null,au=-1,lu=0;function mt(){return oe&6?Pe():au!==-1?au:au=Pe()}function Nr(t){return t.mode&1?oe&2&&Xe!==0?Xe&-Xe:PS.transition!==null?(lu===0&&(lu=iw()),lu):(t=ce,t!==0||(t=window.event,t=t===void 0?16:hw(t.type)),t):1}function sn(t,e,n,r){if(50<ta)throw ta=0,wf=null,Error(z(185));Ba(t,n,r),(!(oe&2)||t!==qe)&&(t===qe&&(!(oe&2)&&(Nc|=n),ze===4&&yr(t,Xe)),bt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Ai=Pe()+500,Sc&&Gr()))}function bt(t,e){var n=t.callbackNode;Pb(t,e);var r=ku(t,t===qe?Xe:0);if(r===0)n!==null&&Ey(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ey(n),e===1)t.tag===0?AS(m_.bind(null,t)):Aw(m_.bind(null,t)),kS(function(){!(oe&6)&&Gr()}),n=null;else{switch(ow(r)){case 1:n=hm;break;case 4:n=rw;break;case 16:n=Su;break;case 536870912:n=sw;break;default:n=Su}n=R1(n,E1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function E1(t,e){if(au=-1,lu=0,oe&6)throw Error(z(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=ku(t,t===qe?Xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hu(t,r);else{e=r;var s=oe;oe|=2;var i=I1();(qe!==t||Xe!==e)&&(Cn=null,Ai=Pe()+500,vs(t,e));do try{JS();break}catch(l){T1(t,l)}while(!0);bm(),Bu.current=i,oe=s,je!==null?e=0:(qe=null,Xe=0,e=ze)}if(e!==0){if(e===2&&(s=qh(t),s!==0&&(r=s,e=xf(t,s))),e===1)throw n=Sa,vs(t,0),yr(t,r),bt(t,Pe()),n;if(e===6)yr(t,r);else{if(s=t.current.alternate,!(r&30)&&!YS(s)&&(e=Hu(t,r),e===2&&(i=qh(t),i!==0&&(r=i,e=xf(t,i))),e===1))throw n=Sa,vs(t,0),yr(t,r),bt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:cs(t,vt,Cn);break;case 3:if(yr(t,r),(r&130023424)===r&&(e=Um+500-Pe(),10<e)){if(ku(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){mt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ef(cs.bind(null,t,vt,Cn),e);break}cs(t,vt,Cn);break;case 4:if(yr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-rn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*QS(r/1960))-r,10<r){t.timeoutHandle=ef(cs.bind(null,t,vt,Cn),r);break}cs(t,vt,Cn);break;case 5:cs(t,vt,Cn);break;default:throw Error(z(329))}}}return bt(t,Pe()),t.callbackNode===n?E1.bind(null,t):null}function xf(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=Hu(t,e),t!==2&&(e=vt,vt=n,e!==null&&Ef(e)),t}function Ef(t){vt===null?vt=t:vt.push.apply(vt,t)}function YS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yr(t,e){for(e&=~Vm,e&=~Nc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rn(e),r=1<<n;t[n]=-1,e&=~r}}function m_(t){if(oe&6)throw Error(z(327));_i();var e=ku(t,0);if(!(e&1))return bt(t,Pe()),null;var n=Hu(t,e);if(t.tag!==0&&n===2){var r=qh(t);r!==0&&(e=r,n=xf(t,r))}if(n===1)throw n=Sa,vs(t,0),yr(t,e),bt(t,Pe()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,vt,Cn),bt(t,Pe()),null}function zm(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Ai=Pe()+500,Sc&&Gr())}}function Rs(t){Er!==null&&Er.tag===0&&!(oe&6)&&_i();var e=oe;oe|=1;var n=$t.transition,r=ce;try{if($t.transition=null,ce=1,t)return t()}finally{ce=r,$t.transition=n,oe=e,!(oe&6)&&Gr()}}function Bm(){Rt=hi.current,ye(hi)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,SS(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Em(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pu();break;case 3:Ri(),ye(Tt),ye(at),Am();break;case 5:Nm(r);break;case 4:Ri();break;case 13:ye(Ee);break;case 19:ye(Ee);break;case 10:Sm(r.type._context);break;case 22:case 23:Bm()}n=n.return}if(qe=t,je=t=Ar(t.current,null),Xe=Rt=e,ze=0,Sa=null,Vm=Nc=Cs=0,vt=ea=null,ps!==null){for(e=0;e<ps.length;e++)if(n=ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ps=null}return t}function T1(t,e){do{var n=je;try{if(bm(),su.current=zu,Uu){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uu=!1}if(ks=0,He=Ue=Te=null,Jo=!1,Ta=0,Fm.current=null,n===null||n.return===null){ze=1,Sa=e,je=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Xe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var _=t_(o);if(_!==null){_.flags&=-257,n_(_,o,l,i,e),_.mode&1&&e_(i,d,e),e=_,u=d;var I=e.updateQueue;if(I===null){var b=new Set;b.add(u),e.updateQueue=b}else I.add(u);break e}else{if(!(e&1)){e_(i,d,e),$m();break e}u=Error(z(426))}}else if(ve&&l.mode&1){var C=t_(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),n_(C,o,l,i,e),Tm(Ni(u,l));break e}}i=u=Ni(u,l),ze!==4&&(ze=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=o1(i,u,e);Ky(i,E);break e;case 1:l=u;var y=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Rr===null||!Rr.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=a1(i,l,e);Ky(i,P);break e}}i=i.return}while(i!==null)}S1(n)}catch(M){e=M,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function I1(){var t=Bu.current;return Bu.current=zu,t===null?zu:t}function $m(){(ze===0||ze===3||ze===2)&&(ze=4),qe===null||!(Cs&268435455)&&!(Nc&268435455)||yr(qe,Xe)}function Hu(t,e){var n=oe;oe|=2;var r=I1();(qe!==t||Xe!==e)&&(Cn=null,vs(t,e));do try{XS();break}catch(s){T1(t,s)}while(!0);if(bm(),oe=n,Bu.current=r,je!==null)throw Error(z(261));return qe=null,Xe=0,ze}function XS(){for(;je!==null;)b1(je)}function JS(){for(;je!==null&&!Tb();)b1(je)}function b1(t){var e=C1(t.alternate,t,Rt);t.memoizedProps=t.pendingProps,e===null?S1(t):je=e,Fm.current=null}function S1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HS(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ze=6,je=null;return}}else if(n=WS(n,e,Rt),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);ze===0&&(ze=5)}function cs(t,e,n){var r=ce,s=$t.transition;try{$t.transition=null,ce=1,ZS(t,e,n,r)}finally{$t.transition=s,ce=r}return null}function ZS(t,e,n,r){do _i();while(Er!==null);if(oe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Db(t,i),t===qe&&(je=qe=null,Xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Fl||(Fl=!0,R1(Su,function(){return _i(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=$t.transition,$t.transition=null;var o=ce;ce=1;var l=oe;oe|=4,Fm.current=null,GS(t,n),w1(n,t),vS(Jh),Cu=!!Xh,Jh=Xh=null,t.current=n,KS(n),Ib(),oe=l,ce=o,$t.transition=i}else t.current=n;if(Fl&&(Fl=!1,Er=t,Wu=s),i=t.pendingLanes,i===0&&(Rr=null),kb(n.stateNode),bt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=vf,vf=null,t;return Wu&1&&t.tag!==0&&_i(),i=t.pendingLanes,i&1?t===wf?ta++:(ta=0,wf=t):ta=0,Gr(),null}function _i(){if(Er!==null){var t=ow(Wu),e=$t.transition,n=ce;try{if($t.transition=null,ce=16>t?16:t,Er===null)var r=!1;else{if(t=Er,Er=null,Wu=0,oe&6)throw Error(z(331));var s=oe;for(oe|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(H=d;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Zo(8,h,i)}var m=h.child;if(m!==null)m.return=h,H=m;else for(;H!==null;){h=H;var p=h.sibling,_=h.return;if(y1(h),h===d){H=null;break}if(p!==null){p.return=_,H=p;break}H=_}}}var I=i.alternate;if(I!==null){var b=I.child;if(b!==null){I.child=null;do{var C=b.sibling;b.sibling=null,b=C}while(b!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var y=t.current;for(H=y;H!==null;){o=H;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,H=x;else e:for(o=y;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Rc(9,l)}}catch(M){Ce(l,l.return,M)}if(l===o){H=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,H=P;break e}H=l.return}}if(oe=s,Gr(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(xc,t)}catch{}r=!0}return r}finally{ce=n,$t.transition=e}}return!1}function p_(t,e,n){e=Ni(n,e),e=o1(t,e,1),t=Cr(t,e,1),e=mt(),t!==null&&(Ba(t,1,e),bt(t,e))}function Ce(t,e,n){if(t.tag===3)p_(t,t,n);else for(;e!==null;){if(e.tag===3){p_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Rr===null||!Rr.has(r))){t=Ni(n,t),t=a1(e,t,1),e=Cr(e,t,1),t=mt(),e!==null&&(Ba(e,1,t),bt(e,t));break}}e=e.return}}function e2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=mt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Xe&n)===n&&(ze===4||ze===3&&(Xe&130023424)===Xe&&500>Pe()-Um?vs(t,0):Vm|=n),bt(t,e)}function k1(t,e){e===0&&(t.mode&1?(e=Cl,Cl<<=1,!(Cl&130023424)&&(Cl=4194304)):e=1);var n=mt();t=$n(t,e),t!==null&&(Ba(t,e,n),bt(t,n))}function t2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k1(t,n)}function n2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),k1(t,n)}var C1;C1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Tt.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,$S(t,e,n);Et=!!(t.flags&131072)}else Et=!1,ve&&e.flags&1048576&&Pw(e,Ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ou(t,e),t=e.pendingProps;var s=Si(e,at.current);yi(e,n),s=Dm(null,e,r,t,s,n);var i=jm();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,Du(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Cm(e),s.updater=Cc,e.stateNode=s,s._reactInternals=e,lf(e,r,t,n),e=df(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&xm(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ou(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=s2(r),t=Zt(r,t),s){case 0:e=cf(null,e,r,t,n);break e;case 1:e=i_(null,e,r,t,n);break e;case 11:e=r_(null,e,r,t,n);break e;case 14:e=s_(null,e,r,Zt(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),cf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),i_(t,e,r,s,n);case 3:e:{if(d1(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Fw(t,e),Fu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ni(Error(z(423)),e),e=o_(t,e,r,n,s);break e}else if(r!==s){s=Ni(Error(z(424)),e),e=o_(t,e,r,n,s);break e}else for(Nt=kr(e.stateNode.containerInfo.firstChild),Dt=e,ve=!0,tn=null,n=Mw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ki(),r===s){e=Wn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return Vw(e),t===null&&sf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Zh(r,s)?o=null:i!==null&&Zh(r,i)&&(e.flags|=32),c1(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&sf(e),null;case 13:return h1(t,e,n);case 4:return Rm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),r_(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,fe(Mu,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!Tt.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),of(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),of(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yi(e,n),s=qt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Zt(r,e.pendingProps),s=Zt(r.type,s),s_(t,e,r,s,n);case 15:return l1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Zt(r,s),ou(t,e),e.tag=1,It(r)?(t=!0,Du(e)):t=!1,yi(e,n),i1(e,r,s),lf(e,r,s,n),df(null,e,r,!0,t,n);case 19:return f1(t,e,n);case 22:return u1(t,e,n)}throw Error(z(156,e.tag))};function R1(t,e){return nw(t,e)}function r2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bt(t,e,n,r){return new r2(t,e,n,r)}function Wm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function s2(t){if(typeof t=="function")return Wm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===um)return 11;if(t===cm)return 14}return 2}function Ar(t,e){var n=t.alternate;return n===null?(n=Bt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Wm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return ws(n.children,s,i,e);case lm:o=8,s|=8;break;case Ah:return t=Bt(12,n,e,s|2),t.elementType=Ah,t.lanes=i,t;case Ph:return t=Bt(13,n,e,s),t.elementType=Ph,t.lanes=i,t;case Dh:return t=Bt(19,n,e,s),t.elementType=Dh,t.lanes=i,t;case V0:return Ac(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case L0:o=10;break e;case F0:o=9;break e;case um:o=11;break e;case cm:o=14;break e;case mr:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Bt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ws(t,e,n,r){return t=Bt(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=Bt(22,t,r,e),t.elementType=V0,t.lanes=n,t.stateNode={isHidden:!1},t}function sh(t,e,n){return t=Bt(6,t,null,e),t.lanes=n,t}function ih(t,e,n){return e=Bt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function i2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vd(0),this.expirationTimes=Vd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hm(t,e,n,r,s,i,o,l,u){return t=new i2(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Bt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cm(i),t}function o2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function N1(t){if(!t)return Lr;t=t._reactInternals;e:{if(Vs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(It(n))return Nw(t,n,e)}return e}function A1(t,e,n,r,s,i,o,l,u){return t=Hm(n,r,!0,t,s,i,o,l,u),t.context=N1(null),n=t.current,r=mt(),s=Nr(n),i=Mn(r,s),i.callback=e??null,Cr(n,i,s),t.current.lanes=s,Ba(t,s,r),bt(t,r),t}function Pc(t,e,n,r){var s=e.current,i=mt(),o=Nr(s);return n=N1(n),e.context===null?e.context=n:e.pendingContext=n,e=Mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Cr(s,e,o),t!==null&&(sn(t,s,o,i),ru(t,s,o)),o}function qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function g_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qm(t,e){g_(t,e),(t=t.alternate)&&g_(t,e)}function a2(){return null}var P1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gm(t){this._internalRoot=t}Dc.prototype.render=Gm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Pc(t,e,null,null)};Dc.prototype.unmount=Gm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Rs(function(){Pc(null,t,null,null)}),e[Bn]=null}};function Dc(t){this._internalRoot=t}Dc.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<gr.length&&e!==0&&e<gr[n].priority;n++);gr.splice(n,0,t),n===0&&dw(t)}};function Km(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function y_(){}function l2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=qu(o);i.call(d)}}var o=A1(e,r,t,0,null,!1,!1,"",y_);return t._reactRootContainer=o,t[Bn]=o.current,_a(t.nodeType===8?t.parentNode:t),Rs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=qu(u);l.call(d)}}var u=Hm(t,0,!1,null,null,!1,!1,"",y_);return t._reactRootContainer=u,t[Bn]=u.current,_a(t.nodeType===8?t.parentNode:t),Rs(function(){Pc(e,u,n,r)}),u}function Oc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=qu(o);l.call(u)}}Pc(e,o,t,s)}else o=l2(n,e,t,s,r);return qu(o)}aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(fm(e,n|1),bt(e,Pe()),!(oe&6)&&(Ai=Pe()+500,Gr()))}break;case 13:Rs(function(){var r=$n(t,1);if(r!==null){var s=mt();sn(r,t,1,s)}}),qm(t,1)}};mm=function(t){if(t.tag===13){var e=$n(t,134217728);if(e!==null){var n=mt();sn(e,t,134217728,n)}qm(t,134217728)}};lw=function(t){if(t.tag===13){var e=Nr(t),n=$n(t,e);if(n!==null){var r=mt();sn(n,t,e,r)}qm(t,e)}};uw=function(){return ce};cw=function(t,e){var n=ce;try{return ce=t,e()}finally{ce=n}};$h=function(t,e,n){switch(e){case"input":if(Mh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bc(r);if(!s)throw Error(z(90));z0(r),Mh(r,s)}}}break;case"textarea":$0(t,n);break;case"select":e=n.value,e!=null&&fi(t,!!n.multiple,e,!1)}};Y0=zm;X0=Rs;var u2={usingClientEntryPoint:!1,Events:[Wa,oi,bc,K0,Q0,zm]},ko={findFiberByHostInstance:ms,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},c2={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:er.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ew(t),t===null?null:t.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||a2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{xc=Vl.inject(c2),_n=Vl}catch{}}Ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2;Ot.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Km(e))throw Error(z(200));return o2(t,e,null,n)};Ot.createRoot=function(t,e){if(!Km(t))throw Error(z(299));var n=!1,r="",s=P1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Hm(t,1,!1,null,null,n,!1,r,s),t[Bn]=e.current,_a(t.nodeType===8?t.parentNode:t),new Gm(e)};Ot.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=ew(e),t=t===null?null:t.stateNode,t};Ot.flushSync=function(t){return Rs(t)};Ot.hydrate=function(t,e,n){if(!jc(e))throw Error(z(200));return Oc(null,t,e,!0,n)};Ot.hydrateRoot=function(t,e,n){if(!Km(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=P1;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=A1(e,null,t,1,n??null,s,!1,i,o),t[Bn]=e.current,_a(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Dc(e)};Ot.render=function(t,e,n){if(!jc(e))throw Error(z(200));return Oc(null,t,e,!1,n)};Ot.unmountComponentAtNode=function(t){if(!jc(t))throw Error(z(40));return t._reactRootContainer?(Rs(function(){Oc(null,null,t,!1,function(){t._reactRootContainer=null,t[Bn]=null})}),!0):!1};Ot.unstable_batchedUpdates=zm;Ot.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!jc(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Oc(t,e,n,!1,r)};Ot.version="18.3.1-next-f1338f8080-20240426";function D1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D1)}catch(t){console.error(t)}}D1(),D0.exports=Ot;var d2=D0.exports,__=d2;Rh.createRoot=__.createRoot,Rh.hydrateRoot=__.hydrateRoot;/**
 * react-router v7.12.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var v_="popstate";function h2(t={}){function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Tf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ka(s)}return m2(e,n,null,t)}function we(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Kt(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function f2(){return Math.random().toString(36).substring(2,10)}function w_(t,e){return{usr:t.state,key:t.key,idx:e}}function Tf(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Hi(e):e,state:n,key:e&&e.key||r||f2()}}function ka({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function m2(t,e,n,r={}){let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function m(){l="POP";let C=h(),E=C==null?null:C-d;d=C,u&&u({action:l,location:b.location,delta:E})}function p(C,E){l="PUSH";let y=Tf(b.location,C,E);d=h()+1;let x=w_(y,d),P=b.createHref(y);try{o.pushState(x,"",P)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(P)}i&&u&&u({action:l,location:b.location,delta:1})}function _(C,E){l="REPLACE";let y=Tf(b.location,C,E);d=h();let x=w_(y,d),P=b.createHref(y);o.replaceState(x,"",P),i&&u&&u({action:l,location:b.location,delta:0})}function I(C){return p2(C)}let b={get action(){return l},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(v_,m),u=C,()=>{s.removeEventListener(v_,m),u=null}},createHref(C){return e(s,C)},createURL:I,encodeLocation(C){let E=I(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:_,go(C){return o.go(C)}};return b}function p2(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),we(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:ka(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function j1(t,e,n="/"){return g2(t,e,n,!1)}function g2(t,e,n,r){let s=typeof e=="string"?Hi(e):e,i=Hn(s.pathname||"/",n);if(i==null)return null;let o=O1(t);y2(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=C2(i);l=S2(o[u],d,r)}return l}function O1(t,e=[],n=[],r="",s=!1){let i=(o,l,u=s,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:l,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&u)return;we(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let m=Ln([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(we(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),O1(o.children,e,p,m,u)),!(o.path==null&&!o.index)&&e.push({path:m,score:I2(m,o.index),routesMeta:p})};return t.forEach((o,l)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,l);else for(let d of M1(o.path))i(o,l,!0,d)}),e}function M1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=M1(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function y2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var _2=/^:[\w-]+$/,v2=3,w2=2,x2=1,E2=10,T2=-2,x_=t=>t==="*";function I2(t,e){let n=t.split("/"),r=n.length;return n.some(x_)&&(r+=T2),e&&(r+=w2),n.filter(s=>!x_(s)).reduce((s,i)=>s+(_2.test(i)?v2:i===""?x2:E2),r)}function b2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function S2(t,e,n=!1){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",m=Gu({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=Gu({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ln([i,m.pathname]),pathnameBase:P2(Ln([i,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(i=Ln([i,m.pathnameBase]))}return o}function Gu(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:m},p)=>{if(h==="*"){let I=l[p]||"";o=i.slice(0,i.length-I.length).replace(/(.)\/+$/,"$1")}const _=l[p];return m&&!_?d[h]=void 0:d[h]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function k2(t,e=!1,n=!0){Kt(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function C2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Kt(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Hn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var L1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R2=t=>L1.test(t);function N2(t,e="/"){let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Hi(t):t,i;if(n)if(R2(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Kt(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?i=E_(n.substring(1),"/"):i=E_(n,e)}else i=e;return{pathname:i,search:D2(r),hash:j2(s)}}function E_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oh(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qm(t){let e=A2(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function Ym(t,e,n,r=!1){let s;typeof t=="string"?s=Hi(t):(s={...t},we(!s.pathname||!s.pathname.includes("?"),oh("?","pathname","search",s)),we(!s.pathname||!s.pathname.includes("#"),oh("#","pathname","hash",s)),we(!s.search||!s.search.includes("#"),oh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}l=m>=0?e[m]:"/"}let u=N2(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var Ln=t=>t.join("/").replace(/\/\/+/g,"/"),P2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),D2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,j2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,O2=class{constructor(t,e,n,r=!1){this.status=t,this.statusText=e||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function M2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function L2(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var F1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function V1(t,e){let n=t;if(typeof n!="string"||!L1.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,s=!1;if(F1)try{let i=new URL(window.location.href),o=n.startsWith("//")?new URL(i.protocol+n):new URL(n),l=Hn(o.pathname,e);o.origin===i.origin&&l!=null?n=l+o.search+o.hash:s=!0}catch{Kt(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var U1=["POST","PUT","PATCH","DELETE"];new Set(U1);var F2=["GET",...U1];new Set(F2);var qi=A.createContext(null);qi.displayName="DataRouter";var Mc=A.createContext(null);Mc.displayName="DataRouterState";var V2=A.createContext(!1),z1=A.createContext({isTransitioning:!1});z1.displayName="ViewTransition";var U2=A.createContext(new Map);U2.displayName="Fetchers";var z2=A.createContext(null);z2.displayName="Await";var Lt=A.createContext(null);Lt.displayName="Navigation";var qa=A.createContext(null);qa.displayName="Location";var cn=A.createContext({outlet:null,matches:[],isDataRoute:!1});cn.displayName="Route";var Xm=A.createContext(null);Xm.displayName="RouteError";var B1="REACT_ROUTER_ERROR",B2="REDIRECT",$2="ROUTE_ERROR_RESPONSE";function W2(t){if(t.startsWith(`${B1}:${B2}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function H2(t){if(t.startsWith(`${B1}:${$2}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new O2(e.status,e.statusText,e.data)}catch{}}function q2(t,{relative:e}={}){we(Gi(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Lt),{hash:s,pathname:i,search:o}=Ga(t,{relative:e}),l=i;return n!=="/"&&(l=i==="/"?n:Ln([n,i])),r.createHref({pathname:l,search:o,hash:s})}function Gi(){return A.useContext(qa)!=null}function Kr(){return we(Gi(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(qa).location}var $1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W1(t){A.useContext(Lt).static||A.useLayoutEffect(t)}function Us(){let{isDataRoute:t}=A.useContext(cn);return t?ok():G2()}function G2(){we(Gi(),"useNavigate() may be used only in the context of a <Router> component.");let t=A.useContext(qi),{basename:e,navigator:n}=A.useContext(Lt),{matches:r}=A.useContext(cn),{pathname:s}=Kr(),i=JSON.stringify(Qm(r)),o=A.useRef(!1);return W1(()=>{o.current=!0}),A.useCallback((u,d={})=>{if(Kt(o.current,$1),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=Ym(u,JSON.parse(i),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ln([e,h.pathname])),(d.replace?n.replace:n.push)(h,d.state,d)},[e,n,i,s,t])}A.createContext(null);function K2(){let{matches:t}=A.useContext(cn),e=t[t.length-1];return e?e.params:{}}function Ga(t,{relative:e}={}){let{matches:n}=A.useContext(cn),{pathname:r}=Kr(),s=JSON.stringify(Qm(n));return A.useMemo(()=>Ym(t,JSON.parse(s),r,e==="path"),[t,s,r,e])}function Q2(t,e){return H1(t,e)}function H1(t,e,n,r,s){var y;we(Gi(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=A.useContext(Lt),{matches:o}=A.useContext(cn),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",m=l&&l.route;{let x=m&&m.path||"";G1(d,!m||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let p=Kr(),_;if(e){let x=typeof e=="string"?Hi(e):e;we(h==="/"||((y=x.pathname)==null?void 0:y.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),_=x}else _=p;let I=_.pathname||"/",b=I;if(h!=="/"){let x=h.replace(/^\//,"").split("/");b="/"+I.replace(/^\//,"").split("/").slice(x.length).join("/")}let C=j1(t,{pathname:b});Kt(m||C!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),Kt(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=ek(C&&C.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:Ln([h,i.encodeLocation?i.encodeLocation(x.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:Ln([h,i.encodeLocation?i.encodeLocation(x.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:x.pathnameBase])})),o,n,r,s);return e&&E?A.createElement(qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},E):E}function Y2(){let t=ik(),e=M2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:i},"ErrorBoundary")," or"," ",A.createElement("code",{style:i},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,o)}var X2=A.createElement(Y2,null),q1=class extends A.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=H2(t.digest);n&&(t=n)}let e=t!==void 0?A.createElement(cn.Provider,{value:this.props.routeContext},A.createElement(Xm.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?A.createElement(J2,{error:t},e):e}};q1.contextType=V2;var ah=new WeakMap;function J2({children:t,error:e}){let{basename:n}=A.useContext(Lt);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=W2(e.digest);if(r){let s=ah.get(e);if(s)throw s;let i=V1(r.location,n);if(F1&&!ah.get(e))if(i.isExternal||r.reloadDocument)window.location.href=i.absoluteURL||i.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(i.to,{replace:r.replace}));throw ah.set(e,o),o}return A.createElement("meta",{httpEquiv:"refresh",content:`0;url=${i.absoluteURL||i.to}`})}}return t}function Z2({routeContext:t,match:e,children:n}){let r=A.useContext(qi);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),A.createElement(cn.Provider,{value:t},n)}function ek(t,e=[],n=null,r=null,s=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,o=n==null?void 0:n.errors;if(o!=null){let h=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);we(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,h+1))}let l=!1,u=-1;if(n)for(let h=0;h<i.length;h++){let m=i[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=h),m.route.id){let{loaderData:p,errors:_}=n,I=m.route.loader&&!p.hasOwnProperty(m.route.id)&&(!_||_[m.route.id]===void 0);if(m.route.lazy||I){l=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}let d=n&&r?(h,m)=>{var p,_;r(h,{location:n.location,params:((_=(p=n.matches)==null?void 0:p[0])==null?void 0:_.params)??{},unstable_pattern:L2(n.matches),errorInfo:m})}:void 0;return i.reduceRight((h,m,p)=>{let _,I=!1,b=null,C=null;n&&(_=o&&m.route.id?o[m.route.id]:void 0,b=m.route.errorElement||X2,l&&(u<0&&p===0?(G1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,C=null):u===p&&(I=!0,C=m.route.hydrateFallbackElement||null)));let E=e.concat(i.slice(0,p+1)),y=()=>{let x;return _?x=b:I?x=C:m.route.Component?x=A.createElement(m.route.Component,null):m.route.element?x=m.route.element:x=h,A.createElement(Z2,{match:m,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:x})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?A.createElement(q1,{location:n.location,revalidation:n.revalidation,component:b,error:_,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:d}):y()},null)}function Jm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tk(t){let e=A.useContext(qi);return we(e,Jm(t)),e}function nk(t){let e=A.useContext(Mc);return we(e,Jm(t)),e}function rk(t){let e=A.useContext(cn);return we(e,Jm(t)),e}function Zm(t){let e=rk(t),n=e.matches[e.matches.length-1];return we(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function sk(){return Zm("useRouteId")}function ik(){var r;let t=A.useContext(Xm),e=nk("useRouteError"),n=Zm("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function ok(){let{router:t}=tk("useNavigate"),e=Zm("useNavigate"),n=A.useRef(!1);return W1(()=>{n.current=!0}),A.useCallback(async(s,i={})=>{Kt(n.current,$1),n.current&&(typeof s=="number"?await t.navigate(s):await t.navigate(s,{fromRouteId:e,...i}))},[t,e])}var T_={};function G1(t,e,n){!e&&!T_[t]&&(T_[t]=!0,Kt(!1,n))}A.memo(ak);function ak({routes:t,future:e,state:n,onError:r}){return H1(t,void 0,n,r,e)}function lk({to:t,replace:e,state:n,relative:r}){we(Gi(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=A.useContext(Lt);Kt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=A.useContext(cn),{pathname:o}=Kr(),l=Us(),u=Ym(t,Qm(i),o,r==="path"),d=JSON.stringify(u);return A.useEffect(()=>{l(JSON.parse(d),{replace:e,state:n,relative:r})},[l,d,r,e,n]),null}function Ct(t){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function uk({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:s,static:i=!1,unstable_useTransitions:o}){we(!Gi(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=A.useMemo(()=>({basename:l,navigator:s,static:i,unstable_useTransitions:o,future:{}}),[l,s,i,o]);typeof n=="string"&&(n=Hi(n));let{pathname:d="/",search:h="",hash:m="",state:p=null,key:_="default"}=n,I=A.useMemo(()=>{let b=Hn(d,l);return b==null?null:{location:{pathname:b,search:h,hash:m,state:p,key:_},navigationType:r}},[l,d,h,m,p,_,r]);return Kt(I!=null,`<Router basename="${l}"> is not able to match the URL "${d}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:A.createElement(Lt.Provider,{value:u},A.createElement(qa.Provider,{children:e,value:I}))}function I_({children:t,location:e}){return Q2(If(t),e)}function If(t,e=[]){let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,If(r.props.children,i));return}we(r.type===Ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=If(r.props.children,i)),n.push(o)}),n}var cu="get",du="application/x-www-form-urlencoded";function Lc(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function ck(t){return Lc(t)&&t.tagName.toLowerCase()==="button"}function dk(t){return Lc(t)&&t.tagName.toLowerCase()==="form"}function hk(t){return Lc(t)&&t.tagName.toLowerCase()==="input"}function fk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mk(t,e){return t.button===0&&(!e||e==="_self")&&!fk(t)}var Ul=null;function pk(){if(Ul===null)try{new FormData(document.createElement("form"),0),Ul=!1}catch{Ul=!0}return Ul}var gk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lh(t){return t!=null&&!gk.has(t)?(Kt(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${du}"`),null):t}function yk(t,e){let n,r,s,i,o;if(dk(t)){let l=t.getAttribute("action");r=l?Hn(l,e):null,n=t.getAttribute("method")||cu,s=lh(t.getAttribute("enctype"))||du,i=new FormData(t)}else if(ck(t)||hk(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(r=u?Hn(u,e):null,n=t.getAttribute("formmethod")||l.getAttribute("method")||cu,s=lh(t.getAttribute("formenctype"))||lh(l.getAttribute("enctype"))||du,i=new FormData(l,t),!pk()){let{name:d,type:h,value:m}=t;if(h==="image"){let p=d?`${d}.`:"";i.append(`${p}x`,"0"),i.append(`${p}y`,"0")}else d&&i.append(d,m)}}else{if(Lc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=cu,r=null,s=du,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ep(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _k(t,e,n,r){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Hn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function vk(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function wk(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function xk(t,e,n){let r=await Promise.all(t.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await vk(i,n);return o.links?o.links():[]}return[]}));return bk(r.flat(1).filter(wk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function b_(t,e,n,r,s,i){let o=(u,d)=>n[d]?u.route.id!==n[d].route.id:!0,l=(u,d)=>{var h;return n[d].pathname!==u.pathname||((h=n[d].route.path)==null?void 0:h.endsWith("*"))&&n[d].params["*"]!==u.params["*"]};return i==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):i==="data"?e.filter((u,d)=>{var m;let h=r.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((m=n[0])==null?void 0:m.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Ek(t,e,{includeHydrateFallback:n}={}){return Tk(t.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),n&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Tk(t){return[...new Set(t)]}function Ik(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function bk(t,e){let n=new Set;return new Set(e),t.reduce((r,s)=>{let i=JSON.stringify(Ik(s));return n.has(i)||(n.add(i),r.push({key:i,link:s})),r},[])}function K1(){let t=A.useContext(qi);return ep(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Sk(){let t=A.useContext(Mc);return ep(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tp=A.createContext(void 0);tp.displayName="FrameworkContext";function Q1(){let t=A.useContext(tp);return ep(t,"You must render this element inside a <HydratedRouter> element"),t}function kk(t,e){let n=A.useContext(tp),[r,s]=A.useState(!1),[i,o]=A.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:m}=e,p=A.useRef(null);A.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let b=E=>{E.forEach(y=>{o(y.isIntersecting)})},C=new IntersectionObserver(b,{threshold:.5});return p.current&&C.observe(p.current),()=>{C.disconnect()}}},[t]),A.useEffect(()=>{if(r){let b=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(b)}}},[r]);let _=()=>{s(!0)},I=()=>{s(!1),o(!1)};return n?t!=="intent"?[i,p,{}]:[i,p,{onFocus:Co(l,_),onBlur:Co(u,I),onMouseEnter:Co(d,_),onMouseLeave:Co(h,I),onTouchStart:Co(m,_)}]:[!1,p,{}]}function Co(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function Ck({page:t,...e}){let{router:n}=K1(),r=A.useMemo(()=>j1(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?A.createElement(Nk,{page:t,matches:r,...e}):null}function Rk(t){let{manifest:e,routeModules:n}=Q1(),[r,s]=A.useState([]);return A.useEffect(()=>{let i=!1;return xk(t,e,n).then(o=>{i||s(o)}),()=>{i=!0}},[t,e,n]),r}function Nk({page:t,matches:e,...n}){let r=Kr(),{future:s,manifest:i,routeModules:o}=Q1(),{basename:l}=K1(),{loaderData:u,matches:d}=Sk(),h=A.useMemo(()=>b_(t,e,d,i,r,"data"),[t,e,d,i,r]),m=A.useMemo(()=>b_(t,e,d,i,r,"assets"),[t,e,d,i,r]),p=A.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let b=new Set,C=!1;if(e.forEach(y=>{var P;let x=i.routes[y.route.id];!x||!x.hasLoader||(!h.some(M=>M.route.id===y.route.id)&&y.route.id in u&&((P=o[y.route.id])!=null&&P.shouldRevalidate)||x.hasClientLoader?C=!0:b.add(y.route.id))}),b.size===0)return[];let E=_k(t,l,s.unstable_trailingSlashAwareDataRequests,"data");return C&&b.size>0&&E.searchParams.set("_routes",e.filter(y=>b.has(y.route.id)).map(y=>y.route.id).join(",")),[E.pathname+E.search]},[l,s.unstable_trailingSlashAwareDataRequests,u,r,i,h,e,t,o]),_=A.useMemo(()=>Ek(m,i),[m,i]),I=Rk(m);return A.createElement(A.Fragment,null,p.map(b=>A.createElement("link",{key:b,rel:"prefetch",as:"fetch",href:b,...n})),_.map(b=>A.createElement("link",{key:b,rel:"modulepreload",href:b,...n})),I.map(({key:b,link:C})=>A.createElement("link",{key:b,nonce:n.nonce,...C})))}function Ak(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Pk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pk&&(window.__reactRouterVersion="7.12.0")}catch{}function Dk({basename:t,children:e,unstable_useTransitions:n,window:r}){let s=A.useRef();s.current==null&&(s.current=h2({window:r,v5Compat:!0}));let i=s.current,[o,l]=A.useState({action:i.action,location:i.location}),u=A.useCallback(d=>{n===!1?l(d):A.startTransition(()=>l(d))},[n]);return A.useLayoutEffect(()=>i.listen(u),[i,u]),A.createElement(uk,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:i,unstable_useTransitions:n})}var Y1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ft=A.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,..._},I){let{basename:b,unstable_useTransitions:C}=A.useContext(Lt),E=typeof d=="string"&&Y1.test(d),y=V1(d,b);d=y.to;let x=q2(d,{relative:s}),[P,M,F]=kk(r,_),S=Mk(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:m,unstable_defaultShouldRevalidate:p,unstable_useTransitions:C});function w(k){e&&e(k),k.defaultPrevented||S(k)}let T=A.createElement("a",{..._,...F,href:y.absoluteURL||x,onClick:y.isExternal||i?e:w,ref:Ak(I,M),target:u,"data-discover":!E&&n==="render"?"true":void 0});return P&&!E?A.createElement(A.Fragment,null,T,A.createElement(Ck,{page:x})):T});ft.displayName="Link";var X1=A.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:s=!1,style:i,to:o,viewTransition:l,children:u,...d},h){let m=Ga(o,{relative:d.relative}),p=Kr(),_=A.useContext(Mc),{navigator:I,basename:b}=A.useContext(Lt),C=_!=null&&zk(m)&&l===!0,E=I.encodeLocation?I.encodeLocation(m).pathname:m.pathname,y=p.pathname,x=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;n||(y=y.toLowerCase(),x=x?x.toLowerCase():null,E=E.toLowerCase()),x&&b&&(x=Hn(x,b)||x);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let M=y===E||!s&&y.startsWith(E)&&y.charAt(P)==="/",F=x!=null&&(x===E||!s&&x.startsWith(E)&&x.charAt(E.length)==="/"),S={isActive:M,isPending:F,isTransitioning:C},w=M?e:void 0,T;typeof r=="function"?T=r(S):T=[r,M?"active":null,F?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let k=typeof i=="function"?i(S):i;return A.createElement(ft,{...d,"aria-current":w,className:T,ref:h,style:k,to:o,viewTransition:l},typeof u=="function"?u(S):u)});X1.displayName="NavLink";var jk=A.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:s,state:i,method:o=cu,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p,..._},I)=>{let{unstable_useTransitions:b}=A.useContext(Lt),C=Vk(),E=Uk(l,{relative:d}),y=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&Y1.test(l),P=M=>{if(u&&u(M),M.defaultPrevented)return;M.preventDefault();let F=M.nativeEvent.submitter,S=(F==null?void 0:F.getAttribute("formmethod"))||o,w=()=>C(F||M.currentTarget,{fetcherKey:e,method:S,navigate:n,replace:s,state:i,relative:d,preventScrollReset:h,viewTransition:m,unstable_defaultShouldRevalidate:p});b&&n!==!1?A.startTransition(()=>w()):w()};return A.createElement("form",{ref:I,method:y,action:E,onSubmit:r?u:P,..._,"data-discover":!x&&t==="render"?"true":void 0})});jk.displayName="Form";function Ok(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function J1(t){let e=A.useContext(qi);return we(e,Ok(t)),e}function Mk(t,{target:e,replace:n,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l,unstable_useTransitions:u}={}){let d=Us(),h=Kr(),m=Ga(t,{relative:i});return A.useCallback(p=>{if(mk(p,e)){p.preventDefault();let _=n!==void 0?n:ka(h)===ka(m),I=()=>d(t,{replace:_,state:r,preventScrollReset:s,relative:i,viewTransition:o,unstable_defaultShouldRevalidate:l});u?A.startTransition(()=>I()):I()}},[h,d,m,n,r,e,t,s,i,o,l,u])}var Lk=0,Fk=()=>`__${String(++Lk)}__`;function Vk(){let{router:t}=J1("useSubmit"),{basename:e}=A.useContext(Lt),n=sk(),r=t.fetch,s=t.navigate;return A.useCallback(async(i,o={})=>{let{action:l,method:u,encType:d,formData:h,body:m}=yk(i,e);if(o.navigate===!1){let p=o.fetcherKey||Fk();await r(p,n,o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||l,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:m,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,s,e,n])}function Uk(t,{relative:e}={}){let{basename:n}=A.useContext(Lt),r=A.useContext(cn);we(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),i={...Ga(t||".",{relative:e})},o=Kr();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(m=>m).forEach(m=>l.append("index",m));let h=l.toString();i.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(i.pathname=i.pathname==="/"?n:Ln([n,i.pathname])),ka(i)}function zk(t,{relative:e}={}){let n=A.useContext(z1);we(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=J1("useViewTransitionState"),s=Ga(t,{relative:e});if(!n.isTransitioning)return!1;let i=Hn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Hn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Gu(s.pathname,o)!=null||Gu(s.pathname,i)!=null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$k=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),S_=t=>{const e=$k(t);return e.charAt(0).toUpperCase()+e.slice(1)},Z1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),Wk=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=A.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>A.createElement("svg",{ref:u,...Hk,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Z1("lucide",s),...!i&&!Wk(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>A.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=(t,e)=>{const n=A.forwardRef(({className:r,...s},i)=>A.createElement(qk,{ref:i,iconNode:e,className:Z1(`lucide-${Bk(S_(t))}`,`lucide-${t}`,r),...s}));return n.displayName=S_(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Kk=K("arrow-left",Gk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Yk=K("arrow-up-right",Qk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],ex=K("at-sign",Xk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Zk=K("bold",Jk);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],tC=K("building-2",eC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bf=K("calendar",nC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sC=K("chart-column",rC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Sf=K("check-check",iC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],aC=K("check",oC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],uC=K("chevron-left",lC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dC=K("chevron-right",cC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],tx=K("circle-alert",hC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],k_=K("copy",fC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],pC=K("download",mC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],yC=K("ellipsis-vertical",gC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nx=K("eye",_C);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],np=K("facebook",vC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xC=K("file-text",wC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],TC=K("file",EC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],bC=K("folder-open",IC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],C_=K("funnel",SC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Pi=K("image",kC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],Uo=K("inbox",CC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Di=K("instagram",RC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],AC=K("italic",NC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],DC=K("layout-dashboard",PC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],OC=K("link",jC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],Ka=K("linkedin",MC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],FC=K("list",LC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],uh=K("loader-circle",VC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],rx=K("loader",UC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],kf=K("lock",zC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],$C=K("log-out",BC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Fc=K("mail",WC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],qC=K("megaphone",HC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ji=K("message-circle",GC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],QC=K("mouse-pointer",KC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ku=K("plus",YC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Ca=K("reply",XC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ZC=K("save",JC);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eR=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],sx=K("search",eR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tR=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],nR=K("send",tR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rR=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sR=K("settings",rR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iR=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Qu=K("sparkles",iR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oR=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],aR=K("trash-2",oR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lR=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],rp=K("trending-up",lR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uR=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],Qa=K("twitter",uR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cR=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],R_=K("upload",cR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dR=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],hR=K("user",dR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fR=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ix=K("users",fR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mR=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],pR=K("video",mR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gR=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],yR=K("wand-sparkles",gR);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ox=K("x",_R);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vi=K("zap",vR),wR=()=>{};var N_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},xR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},lx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let p=(l&15)<<2|d>>6,_=d&63;u||(_=64,o||(p=64)),r.push(n[h],n[m],n[p],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ax(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):xR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new ER;const p=i<<2|l>>4;if(r.push(p),d!==64){const _=l<<4&240|d>>2;if(r.push(_),m!==64){const I=d<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ER extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TR=function(t){const e=ax(t);return lx.encodeByteArray(e,!0)},Yu=function(t){return TR(t).replace(/\./g,"")},ux=function(t){try{return lx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=()=>IR().__FIREBASE_DEFAULTS__,SR=()=>{if(typeof process>"u"||typeof N_>"u")return;const t=N_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ux(t[1]);return e&&JSON.parse(e)},Vc=()=>{try{return wR()||bR()||SR()||kR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},cx=t=>{var e,n;return(n=(e=Vc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},dx=t=>{const e=cx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},hx=()=>{var t;return(t=Vc())==null?void 0:t.config},fx=t=>{var e;return(e=Vc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function sp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Yu(JSON.stringify(n)),Yu(JSON.stringify(o)),""].join(".")}const na={};function RR(){const t={prod:[],emulator:[]};for(const e of Object.keys(na))na[e]?t.emulator.push(e):t.prod.push(e);return t}function NR(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let A_=!1;function ip(t,e){if(typeof window>"u"||typeof document>"u"||!Qr(window.location.host)||na[t]===e||na[t]||A_)return;na[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",i=RR().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,_){p.setAttribute("width","24"),p.setAttribute("id",_),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{A_=!0,o()},p}function h(p,_){p.setAttribute("id",_),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=NR(r),_=n("text"),I=document.getElementById(_)||document.createElement("span"),b=n("learnmore"),C=document.getElementById(b)||document.createElement("a"),E=n("preprendIcon"),y=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;l(x),h(C,b);const P=d();u(y,E),x.append(y,I,C,P),document.body.appendChild(x)}i?(I.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lt())}function PR(){var e;const t=(e=Vc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function DR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MR(){const t=lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LR(){return!PR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function FR(){try{return typeof indexedDB=="object"}catch{return!1}}function VR(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UR,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?zR(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Sn(s,l,r)}}function zR(t,e){return t.replace(BR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BR=/\{\$([^}]+)}/g;function $R(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ns(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(P_(i)&&P_(o)){if(!Ns(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function P_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Bo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function WR(t,e){const n=new HR(t,e);return n.subscribe.bind(n)}class HR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");qR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ch),s.error===void 0&&(s.error=ch),s.complete===void 0&&(s.complete=ch);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function qR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ch(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t){return t&&t._delegate?t._delegate:t}class Fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new CR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QR(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KR(t){return t===ds?void 0:t}function QR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new GR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const XR={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},JR=ne.INFO,ZR={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},eN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class op{constructor(e){this.name=e,this._logLevel=JR,this._logHandler=eN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const tN=(t,e)=>e.some(n=>t instanceof n);let D_,j_;function nN(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rN(){return j_||(j_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const px=new WeakMap,Cf=new WeakMap,gx=new WeakMap,dh=new WeakMap,ap=new WeakMap;function sN(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&px.set(n,t)}).catch(()=>{}),ap.set(e,t),e}function iN(t){if(Cf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Cf.set(t,e)}let Rf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||gx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oN(t){Rf=t(Rf)}function aN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hh(this),e,...n);return gx.set(r,e.sort?e.sort():[e]),Pr(r)}:rN().includes(t)?function(...e){return t.apply(hh(this),e),Pr(px.get(this))}:function(...e){return Pr(t.apply(hh(this),e))}}function lN(t){return typeof t=="function"?aN(t):(t instanceof IDBTransaction&&iN(t),tN(t,nN())?new Proxy(t,Rf):t)}function Pr(t){if(t instanceof IDBRequest)return sN(t);if(dh.has(t))return dh.get(t);const e=lN(t);return e!==t&&(dh.set(t,e),ap.set(e,t)),e}const hh=t=>ap.get(t);function uN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Pr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Pr(o.result),u.oldVersion,u.newVersion,Pr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const cN=["get","getKey","getAll","getAllKeys","count"],dN=["put","add","delete","clear"],fh=new Map;function O_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=dN.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cN.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return fh.set(e,i),i}oN(t=>({...t,get:(e,n,r)=>O_(e,n)||t.get(e,n,r),has:(e,n)=>!!O_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Nf="@firebase/app",M_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new op("@firebase/app"),mN="@firebase/app-compat",pN="@firebase/analytics-compat",gN="@firebase/analytics",yN="@firebase/app-check-compat",_N="@firebase/app-check",vN="@firebase/auth",wN="@firebase/auth-compat",xN="@firebase/database",EN="@firebase/data-connect",TN="@firebase/database-compat",IN="@firebase/functions",bN="@firebase/functions-compat",SN="@firebase/installations",kN="@firebase/installations-compat",CN="@firebase/messaging",RN="@firebase/messaging-compat",NN="@firebase/performance",AN="@firebase/performance-compat",PN="@firebase/remote-config",DN="@firebase/remote-config-compat",jN="@firebase/storage",ON="@firebase/storage-compat",MN="@firebase/firestore",LN="@firebase/ai",FN="@firebase/firestore-compat",VN="firebase",UN="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af="[DEFAULT]",zN={[Nf]:"fire-core",[mN]:"fire-core-compat",[gN]:"fire-analytics",[pN]:"fire-analytics-compat",[_N]:"fire-app-check",[yN]:"fire-app-check-compat",[vN]:"fire-auth",[wN]:"fire-auth-compat",[xN]:"fire-rtdb",[EN]:"fire-data-connect",[TN]:"fire-rtdb-compat",[IN]:"fire-fn",[bN]:"fire-fn-compat",[SN]:"fire-iid",[kN]:"fire-iid-compat",[CN]:"fire-fcm",[RN]:"fire-fcm-compat",[NN]:"fire-perf",[AN]:"fire-perf-compat",[PN]:"fire-rc",[DN]:"fire-rc-compat",[jN]:"fire-gcs",[ON]:"fire-gcs-compat",[MN]:"fire-fst",[FN]:"fire-fst-compat",[LN]:"fire-vertex","fire-js":"fire-js",[VN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new Map,BN=new Map,Pf=new Map;function L_(t,e){try{t.container.addComponent(e)}catch(n){qn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function As(t){const e=t.name;if(Pf.has(e))return qn.debug(`There were multiple attempts to register component ${e}.`),!1;Pf.set(e,t);for(const n of Xu.values())L_(n,t);for(const n of BN.values())L_(n,t);return!0}function Uc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function wt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dr=new Ya("app","Firebase",$N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=UN;function yx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Af,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Dr.create("bad-app-name",{appName:String(s)});if(n||(n=hx()),!n)throw Dr.create("no-options");const i=Xu.get(s);if(i){if(Ns(n,i.options)&&Ns(r,i.config))return i;throw Dr.create("duplicate-app",{appName:s})}const o=new YR(s);for(const u of Pf.values())o.addComponent(u);const l=new WN(n,r,o);return Xu.set(s,l),l}function lp(t=Af){const e=Xu.get(t);if(!e&&t===Af&&hx())return yx();if(!e)throw Dr.create("no-app",{appName:t});return e}function wn(t,e,n){let r=zN[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qn.warn(o.join(" "));return}As(new Fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebase-heartbeat-database",qN=1,Ra="firebase-heartbeat-store";let mh=null;function _x(){return mh||(mh=uN(HN,qN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ra)}catch(n){console.warn(n)}}}}).catch(t=>{throw Dr.create("idb-open",{originalErrorMessage:t.message})})),mh}async function GN(t){try{const n=(await _x()).transaction(Ra),r=await n.objectStore(Ra).get(vx(t));return await n.done,r}catch(e){if(e instanceof Sn)qn.warn(e.message);else{const n=Dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});qn.warn(n.message)}}}async function F_(t,e){try{const r=(await _x()).transaction(Ra,"readwrite");await r.objectStore(Ra).put(e,vx(t)),await r.done}catch(n){if(n instanceof Sn)qn.warn(n.message);else{const r=Dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});qn.warn(r.message)}}}function vx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=1024,QN=30;class YN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JN(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=V_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>QN){const o=ZN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){qn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=V_(),{heartbeatsToSend:r,unsentEntries:s}=XN(this._heartbeatsCache.heartbeats),i=Yu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return qn.warn(n),""}}}function V_(){return new Date().toISOString().substring(0,10)}function XN(t,e=KN){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),U_(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),U_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return FR()?VR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return F_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function U_(t){return Yu(JSON.stringify({version:2,heartbeats:t})).length}function ZN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){As(new Fr("platform-logger",e=>new hN(e),"PRIVATE")),As(new Fr("heartbeat",e=>new YN(e),"PRIVATE")),wn(Nf,M_,t),wn(Nf,M_,"esm2020"),wn("fire-js","")}eA("");var tA="firebase",nA="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(tA,nA,"app");function wx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rA=wx,xx=new Ya("auth","Firebase",wx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=new op("@firebase/auth");function sA(t,...e){Ju.logLevel<=ne.WARN&&Ju.warn(`Auth (${zs}): ${t}`,...e)}function hu(t,...e){Ju.logLevel<=ne.ERROR&&Ju.error(`Auth (${zs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,...e){throw cp(t,...e)}function on(t,...e){return cp(t,...e)}function up(t,e,n){const r={...rA(),[e]:n};return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return up(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Qt(t,"argument-error"),up(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xx.create(t,...e)}function Q(t,e,...n){if(!t)throw cp(e,...n)}function jn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hu(e),new Error(e)}function Gn(t,e){t||jn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function oA(){return z_()==="http:"||z_()==="https:"}function z_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(oA()||jR()||"connection"in navigator)?navigator.onLine:!0}function lA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=AR()||OR()}get(){return aA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],dA=new Ja(3e4,6e4);function tr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function nr(t,e,n,r,s={}){return Tx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Xa({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return DR()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(d.credentials="include"),Ex.fetch()(await Ix(t,t.config.apiHost,n,l),d)})}async function Tx(t,e,n){t._canInitEmulator=!1;const r={...uA,...e};try{const s=new fA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw zl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw zl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw up(t,h,d);Qt(t,h)}}catch(s){if(s instanceof Sn)throw s;Qt(t,"network-request-failed",{message:String(s)})}}async function Za(t,e,n,r,s={}){const i=await nr(t,e,n,r,s);return"mfaPendingCredential"in i&&Qt(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ix(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?dp(t.config,s):`${t.config.apiScheme}://${s}`;return cA.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function hA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class fA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(on(this.auth,"network-request-failed")),dA.get())})}}function zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=on(t,e,r);return s.customData._tokenResponse=n,s}function B_(t){return t!==void 0&&t.enterprise!==void 0}class mA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return hA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pA(t,e){return nr(t,"GET","/v2/recaptchaConfig",tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t,e){return nr(t,"POST","/v1/accounts:delete",e)}async function Zu(t,e){return nr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function yA(t,e=!1){const n=xe(t),r=await n.getIdToken(e),s=hp(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ra(ph(s.auth_time)),issuedAtTime:ra(ph(s.iat)),expirationTime:ra(ph(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ph(t){return Number(t)*1e3}function hp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=ux(n);return s?JSON.parse(s):(hu("Failed to decode base64 JWT payload"),null)}catch(s){return hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $_(t){const e=hp(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&_A(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _A({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ra(this.lastLoginAt),this.creationTime=ra(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ec(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Na(t,Zu(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(m=s.providerUserInfo)!=null&&m.length?bx(s.providerUserInfo):[],o=xA(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jf(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function wA(t){const e=xe(t);await ec(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function bx(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EA(t,e){const n=await Tx(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Ix(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(u.credentials="include"),Ex.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function TA(t,e){return nr(t,"POST","/v2/accounts:revokeToken",tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=$_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await EA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wi,this.toJSON())}_performRefresh(){return jn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class nn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new vA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Na(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return yA(this,e)}reload(){return wA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ec(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(wt(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await Na(this,gA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:p,isAnonymous:_,providerData:I,stsTokenManager:b}=n;Q(m&&b,e,"internal-error");const C=wi.fromJSON(this.name,b);Q(typeof m=="string",e,"internal-error"),hr(r,e.name),hr(s,e.name),Q(typeof p=="boolean",e,"internal-error"),Q(typeof _=="boolean",e,"internal-error"),hr(i,e.name),hr(o,e.name),hr(l,e.name),hr(u,e.name),hr(d,e.name),hr(h,e.name);const E=new nn({uid:m,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:_,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:C,createdAt:d,lastLoginAt:h});return I&&Array.isArray(I)&&(E.providerData=I.map(y=>({...y}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new wi;s.updateFromServerResponse(n);const i=new nn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ec(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?bx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new wi;l.updateFromIdToken(r);const u=new nn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new jf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_=new Map;function On(t){Gn(t instanceof Function,"Expected a class definition");let e=W_.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,W_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sx.type="NONE";const H_=Sx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t,e,n){return`firebase:${t}:${e}:${n}`}class xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=fu(this.userKey,s.apiKey,i),this.fullPersistenceKey=fu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Zu(this.auth,{idToken:e}).catch(()=>{});return n?nn._fromGetAccountInfoResponse(this.auth,n,e):null}return nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xi(On(H_),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||On(H_);const o=fu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const p=await Zu(e,{idToken:h}).catch(()=>{});if(!p)break;m=await nn._fromGetAccountInfoResponse(e,p,h)}else m=nn._fromJSON(e,h);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new xi(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Nx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Px(e))return"Blackberry";if(Dx(e))return"Webos";if(Cx(e))return"Safari";if((e.includes("chrome/")||Rx(e))&&!e.includes("edge/"))return"Chrome";if(Ax(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kx(t=lt()){return/firefox\//i.test(t)}function Cx(t=lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rx(t=lt()){return/crios\//i.test(t)}function Nx(t=lt()){return/iemobile/i.test(t)}function Ax(t=lt()){return/android/i.test(t)}function Px(t=lt()){return/blackberry/i.test(t)}function Dx(t=lt()){return/webos/i.test(t)}function fp(t=lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IA(t=lt()){var e;return fp(t)&&!!((e=window.navigator)!=null&&e.standalone)}function bA(){return MR()&&document.documentMode===10}function jx(t=lt()){return fp(t)||Ax(t)||Dx(t)||Px(t)||/windows phone/i.test(t)||Nx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e=[]){let n;switch(t){case"Browser":n=q_(lt());break;case"Worker":n=`${q_(lt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${zs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(t,e={}){return nr(t,"GET","/v2/passwordPolicy",tr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=6;class RA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??CA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new G_(this),this.idTokenSubscription=new G_(this),this.beforeStateQueue=new SA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Zu(this,{idToken:e}),r=await nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(wt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ec(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(wt(this.app))return Promise.reject(Fn(this));const n=e?xe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return wt(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return wt(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await kA(this),n=new RA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await TA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ox(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&sA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function rr(t){return xe(t)}class G_{constructor(e){this.auth=e,this.observer=null,this.addObserver=WR(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AA(t){zc=t}function Mx(t){return zc.loadJS(t)}function PA(){return zc.recaptchaEnterpriseScript}function DA(){return zc.gapiScript}function jA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class OA{constructor(){this.enterprise=new MA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class MA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const LA="recaptcha-enterprise",Lx="NO_RECAPTCHA";class FA{constructor(e){this.type=LA,this.auth=rr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{pA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new mA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;B_(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Lx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OA().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&B_(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PA();u.length!==0&&(u+=l),Mx(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function K_(t,e,n,r=!1,s=!1){const i=new FA(t);let o;if(s)o=Lx;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function tc(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await K_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await K_(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(t,e){const n=Uc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ns(i,e??{}))return s;Qt(s,"already-initialized")}return n.initialize({options:e})}function UA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zA(t,e,n){const r=rr(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Fx(e),{host:o,port:l}=BA(e),u=l===null?"":`:${l}`,d={url:`${i}//${o}${u}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Ns(d,r.config.emulator)&&Ns(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Qr(o)?(sp(`${i}//${o}${u}`),ip("Auth",!0)):$A()}function Fx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function BA(t){const e=Fx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Q_(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Q_(o)}}}function Q_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function $A(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return jn("not implemented")}_getIdTokenResponse(e){return jn("not implemented")}_linkToIdToken(e,n){return jn("not implemented")}_getReauthenticationResolver(e){return jn("not implemented")}}async function WA(t,e){return nr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e){return Za(t,"POST","/v1/accounts:signInWithPassword",tr(t,e))}async function qA(t,e){return nr(t,"POST","/v1/accounts:sendOobCode",tr(t,e))}async function GA(t,e){return qA(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KA(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",tr(t,e))}async function QA(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends mp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tc(e,n,"signInWithPassword",HA);case"emailLink":return KA(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return tc(e,r,"signUpPassword",WA);case"emailLink":return QA(e,{idToken:n,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e){return Za(t,"POST","/v1/accounts:signInWithIdp",tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA="http://localhost";class Kn extends mp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Kn(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ei(e,n)}buildRequest(){const e={requestUri:YA,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JA(t){const e=zo(Bo(t)).link,n=e?zo(Bo(e)).deep_link_id:null,r=zo(Bo(t)).deep_link_id;return(r?zo(Bo(r)).link:null)||r||n||e||t}class pp{constructor(e){const n=zo(Bo(e)),r=n.apiKey??null,s=n.oobCode??null,i=XA(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=JA(e);try{return new pp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.providerId=Ki.PROVIDER_ID}static credential(e,n){return Aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pp.parseLink(n);return Q(r,"argument-error"),Aa._fromEmailAndCode(e,r.code,r.tenantId)}}Ki.PROVIDER_ID="password";Ki.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ki.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends gp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xs extends Qi{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Q("providerId"in n&&"signInMethod"in n,"argument-error"),Kn._fromParams(n)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return Q(e.idToken||e.accessToken,"argument-error"),Kn._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return xs.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xs.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:l}=e;if(!r&&!s&&!n&&!i||!l)return null;try{return new xs(l)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn extends Qi{constructor(){super("facebook.com")}static credential(e){return Kn._fromParams({providerId:Nn.PROVIDER_ID,signInMethod:Nn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nn.credentialFromTaggedObject(e)}static credentialFromError(e){return Nn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nn.credential(e.oauthAccessToken)}catch{return null}}}Nn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Qi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kn._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Qi{constructor(){super("github.com")}static credential(e){return Kn._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends Qi{constructor(){super("twitter.com")}static credential(e,n){return Kn._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return An.credential(n,r)}catch{return null}}}An.TWITTER_SIGN_IN_METHOD="twitter.com";An.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZA(t,e){return Za(t,"POST","/v1/accounts:signUp",tr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await nn._fromIdTokenResponse(e,r,s),o=Y_(r);return new Ps({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Y_(r);return new Ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Y_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc extends Sn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nc(e,n,r,s)}}function Vx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nc._fromErrorAndOperation(t,i,e,r):i})}async function eP(t,e,n=!1){const r=await Na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ps._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e,n=!1){const{auth:r}=t;if(wt(r.app))return Promise.reject(Fn(r));const s="reauthenticate";try{const i=await Na(t,Vx(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=hp(i.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),Ps._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t,e,n=!1){if(wt(t.app))return Promise.reject(Fn(t));const r="signIn",s=await Vx(t,r,e),i=await Ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function nP(t,e){return Ux(rr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(t){const e=rr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rP(t,e,n){const r=rr(t);await tc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",GA)}async function sP(t,e,n){if(wt(t.app))return Promise.reject(Fn(t));const r=rr(t),o=await tc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZA).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&zx(t),u}),l=await Ps._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function iP(t,e,n){return wt(t.app)?Promise.reject(Fn(t)):nP(xe(t),Ki.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&zx(t),r})}function oP(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function aP(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}function lP(t,e,n,r){return xe(t).onAuthStateChanged(e,n,r)}function uP(t){return xe(t).signOut()}const rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rc,"1"),this.storage.removeItem(rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP=1e3,dP=10;class $x extends Bx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);bA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dP):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},cP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}$x.type="LOCAL";const hP=$x;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx extends Bx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Wx.type="SESSION";const Hx=Wx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Bc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await fP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=yp("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(p.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function pP(t){xn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function gP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function yP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function _P(){return qx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="firebaseLocalStorageDb",vP=1,sc="firebaseLocalStorage",Kx="fbase_key";class el{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $c(t,e){return t.transaction([sc],e?"readwrite":"readonly").objectStore(sc)}function wP(){const t=indexedDB.deleteDatabase(Gx);return new el(t).toPromise()}function Of(){const t=indexedDB.open(Gx,vP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sc,{keyPath:Kx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sc)?e(r):(r.close(),await wP(),e(await Of()))})})}async function X_(t,e,n){const r=$c(t,!0).put({[Kx]:e,value:n});return new el(r).toPromise()}async function xP(t,e){const n=$c(t,!1).get(e),r=await new el(n).toPromise();return r===void 0?null:r.value}function J_(t,e){const n=$c(t,!0).delete(e);return new el(n).toPromise()}const EP=800,TP=3;class Qx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>TP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return qx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bc._getInstance(_P()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await gP(),!this.activeServiceWorker)return;this.sender=new mP(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||yP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Of();return await X_(e,rc,"1"),await J_(e,rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>X_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>J_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$c(s,!1).getAll();return new el(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qx.type="LOCAL";const IP=Qx;new Ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(t,e){return e?On(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p extends mp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bP(t){return Ux(t.auth,new _p(t),t.bypassAuthState)}function SP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),tP(n,new _p(t),t.bypassAuthState)}async function kP(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),eP(n,new _p(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bP;case"linkViaPopup":case"linkViaRedirect":return kP;case"reauthViaPopup":case"reauthViaRedirect":return SP;default:Qt(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=new Ja(2e3,1e4);async function RP(t,e,n){if(wt(t.app))return Promise.reject(on(t,"operation-not-supported-in-this-environment"));const r=rr(t);iA(t,e,gp);const s=Yx(r,n);return new ys(r,"signInViaPopup",e,s).executeNotNull()}class ys extends Xx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ys.currentPopupAction&&ys.currentPopupAction.cancel(),ys.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=yp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(on(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(on(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ys.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(on(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,CP.get())};e()}}ys.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="pendingRedirect",mu=new Map;class AP extends Xx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=mu.get(this.auth._key());if(!e){try{const r=await PP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}mu.set(this.auth._key(),e)}return this.bypassAuthState||mu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PP(t,e){const n=OP(e),r=jP(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function DP(t,e){mu.set(t._key(),e)}function jP(t){return On(t._redirectPersistence)}function OP(t){return fu(NP,t.config.apiKey,t.name)}async function MP(t,e,n=!1){if(wt(t.app))return Promise.reject(Fn(t));const r=rr(t),s=Yx(r,e),o=await new AP(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=10*60*1e3;class FP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Jx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(on(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Z_(e))}saveEventToCache(e){this.cachedEventUids.add(Z_(e)),this.lastProcessedEventTime=Date.now()}}function Z_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Jx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function VP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(t,e={}){return nr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BP=/^https?/;async function $P(t){if(t.config.emulator)return;const{authorizedDomains:e}=await UP(t);for(const n of e)try{if(WP(n))return}catch{}Qt(t,"unauthorized-domain")}function WP(t){const e=Df(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BP.test(n))return!1;if(zP.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP=new Ja(3e4,6e4);function ev(){const t=xn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function qP(t){return new Promise((e,n)=>{var s,i,o;function r(){ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ev(),n(on(t,"network-request-failed"))},timeout:HP.get()})}if((i=(s=xn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=xn().gapi)!=null&&o.load)r();else{const l=jA("iframefcb");return xn()[l]=()=>{gapi.load?r():n(on(t,"network-request-failed"))},Mx(`${DA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw pu=null,e})}let pu=null;function GP(t){return pu=pu||qP(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=new Ja(5e3,15e3),QP="__/auth/iframe",YP="emulator/auth/iframe",XP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZP(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dp(e,YP):`https://${t.config.authDomain}/${QP}`,r={apiKey:e.apiKey,appName:t.name,v:zs},s=JP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function eD(t){const e=await GP(t),n=xn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:ZP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=on(t,"network-request-failed"),l=xn().setTimeout(()=>{i(o)},KP.get());function u(){xn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nD=500,rD=600,sD="_blank",iD="http://localhost";class tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oD(t,e,n,r=nD,s=rD){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...tD,width:r.toString(),height:s.toString(),top:i,left:o},d=lt().toLowerCase();n&&(l=Rx(d)?sD:n),kx(d)&&(e=e||iD,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[_,I])=>`${p}${_}=${I},`,"");if(IA(d)&&l!=="_self")return aD(e||"",l),new tv(null);const m=window.open(e||"",l,h);Q(m,t,"popup-blocked");try{m.focus()}catch{}return new tv(m)}function aD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD="__/auth/handler",uD="emulator/auth/handler",cD=encodeURIComponent("fac");async function nv(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zs,eventId:s};if(e instanceof gp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$R(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Qi){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${cD}=${encodeURIComponent(u)}`:"";return`${dD(t)}?${Xa(l).slice(1)}${d}`}function dD({config:t}){return t.emulator?dp(t,uD):`https://${t.authDomain}/${lD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="webStorageSupport";class hD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hx,this._completeRedirectFn=MP,this._overrideRedirectResult=DP}async _openPopup(e,n,r,s){var o;Gn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await nv(e,n,r,Df(),s);return oD(e,i,yp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await nv(e,n,r,Df(),s);return pP(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await eD(e),r=new FP(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gh,{type:gh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[gh];i!==void 0&&n(!!i),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$P(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return jx()||Cx()||fp()}}const fD=hD;var rv="@firebase/auth",sv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gD(t){As(new Fr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ox(t)},d=new NA(r,s,i,u);return UA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),As(new Fr("auth-internal",e=>{const n=rr(e.getProvider("auth").getImmediate());return(r=>new mD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(rv,sv,pD(t)),wn(rv,sv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=5*60,_D=fx("authIdTokenMaxAge")||yD;let iv=null;const vD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>_D)return;const s=n==null?void 0:n.token;iv!==s&&(iv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sa(t=lp()){const e=Uc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=VA(t,{popupRedirectResolver:fD,persistence:[IP,hP,Hx]}),r=fx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=vD(i.toString());aP(n,o,()=>o(n.currentUser)),oP(n,l=>o(l))}}const s=cx("auth");return s&&zA(n,`http://${s}`),n}function wD(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}AA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=on("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",wD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gD("Browser");var ov=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Zx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,w){function T(){}T.prototype=w.prototype,S.F=w.prototype,S.prototype=new T,S.prototype.constructor=S,S.D=function(k,N,D){for(var R=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)R[Fe-2]=arguments[Fe];return w.prototype[N].apply(k,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,w,T){T||(T=0);const k=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)k[N]=w.charCodeAt(T++)|w.charCodeAt(T++)<<8|w.charCodeAt(T++)<<16|w.charCodeAt(T++)<<24;else for(N=0;N<16;++N)k[N]=w[T++]|w[T++]<<8|w[T++]<<16|w[T++]<<24;w=S.g[0],T=S.g[1],N=S.g[2];let D=S.g[3],R;R=w+(D^T&(N^D))+k[0]+3614090360&4294967295,w=T+(R<<7&4294967295|R>>>25),R=D+(N^w&(T^N))+k[1]+3905402710&4294967295,D=w+(R<<12&4294967295|R>>>20),R=N+(T^D&(w^T))+k[2]+606105819&4294967295,N=D+(R<<17&4294967295|R>>>15),R=T+(w^N&(D^w))+k[3]+3250441966&4294967295,T=N+(R<<22&4294967295|R>>>10),R=w+(D^T&(N^D))+k[4]+4118548399&4294967295,w=T+(R<<7&4294967295|R>>>25),R=D+(N^w&(T^N))+k[5]+1200080426&4294967295,D=w+(R<<12&4294967295|R>>>20),R=N+(T^D&(w^T))+k[6]+2821735955&4294967295,N=D+(R<<17&4294967295|R>>>15),R=T+(w^N&(D^w))+k[7]+4249261313&4294967295,T=N+(R<<22&4294967295|R>>>10),R=w+(D^T&(N^D))+k[8]+1770035416&4294967295,w=T+(R<<7&4294967295|R>>>25),R=D+(N^w&(T^N))+k[9]+2336552879&4294967295,D=w+(R<<12&4294967295|R>>>20),R=N+(T^D&(w^T))+k[10]+4294925233&4294967295,N=D+(R<<17&4294967295|R>>>15),R=T+(w^N&(D^w))+k[11]+2304563134&4294967295,T=N+(R<<22&4294967295|R>>>10),R=w+(D^T&(N^D))+k[12]+1804603682&4294967295,w=T+(R<<7&4294967295|R>>>25),R=D+(N^w&(T^N))+k[13]+4254626195&4294967295,D=w+(R<<12&4294967295|R>>>20),R=N+(T^D&(w^T))+k[14]+2792965006&4294967295,N=D+(R<<17&4294967295|R>>>15),R=T+(w^N&(D^w))+k[15]+1236535329&4294967295,T=N+(R<<22&4294967295|R>>>10),R=w+(N^D&(T^N))+k[1]+4129170786&4294967295,w=T+(R<<5&4294967295|R>>>27),R=D+(T^N&(w^T))+k[6]+3225465664&4294967295,D=w+(R<<9&4294967295|R>>>23),R=N+(w^T&(D^w))+k[11]+643717713&4294967295,N=D+(R<<14&4294967295|R>>>18),R=T+(D^w&(N^D))+k[0]+3921069994&4294967295,T=N+(R<<20&4294967295|R>>>12),R=w+(N^D&(T^N))+k[5]+3593408605&4294967295,w=T+(R<<5&4294967295|R>>>27),R=D+(T^N&(w^T))+k[10]+38016083&4294967295,D=w+(R<<9&4294967295|R>>>23),R=N+(w^T&(D^w))+k[15]+3634488961&4294967295,N=D+(R<<14&4294967295|R>>>18),R=T+(D^w&(N^D))+k[4]+3889429448&4294967295,T=N+(R<<20&4294967295|R>>>12),R=w+(N^D&(T^N))+k[9]+568446438&4294967295,w=T+(R<<5&4294967295|R>>>27),R=D+(T^N&(w^T))+k[14]+3275163606&4294967295,D=w+(R<<9&4294967295|R>>>23),R=N+(w^T&(D^w))+k[3]+4107603335&4294967295,N=D+(R<<14&4294967295|R>>>18),R=T+(D^w&(N^D))+k[8]+1163531501&4294967295,T=N+(R<<20&4294967295|R>>>12),R=w+(N^D&(T^N))+k[13]+2850285829&4294967295,w=T+(R<<5&4294967295|R>>>27),R=D+(T^N&(w^T))+k[2]+4243563512&4294967295,D=w+(R<<9&4294967295|R>>>23),R=N+(w^T&(D^w))+k[7]+1735328473&4294967295,N=D+(R<<14&4294967295|R>>>18),R=T+(D^w&(N^D))+k[12]+2368359562&4294967295,T=N+(R<<20&4294967295|R>>>12),R=w+(T^N^D)+k[5]+4294588738&4294967295,w=T+(R<<4&4294967295|R>>>28),R=D+(w^T^N)+k[8]+2272392833&4294967295,D=w+(R<<11&4294967295|R>>>21),R=N+(D^w^T)+k[11]+1839030562&4294967295,N=D+(R<<16&4294967295|R>>>16),R=T+(N^D^w)+k[14]+4259657740&4294967295,T=N+(R<<23&4294967295|R>>>9),R=w+(T^N^D)+k[1]+2763975236&4294967295,w=T+(R<<4&4294967295|R>>>28),R=D+(w^T^N)+k[4]+1272893353&4294967295,D=w+(R<<11&4294967295|R>>>21),R=N+(D^w^T)+k[7]+4139469664&4294967295,N=D+(R<<16&4294967295|R>>>16),R=T+(N^D^w)+k[10]+3200236656&4294967295,T=N+(R<<23&4294967295|R>>>9),R=w+(T^N^D)+k[13]+681279174&4294967295,w=T+(R<<4&4294967295|R>>>28),R=D+(w^T^N)+k[0]+3936430074&4294967295,D=w+(R<<11&4294967295|R>>>21),R=N+(D^w^T)+k[3]+3572445317&4294967295,N=D+(R<<16&4294967295|R>>>16),R=T+(N^D^w)+k[6]+76029189&4294967295,T=N+(R<<23&4294967295|R>>>9),R=w+(T^N^D)+k[9]+3654602809&4294967295,w=T+(R<<4&4294967295|R>>>28),R=D+(w^T^N)+k[12]+3873151461&4294967295,D=w+(R<<11&4294967295|R>>>21),R=N+(D^w^T)+k[15]+530742520&4294967295,N=D+(R<<16&4294967295|R>>>16),R=T+(N^D^w)+k[2]+3299628645&4294967295,T=N+(R<<23&4294967295|R>>>9),R=w+(N^(T|~D))+k[0]+4096336452&4294967295,w=T+(R<<6&4294967295|R>>>26),R=D+(T^(w|~N))+k[7]+1126891415&4294967295,D=w+(R<<10&4294967295|R>>>22),R=N+(w^(D|~T))+k[14]+2878612391&4294967295,N=D+(R<<15&4294967295|R>>>17),R=T+(D^(N|~w))+k[5]+4237533241&4294967295,T=N+(R<<21&4294967295|R>>>11),R=w+(N^(T|~D))+k[12]+1700485571&4294967295,w=T+(R<<6&4294967295|R>>>26),R=D+(T^(w|~N))+k[3]+2399980690&4294967295,D=w+(R<<10&4294967295|R>>>22),R=N+(w^(D|~T))+k[10]+4293915773&4294967295,N=D+(R<<15&4294967295|R>>>17),R=T+(D^(N|~w))+k[1]+2240044497&4294967295,T=N+(R<<21&4294967295|R>>>11),R=w+(N^(T|~D))+k[8]+1873313359&4294967295,w=T+(R<<6&4294967295|R>>>26),R=D+(T^(w|~N))+k[15]+4264355552&4294967295,D=w+(R<<10&4294967295|R>>>22),R=N+(w^(D|~T))+k[6]+2734768916&4294967295,N=D+(R<<15&4294967295|R>>>17),R=T+(D^(N|~w))+k[13]+1309151649&4294967295,T=N+(R<<21&4294967295|R>>>11),R=w+(N^(T|~D))+k[4]+4149444226&4294967295,w=T+(R<<6&4294967295|R>>>26),R=D+(T^(w|~N))+k[11]+3174756917&4294967295,D=w+(R<<10&4294967295|R>>>22),R=N+(w^(D|~T))+k[2]+718787259&4294967295,N=D+(R<<15&4294967295|R>>>17),R=T+(D^(N|~w))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+w&4294967295,S.g[1]=S.g[1]+(N+(R<<21&4294967295|R>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.v=function(S,w){w===void 0&&(w=S.length);const T=w-this.blockSize,k=this.C;let N=this.h,D=0;for(;D<w;){if(N==0)for(;D<=T;)s(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<w;)if(k[N++]=S.charCodeAt(D++),N==this.blockSize){s(this,k),N=0;break}}else for(;D<w;)if(k[N++]=S[D++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=w},r.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var w=1;w<S.length-8;++w)S[w]=0;w=this.o*8;for(var T=S.length-8;T<S.length;++T)S[T]=w&255,w/=256;for(this.v(S),S=Array(16),w=0,T=0;T<4;++T)for(let k=0;k<32;k+=8)S[w++]=this.g[T]>>>k&255;return S};function i(S,w){var T=l;return Object.prototype.hasOwnProperty.call(T,S)?T[S]:T[S]=w(S)}function o(S,w){this.h=w;const T=[];let k=!0;for(let N=S.length-1;N>=0;N--){const D=S[N]|0;k&&D==w||(T[N]=D,k=!1)}this.g=T}var l={};function u(S){return-128<=S&&S<128?i(S,function(w){return new o([w|0],w<0?-1:0)}):new o([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return m;if(S<0)return C(d(-S));const w=[];let T=1;for(let k=0;S>=T;k++)w[k]=S/T|0,T*=4294967296;return new o(w,0)}function h(S,w){if(S.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S.charAt(0)=="-")return C(h(S.substring(1),w));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=d(Math.pow(w,8));let k=m;for(let D=0;D<S.length;D+=8){var N=Math.min(8,S.length-D);const R=parseInt(S.substring(D,D+N),w);N<8?(N=d(Math.pow(w,N)),k=k.j(N).add(d(R))):(k=k.j(T),k=k.add(d(R)))}return k}var m=u(0),p=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-C(this).m();let S=0,w=1;for(let T=0;T<this.g.length;T++){const k=this.i(T);S+=(k>=0?k:4294967296+k)*w,w*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I(this))return"0";if(b(this))return"-"+C(this).toString(S);const w=d(Math.pow(S,6));var T=this;let k="";for(;;){const N=P(T,w).g;T=E(T,N.j(w));let D=((T.g.length>0?T.g[0]:T.h)>>>0).toString(S);if(T=N,I(T))return D+k;for(;D.length<6;)D="0"+D;k=D+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function I(S){if(S.h!=0)return!1;for(let w=0;w<S.g.length;w++)if(S.g[w]!=0)return!1;return!0}function b(S){return S.h==-1}t.l=function(S){return S=E(this,S),b(S)?-1:I(S)?0:1};function C(S){const w=S.g.length,T=[];for(let k=0;k<w;k++)T[k]=~S.g[k];return new o(T,~S.h).add(p)}t.abs=function(){return b(this)?C(this):this},t.add=function(S){const w=Math.max(this.g.length,S.g.length),T=[];let k=0;for(let N=0;N<=w;N++){let D=k+(this.i(N)&65535)+(S.i(N)&65535),R=(D>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=R>>>16,D&=65535,R&=65535,T[N]=R<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function E(S,w){return S.add(C(w))}t.j=function(S){if(I(this)||I(S))return m;if(b(this))return b(S)?C(this).j(C(S)):C(C(this).j(S));if(b(S))return C(this.j(C(S)));if(this.l(_)<0&&S.l(_)<0)return d(this.m()*S.m());const w=this.g.length+S.g.length,T=[];for(var k=0;k<2*w;k++)T[k]=0;for(k=0;k<this.g.length;k++)for(let N=0;N<S.g.length;N++){const D=this.i(k)>>>16,R=this.i(k)&65535,Fe=S.i(N)>>>16,Yt=S.i(N)&65535;T[2*k+2*N]+=R*Yt,y(T,2*k+2*N),T[2*k+2*N+1]+=D*Yt,y(T,2*k+2*N+1),T[2*k+2*N+1]+=R*Fe,y(T,2*k+2*N+1),T[2*k+2*N+2]+=D*Fe,y(T,2*k+2*N+2)}for(S=0;S<w;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=w;S<2*w;S++)T[S]=0;return new o(T,0)};function y(S,w){for(;(S[w]&65535)!=S[w];)S[w+1]+=S[w]>>>16,S[w]&=65535,w++}function x(S,w){this.g=S,this.h=w}function P(S,w){if(I(w))throw Error("division by zero");if(I(S))return new x(m,m);if(b(S))return w=P(C(S),w),new x(C(w.g),C(w.h));if(b(w))return w=P(S,C(w)),new x(C(w.g),w.h);if(S.g.length>30){if(b(S)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var T=p,k=w;k.l(S)<=0;)T=M(T),k=M(k);var N=F(T,1),D=F(k,1);for(k=F(k,2),T=F(T,2);!I(k);){var R=D.add(k);R.l(S)<=0&&(N=N.add(T),D=R),k=F(k,1),T=F(T,1)}return w=E(S,N.j(w)),new x(N,w)}for(N=m;S.l(w)>=0;){for(T=Math.max(1,Math.floor(S.m()/w.m())),k=Math.ceil(Math.log(T)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),D=d(T),R=D.j(w);b(R)||R.l(S)>0;)T-=k,D=d(T),R=D.j(w);I(D)&&(D=p),N=N.add(D),S=E(S,R)}return new x(N,S)}t.B=function(S){return P(this,S).h},t.and=function(S){const w=Math.max(this.g.length,S.g.length),T=[];for(let k=0;k<w;k++)T[k]=this.i(k)&S.i(k);return new o(T,this.h&S.h)},t.or=function(S){const w=Math.max(this.g.length,S.g.length),T=[];for(let k=0;k<w;k++)T[k]=this.i(k)|S.i(k);return new o(T,this.h|S.h)},t.xor=function(S){const w=Math.max(this.g.length,S.g.length),T=[];for(let k=0;k<w;k++)T[k]=this.i(k)^S.i(k);return new o(T,this.h^S.h)};function M(S){const w=S.g.length+1,T=[];for(let k=0;k<w;k++)T[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(T,S.h)}function F(S,w){const T=w>>5;w%=32;const k=S.g.length-T,N=[];for(let D=0;D<k;D++)N[D]=w>0?S.i(D+T)>>>w|S.i(D+T+1)<<32-w:S.i(D+T);return new o(N,S.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,jr=o}).apply(typeof ov<"u"?ov:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eE,$o,tE,gu,Mf,nE,rE,sE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var g=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in g))break e;g=g[j]}a=a[a.length-1],v=g[a],f=f(v),f!=v&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var g=[],v;for(v in f)Object.prototype.hasOwnProperty.call(f,v)&&g.push([v,f[v]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function u(a,f,g){return a.call.apply(a.bind,arguments)}function d(a,f,g){return d=u,d.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function m(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(v,j,O){for(var B=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)B[ee-2]=arguments[ee];return f.prototype[j].apply(v,B)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function _(a){const f=a.length;if(f>0){const g=Array(f);for(let v=0;v<f;v++)g[v]=a[v];return g}return[]}function I(a,f){for(let v=1;v<arguments.length;v++){const j=arguments[v];var g=typeof j;if(g=g!="object"?g:j?Array.isArray(j)?"array":g:"null",g=="array"||g=="object"&&typeof j.length=="number"){g=a.length||0;const O=j.length||0;a.length=g+O;for(let B=0;B<O;B++)a[g+B]=j[B]}else a.push(j)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function C(a){o.setTimeout(()=>{throw a},0)}function E(){var a=S;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class y{constructor(){this.h=this.g=null}add(f,g){const v=x.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var x=new b(()=>new P,a=>a.reset());class P{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,S=new y,w=()=>{const a=Promise.resolve(void 0);M=()=>{a.then(T)}};function T(){for(var a;a=E();){try{a.h.call(a.g)}catch(g){C(g)}var f=x;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}F=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function R(a){return/^[\s\xa0]*$/.test(a)}function Fe(a,f){N.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}m(Fe,N),Fe.prototype.init=function(a,f){const g=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Fe.Z.h.call(this)},Fe.prototype.h=function(){Fe.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Yt="closure_listenable_"+(Math.random()*1e6|0),Zr=0;function es(a,f,g,v,j){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=j,this.key=++Zr,this.da=this.fa=!1}function U(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function q(a,f,g){for(const v in a)f.call(g,a[v],v,a)}function X(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function ae(a){const f={};for(const g in a)f[g]=a[g];return f}const Ne="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ts(a,f){let g,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(g in v)a[g]=v[g];for(let O=0;O<Ne.length;O++)g=Ne[O],Object.prototype.hasOwnProperty.call(v,g)&&(a[g]=v[g])}}function Ft(a){this.src=a,this.g={},this.h=0}Ft.prototype.add=function(a,f,g,v,j){const O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);const B=Xt(a,f,v,j);return B>-1?(f=a[B],g||(f.fa=!1)):(f=new es(f,this.src,O,!!v,j),f.fa=g,a.push(f)),f};function ns(a,f){const g=f.type;if(g in a.g){var v=a.g[g],j=Array.prototype.indexOf.call(v,f,void 0),O;(O=j>=0)&&Array.prototype.splice.call(v,j,1),O&&(U(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function Xt(a,f,g,v){for(let j=0;j<a.length;++j){const O=a[j];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==v)return j}return-1}var sr="closure_lm_"+(Math.random()*1e6|0),fd={};function hg(a,f,g,v,j){if(Array.isArray(f)){for(let O=0;O<f.length;O++)hg(a,f[O],g,v,j);return null}return g=pg(g),a&&a[Yt]?a.J(f,g,l(v)?!!v.capture:!1,j):uI(a,f,g,!1,v,j)}function uI(a,f,g,v,j,O){if(!f)throw Error("Invalid event type");const B=l(j)?!!j.capture:!!j;let ee=pd(a);if(ee||(a[sr]=ee=new Ft(a)),g=ee.add(f,g,v,B,O),g.proxy)return g;if(v=cI(),g.proxy=v,v.src=a,v.listener=g,a.addEventListener)D||(j=B),j===void 0&&(j=!1),a.addEventListener(f.toString(),v,j);else if(a.attachEvent)a.attachEvent(mg(f.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function cI(){function a(g){return f.call(a.src,a.listener,g)}const f=dI;return a}function fg(a,f,g,v,j){if(Array.isArray(f))for(var O=0;O<f.length;O++)fg(a,f[O],g,v,j);else v=l(v)?!!v.capture:!!v,g=pg(g),a&&a[Yt]?(a=a.i,O=String(f).toString(),O in a.g&&(f=a.g[O],g=Xt(f,g,v,j),g>-1&&(U(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[O],a.h--)))):a&&(a=pd(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Xt(f,g,v,j)),(g=a>-1?f[a]:null)&&md(g))}function md(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Yt])ns(f.i,a);else{var g=a.type,v=a.proxy;f.removeEventListener?f.removeEventListener(g,v,a.capture):f.detachEvent?f.detachEvent(mg(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=pd(f))?(ns(g,a),g.h==0&&(g.src=null,f[sr]=null)):U(a)}}}function mg(a){return a in fd?fd[a]:fd[a]="on"+a}function dI(a,f){if(a.da)a=!0;else{f=new Fe(f,this);const g=a.listener,v=a.ha||a.src;a.fa&&md(a),a=g.call(v,f)}return a}function pd(a){return a=a[sr],a instanceof Ft?a:null}var gd="__closure_events_fn_"+(Math.random()*1e9>>>0);function pg(a){return typeof a=="function"?a:(a[gd]||(a[gd]=function(f){return a.handleEvent(f)}),a[gd])}function et(){k.call(this),this.i=new Ft(this),this.M=this,this.G=null}m(et,k),et.prototype[Yt]=!0,et.prototype.removeEventListener=function(a,f,g,v){fg(this,a,f,g,v)};function ut(a,f){var g,v=a.G;if(v)for(g=[];v;v=v.G)g.push(v);if(a=a.M,v=f.type||f,typeof f=="string")f=new N(f,a);else if(f instanceof N)f.target=f.target||a;else{var j=f;f=new N(v,a),ts(f,j)}j=!0;let O,B;if(g)for(B=g.length-1;B>=0;B--)O=f.g=g[B],j=dl(O,v,!0,f)&&j;if(O=f.g=a,j=dl(O,v,!0,f)&&j,j=dl(O,v,!1,f)&&j,g)for(B=0;B<g.length;B++)O=f.g=g[B],j=dl(O,v,!1,f)&&j}et.prototype.N=function(){if(et.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let v=0;v<g.length;v++)U(g[v]);delete a.g[f],a.h--}}this.G=null},et.prototype.J=function(a,f,g,v){return this.i.add(String(a),f,!1,g,v)},et.prototype.K=function(a,f,g,v){return this.i.add(String(a),f,!0,g,v)};function dl(a,f,g,v){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let j=!0;for(let O=0;O<f.length;++O){const B=f[O];if(B&&!B.da&&B.capture==g){const ee=B.listener,Ve=B.ha||B.src;B.fa&&ns(a.i,B),j=ee.call(Ve,v)!==!1&&j}}return j&&!v.defaultPrevented}function hI(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function gg(a){a.g=hI(()=>{a.g=null,a.i&&(a.i=!1,gg(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class fI extends k{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:gg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ro(a){k.call(this),this.h=a,this.g={}}m(ro,k);var yg=[];function _g(a){q(a.g,function(f,g){this.g.hasOwnProperty(g)&&md(f)},a),a.g={}}ro.prototype.N=function(){ro.Z.N.call(this),_g(this)},ro.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yd=o.JSON.stringify,mI=o.JSON.parse,pI=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function vg(){}function wg(){}var so={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function _d(){N.call(this,"d")}m(_d,N);function vd(){N.call(this,"c")}m(vd,N);var rs={},xg=null;function hl(){return xg=xg||new et}rs.Ia="serverreachability";function Eg(a){N.call(this,rs.Ia,a)}m(Eg,N);function io(a){const f=hl();ut(f,new Eg(f))}rs.STAT_EVENT="statevent";function Tg(a,f){N.call(this,rs.STAT_EVENT,a),this.stat=f}m(Tg,N);function ct(a){const f=hl();ut(f,new Tg(f,a))}rs.Ja="timingevent";function Ig(a,f){N.call(this,rs.Ja,a),this.size=f}m(Ig,N);function oo(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function ao(){this.g=!0}ao.prototype.ua=function(){this.g=!1};function gI(a,f,g,v,j,O){a.info(function(){if(a.g)if(O){var B="",ee=O.split("&");for(let de=0;de<ee.length;de++){var Ve=ee[de].split("=");if(Ve.length>1){const $e=Ve[0];Ve=Ve[1];const hn=$e.split("_");B=hn.length>=2&&hn[1]=="type"?B+($e+"="+Ve+"&"):B+($e+"=redacted&")}}}else B=null;else B=O;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+f+`
`+g+`
`+B})}function yI(a,f,g,v,j,O,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+f+`
`+g+`
`+O+" "+B})}function Hs(a,f,g,v){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+vI(a,g)+(v?" "+v:"")})}function _I(a,f){a.info(function(){return"TIMEOUT: "+f})}ao.prototype.info=function(){};function vI(a,f){if(!a.g)return f;if(!f)return null;try{const O=JSON.parse(f);if(O){for(a=0;a<O.length;a++)if(Array.isArray(O[a])){var g=O[a];if(!(g.length<2)){var v=g[1];if(Array.isArray(v)&&!(v.length<1)){var j=v[0];if(j!="noop"&&j!="stop"&&j!="close")for(let B=1;B<v.length;B++)v[B]=""}}}}return yd(O)}catch{return f}}var fl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Sg;function wd(){}m(wd,vg),wd.prototype.g=function(){return new XMLHttpRequest},Sg=new wd;function lo(a){return encodeURIComponent(String(a))}function wI(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function ir(a,f,g,v){this.j=a,this.i=f,this.l=g,this.S=v||1,this.V=new ro(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}var Cg={},xd={};function Ed(a,f,g){a.M=1,a.A=pl(dn(f)),a.u=g,a.R=!0,Rg(a,null)}function Rg(a,f){a.F=Date.now(),ml(a),a.B=dn(a.A);var g=a.B,v=a.S;Array.isArray(v)||(v=[String(v)]),Bg(g.i,"t",v),a.C=0,g=a.j.L,a.h=new kg,a.g=oy(a.j,g?f:null,!a.u),a.P>0&&(a.O=new fI(d(a.Y,a,a.g),a.P)),f=a.V,g=a.g,v=a.ba;var j="readystatechange";Array.isArray(j)||(j&&(yg[0]=j.toString()),j=yg);for(let O=0;O<j.length;O++){const B=hg(g,j[O],v||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=a.J?ae(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),io(),gI(a.i,a.v,a.B,a.l,a.S,a.u)}ir.prototype.ba=function(a){a=a.target;const f=this.O;f&&lr(a)==3?f.j():this.Y(a)},ir.prototype.Y=function(a){try{if(a==this.g)e:{const ee=lr(this.g),Ve=this.g.ya(),de=this.g.ca();if(!(ee<3)&&(ee!=3||this.g&&(this.h.h||this.g.la()||Qg(this.g)))){this.K||ee!=4||Ve==7||(Ve==8||de<=0?io(3):io(2)),Td(this);var f=this.g.ca();this.X=f;var g=xI(this);if(this.o=f==200,yI(this.i,this.v,this.B,this.l,this.S,ee,f),this.o){if(this.U&&!this.L){t:{if(this.g){var v,j=this.g;if((v=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(v)){var O=v;break t}}O=null}if(a=O)Hs(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Id(this,a);else{this.o=!1,this.m=3,ct(12),ss(this),uo(this);break e}}if(this.R){a=!0;let $e;for(;!this.K&&this.C<g.length;)if($e=EI(this,g),$e==xd){ee==4&&(this.m=4,ct(14),a=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if($e==Cg){this.m=4,ct(15),Hs(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else Hs(this.i,this.l,$e,null),Id(this,$e);if(Ng(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ee!=4||g.length!=0||this.h.h||(this.m=1,ct(16),a=!1),this.o=this.o&&a,!a)Hs(this.i,this.l,g,"[Invalid Chunked Response]"),ss(this),uo(this);else if(g.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Pd(B),B.P=!0,ct(11))}}else Hs(this.i,this.l,g,null),Id(this,g);ee==4&&ss(this),this.o&&!this.K&&(ee==4?ny(this.j,this):(this.o=!1,ml(this)))}else MI(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),ss(this),uo(this)}}}catch{}finally{}};function xI(a){if(!Ng(a))return a.g.la();const f=Qg(a.g);if(f==="")return"";let g="";const v=f.length,j=lr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ss(a),uo(a),"";a.h.i=new o.TextDecoder}for(let O=0;O<v;O++)a.h.h=!0,g+=a.h.i.decode(f[O],{stream:!(j&&O==v-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function Ng(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function EI(a,f){var g=a.C,v=f.indexOf(`
`,g);return v==-1?xd:(g=Number(f.substring(g,v)),isNaN(g)?Cg:(v+=1,v+g>f.length?xd:(f=f.slice(v,v+g),a.C=v+g,f)))}ir.prototype.cancel=function(){this.K=!0,ss(this)};function ml(a){a.T=Date.now()+a.H,Ag(a,a.H)}function Ag(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=oo(d(a.aa,a),f)}function Td(a){a.D&&(o.clearTimeout(a.D),a.D=null)}ir.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(_I(this.i,this.B),this.M!=2&&(io(),ct(17)),ss(this),this.m=2,uo(this)):Ag(this,this.T-a)};function uo(a){a.j.I==0||a.K||ny(a.j,a)}function ss(a){Td(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,_g(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function Id(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||bd(g.h,a))){if(!a.L&&bd(g.h,a)&&g.I==3){try{var v=g.Ba.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)wl(g),_l(g);else break e;Ad(g),ct(18)}}else g.xa=j[1],0<g.xa-g.K&&j[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=oo(d(g.Va,g),6e3));jg(g.h)<=1&&g.ta&&(g.ta=void 0)}else os(g,11)}else if((a.L||g.g==a)&&wl(g),!R(f))for(j=g.Ba.g.parse(f),f=0;f<j.length;f++){let de=j[f];const $e=de[0];if(!($e<=g.K))if(g.K=$e,de=de[1],g.I==2)if(de[0]=="c"){g.M=de[1],g.ba=de[2];const hn=de[3];hn!=null&&(g.ka=hn,g.j.info("VER="+g.ka));const as=de[4];as!=null&&(g.za=as,g.j.info("SVER="+g.za));const ur=de[5];ur!=null&&typeof ur=="number"&&ur>0&&(v=1.5*ur,g.O=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const cr=a.g;if(cr){const El=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(El){var O=v.h;O.g||El.indexOf("spdy")==-1&&El.indexOf("quic")==-1&&El.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Sd(O,O.h),O.h=null))}if(v.G){const Dd=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Dd&&(v.wa=Dd,me(v.J,v.G,Dd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),v=g;var B=a;if(v.na=iy(v,v.L?v.ba:null,v.W),B.L){Og(v.h,B);var ee=B,Ve=v.O;Ve&&(ee.H=Ve),ee.D&&(Td(ee),ml(ee)),v.g=B}else ey(v);g.i.length>0&&vl(g)}else de[0]!="stop"&&de[0]!="close"||os(g,7);else g.I==3&&(de[0]=="stop"||de[0]=="close"?de[0]=="stop"?os(g,7):Nd(g):de[0]!="noop"&&g.l&&g.l.qa(de),g.A=0)}}io(4)}catch{}}var TI=class{constructor(a,f){this.g=a,this.map=f}};function Pg(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Dg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jg(a){return a.h?1:a.g?a.g.size:0}function bd(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Sd(a,f){a.g?a.g.add(f):a.h=f}function Og(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}Pg.prototype.cancel=function(){if(this.i=Mg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Mg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return _(a.i)}var Lg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function II(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const v=a[g].indexOf("=");let j,O=null;v>=0?(j=a[g].substring(0,v),O=a[g].substring(v+1)):j=a[g],f(j,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function or(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof or?(this.l=a.l,co(this,a.j),this.o=a.o,this.g=a.g,ho(this,a.u),this.h=a.h,kd(this,$g(a.i)),this.m=a.m):a&&(f=String(a).match(Lg))?(this.l=!1,co(this,f[1]||"",!0),this.o=fo(f[2]||""),this.g=fo(f[3]||"",!0),ho(this,f[4]),this.h=fo(f[5]||"",!0),kd(this,f[6]||"",!0),this.m=fo(f[7]||"")):(this.l=!1,this.i=new po(null,this.l))}or.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(mo(f,Fg,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(mo(f,Fg,!0),"@"),a.push(lo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(mo(g,g.charAt(0)=="/"?kI:SI,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",mo(g,RI)),a.join("")},or.prototype.resolve=function(a){const f=dn(this);let g=!!a.j;g?co(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var v=a.h;if(g)ho(f,a.u);else if(g=!!a.h){if(v.charAt(0)!="/")if(this.g&&!this.h)v="/"+v;else{var j=f.h.lastIndexOf("/");j!=-1&&(v=f.h.slice(0,j+1)+v)}if(j=v,j==".."||j==".")v="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){v=j.lastIndexOf("/",0)==0,j=j.split("/");const O=[];for(let B=0;B<j.length;){const ee=j[B++];ee=="."?v&&B==j.length&&O.push(""):ee==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),v&&B==j.length&&O.push("")):(O.push(ee),v=!0)}v=O.join("/")}else v=j}return g?f.h=v:g=a.i.toString()!=="",g?kd(f,$g(a.i)):g=!!a.m,g&&(f.m=a.m),f};function dn(a){return new or(a)}function co(a,f,g){a.j=g?fo(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function ho(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function kd(a,f,g){f instanceof po?(a.i=f,NI(a.i,a.l)):(g||(f=mo(f,CI)),a.i=new po(f,a.l))}function me(a,f,g){a.i.set(f,g)}function pl(a){return me(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function fo(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function mo(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,bI),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function bI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Fg=/[#\/\?@]/g,SI=/[#\?:]/g,kI=/[#\?]/g,CI=/[#\?@]/g,RI=/#/g;function po(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function is(a){a.g||(a.g=new Map,a.h=0,a.i&&II(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=po.prototype,t.add=function(a,f){is(this),this.i=null,a=qs(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function Vg(a,f){is(a),f=qs(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Ug(a,f){return is(a),f=qs(a,f),a.g.has(f)}t.forEach=function(a,f){is(this),this.g.forEach(function(g,v){g.forEach(function(j){a.call(f,j,v,this)},this)},this)};function zg(a,f){is(a);let g=[];if(typeof f=="string")Ug(a,f)&&(g=g.concat(a.g.get(qs(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return is(this),this.i=null,a=qs(this,a),Ug(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=zg(this,a),a.length>0?String(a[0]):f):f};function Bg(a,f,g){Vg(a,f),g.length>0&&(a.i=null,a.g.set(qs(a,f),_(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let v=0;v<f.length;v++){var g=f[v];const j=lo(g);g=zg(this,g);for(let O=0;O<g.length;O++){let B=j;g[O]!==""&&(B+="="+lo(g[O])),a.push(B)}}return this.i=a.join("&")};function $g(a){const f=new po;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function qs(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function NI(a,f){f&&!a.j&&(is(a),a.i=null,a.g.forEach(function(g,v){const j=v.toLowerCase();v!=j&&(Vg(this,v),Bg(this,j,g))},a)),a.j=f}function AI(a,f){const g=new ao;if(o.Image){const v=new Image;v.onload=h(ar,g,"TestLoadImage: loaded",!0,f,v),v.onerror=h(ar,g,"TestLoadImage: error",!1,f,v),v.onabort=h(ar,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=h(ar,g,"TestLoadImage: timeout",!1,f,v),o.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else f(!1)}function PI(a,f){const g=new ao,v=new AbortController,j=setTimeout(()=>{v.abort(),ar(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:v.signal}).then(O=>{clearTimeout(j),O.ok?ar(g,"TestPingServer: ok",!0,f):ar(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(j),ar(g,"TestPingServer: error",!1,f)})}function ar(a,f,g,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(g)}catch{}}function DI(){this.g=new pI}function Cd(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Cd,vg),Cd.prototype.g=function(){return new gl(this.i,this.h)};function gl(a,f){et.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(gl,et),t=gl.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,yo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Wg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Wg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?go(this):yo(this),this.readyState==3&&Wg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,go(this))},t.Na=function(a){this.g&&(this.response=a,go(this))},t.ga=function(){this.g&&go(this)};function go(a){a.readyState=4,a.l=null,a.j=null,a.B=null,yo(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function yo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Hg(a){let f="";return q(a,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function Rd(a,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=Hg(g),typeof a=="string"?g!=null&&lo(g):me(a,f,g))}function ke(a){et.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ke,et);var jI=/^https?$/i,OI=["POST","PUT"];t=ke.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Sg.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(O){qg(this,O);return}if(a=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)g.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const O of v.keys())g.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),j=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(OI,f,void 0)>=0)||v||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of g)this.g.setRequestHeader(O,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(O){qg(this,O)}};function qg(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,Gg(a),yl(a)}function Gg(a){a.A||(a.A=!0,ut(a,"complete"),ut(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,ut(this,"complete"),ut(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Kg(this):this.Xa())},t.Xa=function(){Kg(this)};function Kg(a){if(a.h&&typeof i<"u"){if(a.v&&lr(a)==4)setTimeout(a.Ca.bind(a),0);else if(ut(a,"readystatechange"),lr(a)==4){a.h=!1;try{const O=a.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=O===0){let B=String(a.D).match(Lg)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),v=!jI.test(B?B.toLowerCase():"")}g=v}if(g)ut(a,"complete"),ut(a,"success");else{a.o=6;try{var j=lr(a)>2?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.ca()+"]",Gg(a)}}finally{yl(a)}}}}function yl(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||ut(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function lr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),mI(f)}};function Qg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function MI(a){const f={};a=(a.g&&lr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(R(a[v]))continue;var g=wI(a[v]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=f[j]||[];f[j]=O,O.push(g)}X(f,function(v){return v.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function _o(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Yg(a){this.za=0,this.i=[],this.j=new ao,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=_o("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=_o("baseRetryDelayMs",5e3,a),this.Za=_o("retryDelaySeedMs",1e4,a),this.Ta=_o("forwardChannelMaxRetries",2,a),this.va=_o("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Pg(a&&a.concurrentRequestLimit),this.Ba=new DI,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Yg.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,v){ct(0),this.W=a,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.J=iy(this,null,this.W),vl(this)};function Nd(a){if(Xg(a),a.I==3){var f=a.V++,g=dn(a.J);if(me(g,"SID",a.M),me(g,"RID",f),me(g,"TYPE","terminate"),vo(a,g),f=new ir(a,a.j,f),f.M=2,f.A=pl(dn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=oy(f.j,null),f.g.ea(f.A)),f.F=Date.now(),ml(f)}sy(a)}function _l(a){a.g&&(Pd(a),a.g.cancel(),a.g=null)}function Xg(a){_l(a),a.v&&(o.clearTimeout(a.v),a.v=null),wl(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function vl(a){if(!Dg(a.h)&&!a.m){a.m=!0;var f=a.Ea;M||w(),F||(M(),F=!0),S.add(f,a),a.D=0}}function LI(a,f){return jg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=oo(d(a.Ea,a,f),ry(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const j=new ir(this,this.j,a);let O=this.o;if(this.U&&(O?(O=ae(O),ts(O,this.U)):O=this.U),this.u!==null||this.R||(j.J=O,O=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Zg(this,j,f),g=dn(this.J),me(g,"RID",a),me(g,"CVER",22),this.G&&me(g,"X-HTTP-Session-Id",this.G),vo(this,g),O&&(this.R?f="headers="+lo(Hg(O))+"&"+f:this.u&&Rd(g,this.u,O)),Sd(this.h,j),this.Ra&&me(g,"TYPE","init"),this.S?(me(g,"$req",f),me(g,"SID","null"),j.U=!0,Ed(j,g,null)):Ed(j,g,f),this.I=2}}else this.I==3&&(a?Jg(this,a):this.i.length==0||Dg(this.h)||Jg(this))};function Jg(a,f){var g;f?g=f.l:g=a.V++;const v=dn(a.J);me(v,"SID",a.M),me(v,"RID",g),me(v,"AID",a.K),vo(a,v),a.u&&a.o&&Rd(v,a.u,a.o),g=new ir(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Zg(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Sd(a.h,g),Ed(g,v,f)}function vo(a,f){a.H&&q(a.H,function(g,v){me(f,v,g)}),a.l&&q({},function(g,v){me(f,v,g)})}function Zg(a,f,g){g=Math.min(a.i.length,g);const v=a.l?d(a.l.Ka,a.l,a):null;e:{var j=a.i;let ee=-1;for(;;){const Ve=["count="+g];ee==-1?g>0?(ee=j[0].g,Ve.push("ofs="+ee)):ee=0:Ve.push("ofs="+ee);let de=!0;for(let $e=0;$e<g;$e++){var O=j[$e].g;const hn=j[$e].map;if(O-=ee,O<0)ee=Math.max(0,j[$e].g-100),de=!1;else try{O="req"+O+"_"||"";try{var B=hn instanceof Map?hn:Object.entries(hn);for(const[as,ur]of B){let cr=ur;l(ur)&&(cr=yd(ur)),Ve.push(O+as+"="+encodeURIComponent(cr))}}catch(as){throw Ve.push(O+"type="+encodeURIComponent("_badmap")),as}}catch{v&&v(hn)}}if(de){B=Ve.join("&");break e}}B=void 0}return a=a.i.splice(0,g),f.G=a,B}function ey(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;M||w(),F||(M(),F=!0),S.add(f,a),a.A=0}}function Ad(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=oo(d(a.Da,a),ry(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,ty(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=oo(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),_l(this),ty(this))};function Pd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function ty(a){a.g=new ir(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=dn(a.na);me(f,"RID","rpc"),me(f,"SID",a.M),me(f,"AID",a.K),me(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&me(f,"TO",a.ia),me(f,"TYPE","xmlhttp"),vo(a,f),a.u&&a.o&&Rd(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=pl(dn(f)),g.u=null,g.R=!0,Rg(g,a)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),Ad(this),ct(19))};function wl(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function ny(a,f){var g=null;if(a.g==f){wl(a),Pd(a),a.g=null;var v=2}else if(bd(a.h,f))g=f.G,Og(a.h,f),v=1;else return;if(a.I!=0){if(f.o)if(v==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var j=a.D;v=hl(),ut(v,new Ig(v,g)),vl(a)}else ey(a);else if(j=f.m,j==3||j==0&&f.X>0||!(v==1&&LI(a,f)||v==2&&Ad(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),j){case 1:os(a,5);break;case 4:os(a,10);break;case 3:os(a,6);break;default:os(a,2)}}}function ry(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function os(a,f){if(a.j.info("Error code "+f),f==2){var g=d(a.bb,a),v=a.Ua;const j=!v;v=new or(v||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||co(v,"https"),pl(v),j?AI(v.toString(),g):PI(v.toString(),g)}else ct(2);a.I=0,a.l&&a.l.pa(f),sy(a),Xg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function sy(a){if(a.I=0,a.ja=[],a.l){const f=Mg(a.h);(f.length!=0||a.i.length!=0)&&(I(a.ja,f),I(a.ja,a.i),a.h.i.length=0,_(a.i),a.i.length=0),a.l.oa()}}function iy(a,f,g){var v=g instanceof or?dn(g):new or(g);if(v.g!="")f&&(v.g=f+"."+v.g),ho(v,v.u);else{var j=o.location;v=j.protocol,f=f?f+"."+j.hostname:j.hostname,j=+j.port;const O=new or(null);v&&co(O,v),f&&(O.g=f),j&&ho(O,j),g&&(O.h=g),v=O}return g=a.G,f=a.wa,g&&f&&me(v,g,f),me(v,"VER",a.ka),vo(a,v),v}function oy(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new ke(new Cd({ab:g})):new ke(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ay(){}t=ay.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function xl(){}xl.prototype.g=function(a,f){return new kt(a,f)};function kt(a,f){et.call(this),this.g=new Yg(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!R(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Gs(this)}m(kt,et),kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kt.prototype.close=function(){Nd(this.g)},kt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=yd(a),a=g);f.i.push(new TI(f.Ya++,a)),f.I==3&&vl(f)},kt.prototype.N=function(){this.g.l=null,delete this.j,Nd(this.g),delete this.g,kt.Z.N.call(this)};function ly(a){_d.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}m(ly,_d);function uy(){vd.call(this),this.status=1}m(uy,vd);function Gs(a){this.g=a}m(Gs,ay),Gs.prototype.ra=function(){ut(this.g,"a")},Gs.prototype.qa=function(a){ut(this.g,new ly(a))},Gs.prototype.pa=function(a){ut(this.g,new uy)},Gs.prototype.oa=function(){ut(this.g,"b")},xl.prototype.createWebChannel=xl.prototype.g,kt.prototype.send=kt.prototype.o,kt.prototype.open=kt.prototype.m,kt.prototype.close=kt.prototype.close,sE=function(){return new xl},rE=function(){return hl()},nE=rs,Mf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,gu=fl,bg.COMPLETE="complete",tE=bg,wg.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",et.prototype.listen=et.prototype.J,$o=wg,ke.prototype.listenOnce=ke.prototype.K,ke.prototype.getLastError=ke.prototype.Ha,ke.prototype.getLastErrorCode=ke.prototype.ya,ke.prototype.getStatus=ke.prototype.ca,ke.prototype.getResponseJson=ke.prototype.La,ke.prototype.getResponseText=ke.prototype.la,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Fa,eE=ke}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="12.8.0";function xD(t){Yi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new op("@firebase/firestore");function Xs(){return Ds.logLevel}function W(t,...e){if(Ds.logLevel<=ne.DEBUG){const n=e.map(vp);Ds.debug(`Firestore (${Yi}): ${t}`,...n)}}function Qn(t,...e){if(Ds.logLevel<=ne.ERROR){const n=e.map(vp);Ds.error(`Firestore (${Yi}): ${t}`,...n)}}function Oi(t,...e){if(Ds.logLevel<=ne.WARN){const n=e.map(vp);Ds.warn(`Firestore (${Yi}): ${t}`,...n)}}function vp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iE(t,r,n)}function iE(t,e,n){let r=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Qn(r),new Error(r)}function le(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iE(e,s,r)}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ED{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}}class TD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ID{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Vn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new oE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new st(e)}}class bD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SD{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new bD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){le(this.o===void 0,3512);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new av(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=CD(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Lf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return yh(s)===yh(i)?re(s,i):yh(s)?1:-1}return re(t.length,e.length)}const RD=55296,ND=57343;function yh(t){const e=t.charCodeAt(0);return e>=RD&&e<=ND}function Mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lv="__name__";class pn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=pn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=pn.isNumericId(e),s=pn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?pn.extractNumericId(e).compare(pn.extractNumericId(n)):Lf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class he extends pn{construct(e,n,r){return new he(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new he(n)}static emptyPath(){return new he([])}}const AD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ye extends pn{construct(e,n,r){return new Ye(e,n,r)}static isValidIdentifier(e){return AD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ye.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lv}static keyField(){return new Ye([lv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ye(n)}static emptyPath(){return new Ye([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(he.fromString(e))}static fromName(e){return new G(he.fromString(e).popFirst(5))}static empty(){return new G(he.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&he.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return he.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new he(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function PD(t,e,n,r){if(e===!0&&r===!0)throw new $(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function uv(t){if(!G.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cv(t){if(G.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Wc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function St(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wc(t);throw new $(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t,e){const n={typeString:t};return e&&(n.value=e),n}function tl(t,e){if(!lE(t))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv=-62135596800,hv=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*hv);return new ge(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<dv)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hv}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tl(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:Me("string",ge._jsonSchemaVersion),seconds:Me("number"),nanoseconds:Me("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{static fromTimestamp(e){return new J(e)}static min(){return new J(new ge(0,0))}static max(){return new J(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=-1;function DD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new ge(n+1,0):new ge(n,r));return new Vr(s,G.empty(),e)}function jD(t){return new Vr(t.readTime,t.key,Pa)}class Vr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Vr(J.min(),G.empty(),Pa)}static max(){return new Vr(J.max(),G.empty(),Pa)}}function OD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xi(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==MD)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function FD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ji(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp=-1;function qc(t){return t==null}function ic(t){return t===0&&1/t==-1/0}function VD(t){return typeof t=="number"&&Number.isInteger(t)&&!ic(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="";function UD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fv(e)),e=zD(t.get(n),e);return fv(e)}function zD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case uE:n+="";break;default:n+=i}}return n}function fv(t){return t+uE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Qe.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $l(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $l(this.root,e,this.comparator,!1)}getReverseIterator(){return new $l(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $l(this.root,e,this.comparator,!0)}}class $l{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qe.RED,this.left=s??Qe.EMPTY,this.right=i??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new pv(this.data.getIterator())}getIteratorFrom(e){return new pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.fields=e,e.sort(Ye.comparator)}static empty(){return new At([])}unionWith(e){let n=new Be(Ye.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new At(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dE("Invalid base64 string: "+i):i}}(e);return new Ze(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ze(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ze.EMPTY_BYTE_STRING=new Ze("");const BD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(le(!!t,39018),typeof t=="string"){let e=0;const n=BD.exec(t);if(le(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(t.seconds),nanos:Ae(t.nanos)}}function Ae(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function zr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",fE="__type__",mE="__previous_value__",pE="__local_write_time__";function Ep(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fE])==null?void 0:r.stringValue)===hE}function Gc(t){const e=t.mapValue.fields[mE];return Ep(e)?Gc(e):e}function Da(t){const e=Ur(t.mapValue.fields[pE].timestampValue);return new ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,n,r,s,i,o,l,u,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}}const oc="(default)";class ja{constructor(e,n){this.projectId=e,this.database=n||oc}static empty(){return new ja("","")}get isDefaultDatabase(){return this.database===oc}isEqual(e){return e instanceof ja&&e.projectId===this.projectId&&e.database===this.database}}function WD(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ja(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",HD="__max__",Wl={mapValue:{}},yE="__vector__",ac="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ep(t)?4:GD(t)?9007199254740991:qD(t)?10:11:Y(28295,{value:t})}function bn(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ur(s.timestampValue),l=Ur(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return zr(s.bytesValue).isEqual(zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?ic(o)===ic(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Mi(t.arrayValue.values||[],e.arrayValue.values||[],bn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(mv(o)!==mv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!bn(o[u],l[u])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Oa(t,e){return(t.values||[]).find(n=>bn(n,e))!==void 0}function Li(t,e){if(t===e)return 0;const n=Br(t),r=Br(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),u=Ae(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return gv(t.timestampValue,e.timestampValue);case 4:return gv(Da(t),Da(e));case 5:return Lf(t.stringValue,e.stringValue);case 6:return function(i,o){const l=zr(i),u=zr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=re(l[d],u[d]);if(h!==0)return h}return re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=re(Ae(i.latitude),Ae(o.latitude));return l!==0?l:re(Ae(i.longitude),Ae(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return yv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var p,_,I,b;const l=i.fields||{},u=o.fields||{},d=(p=l[ac])==null?void 0:p.arrayValue,h=(_=u[ac])==null?void 0:_.arrayValue,m=re(((I=d==null?void 0:d.values)==null?void 0:I.length)||0,((b=h==null?void 0:h.values)==null?void 0:b.length)||0);return m!==0?m:yv(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Lf(u[m],h[m]);if(p!==0)return p;const _=Li(l[u[m]],d[h[m]]);if(_!==0)return _}return re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function gv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Ur(t),r=Ur(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function yv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Li(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function Fi(t){return Ff(t)}function Ff(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ff(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ff(n.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function yu(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gc(t);return e?16+yu(e):16;case 5:return 2*t.stringValue.length;case 6:return zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+yu(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Yr(r.fields,(i,o)=>{s+=i.length+yu(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function _v(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vf(t){return!!t&&"integerValue"in t}function Tp(t){return!!t&&"arrayValue"in t}function vv(t){return!!t&&"nullValue"in t}function wv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _u(t){return!!t&&"mapValue"in t}function qD(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gE])==null?void 0:r.stringValue)===yE}function ia(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ia(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ia(t.arrayValue.values[n]);return e}return{...t}}function GD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!_u(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ia(n)}setAll(e){let n=Ye.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=ia(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());_u(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];_u(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Yr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(ia(this.value))}}function _E(t){const e=[];return Yr(t.fields,(n,r)=>{const s=new Ye([n]);if(_u(r)){const i=_E(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new At(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ot(e,0,J.min(),J.min(),J.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,J.min(),J.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,J.min(),J.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.position=e,this.inclusive=n}}function xv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=Li(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function KD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{}class Oe extends vE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YD(e,n,r):n==="array-contains"?new ZD(e,r):n==="in"?new e4(e,r):n==="not-in"?new t4(e,r):n==="array-contains-any"?new n4(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new XD(e,r):new JD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Li(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Li(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends vE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new un(e,n)}matches(e){return wE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wE(t){return t.op==="and"}function xE(t){return QD(t)&&wE(t)}function QD(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function Uf(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+Fi(t.value);if(xE(t))return t.filters.map(e=>Uf(e)).join(",");{const e=t.filters.map(n=>Uf(n)).join(",");return`${t.op}(${e})`}}function EE(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&bn(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&EE(o,s.filters[l]),!0):!1}(t,e):void Y(19439)}function TE(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${Fi(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(TE).join(" ,")+"}"}(t):"Filter"}class YD extends Oe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class XD extends Oe{constructor(e,n){super(e,"in",n),this.keys=IE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class JD extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=IE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class ZD extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tp(n)&&Oa(n.arrayValue,this.value)}}class e4 extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oa(this.value.arrayValue,n)}}class t4 extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oa(this.value.arrayValue,n)}}class n4 extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function Tv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new r4(t,e,n,r,s,i,o)}function Ip(t){const e=Z(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Fi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Fi(r)).join(",")),e.Te=n}return e.Te}function bp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!KD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ev(t.startAt,e.startAt)&&Ev(t.endAt,e.endAt)}function zf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function s4(t,e,n,r,s,i,o,l){return new Zi(t,e,n,r,s,i,o,l)}function Kc(t){return new Zi(t)}function Iv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function i4(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bE(t){return t.collectionGroup!==null}function oa(t){const e=Z(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Be(Ye.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Ma(i,r))}),n.has(Ye.keyField().canonicalString())||e.Ie.push(new Ma(Ye.keyField(),r))}return e.Ie}function En(t){const e=Z(t);return e.Ee||(e.Ee=o4(e,oa(t))),e.Ee}function o4(t,e){if(t.limitType==="F")return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ma(s.field,i)});const n=t.endAt?new lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lc(t.startAt.position,t.startAt.inclusive):null;return Tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Bf(t,e){const n=t.filters.concat([e]);return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function a4(t,e){const n=t.explicitOrderBy.concat([e]);return new Zi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function $f(t,e,n){return new Zi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qc(t,e){return bp(En(t),En(e))&&t.limitType===e.limitType}function SE(t){return`${Ip(En(t))}|lt:${t.limitType}`}function Js(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TE(s)).join(", ")}]`),qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Fi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Fi(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function Yc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=xv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,oa(r),s)||r.endAt&&!function(o,l,u){const d=xv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,oa(r),s))}(t,e)}function l4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kE(t){return(e,n)=>{let r=!1;for(const s of oa(t)){const i=u4(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function u4(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Li(u,d):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4=new be(G.comparator);function Yn(){return c4}const CE=new be(G.comparator);function Wo(...t){let e=CE;for(const n of t)e=e.insert(n.key,n);return e}function RE(t){let e=CE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function _s(){return aa()}function NE(){return aa()}function aa(){return new Bs(t=>t.toString(),(t,e)=>t.isEqual(e))}const d4=new be(G.comparator),h4=new Be(G.comparator);function se(...t){let e=h4;for(const n of t)e=e.add(n);return e}const f4=new Be(re);function m4(){return f4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ic(e)?"-0":e}}function AE(t){return{integerValue:""+t}}function p4(t,e){return VD(e)?AE(e):Sp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function g4(t,e,n){return t instanceof La?function(s,i){const o={fields:{[fE]:{stringValue:hE},[pE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ep(i)&&(i=Gc(i)),i&&(o.fields[mE]=i),{mapValue:o}}(n,e):t instanceof Fa?DE(t,e):t instanceof Va?jE(t,e):function(s,i){const o=PE(s,i),l=bv(o)+bv(s.Ae);return Vf(o)&&Vf(s.Ae)?AE(l):Sp(s.serializer,l)}(t,e)}function y4(t,e,n){return t instanceof Fa?DE(t,e):t instanceof Va?jE(t,e):n}function PE(t,e){return t instanceof uc?function(r){return Vf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class La extends Xc{}class Fa extends Xc{constructor(e){super(),this.elements=e}}function DE(t,e){const n=OE(e);for(const r of t.elements)n.some(s=>bn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Xc{constructor(e){super(),this.elements=e}}function jE(t,e){let n=OE(e);for(const r of t.elements)n=n.filter(s=>!bn(s,r));return{arrayValue:{values:n}}}class uc extends Xc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function bv(t){return Ae(t.integerValue||t.doubleValue)}function OE(t){return Tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,n){this.field=e,this.transform=n}}function v4(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fa&&s instanceof Fa||r instanceof Va&&s instanceof Va?Mi(r.elements,s.elements,bn):r instanceof uc&&s instanceof uc?bn(r.Ae,s.Ae):r instanceof La&&s instanceof La}(t.transform,e.transform)}class w4{constructor(e,n){this.version=e,this.transformResults=n}}class Wt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wt}static exists(e){return new Wt(void 0,e)}static updateTime(e){return new Wt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jc{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new kp(t.key,Wt.none()):new nl(t.key,t.data,Wt.none());{const n=t.data,r=xt.empty();let s=new Be(Ye.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Xr(t.key,r,new At(s.toArray()),Wt.none())}}function x4(t,e,n){t instanceof nl?function(s,i,o){const l=s.value.clone(),u=kv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Xr?function(s,i,o){if(!vu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=kv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(LE(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function la(t,e,n,r){return t instanceof nl?function(i,o,l,u){if(!vu(i.precondition,o))return l;const d=i.value.clone(),h=Cv(i.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xr?function(i,o,l,u){if(!vu(i.precondition,o))return l;const d=Cv(i.fieldTransforms,u,o),h=o.data;return h.setAll(LE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return vu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function E4(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=PE(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function Sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mi(r,s,(i,o)=>v4(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class nl extends Jc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xr extends Jc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function kv(t,e,n){const r=new Map;le(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,y4(o,l,n[s]))}return r}function Cv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,g4(i,o,e))}return r}class kp extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class T4 extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&x4(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=la(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=NE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=ME(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Mi(this.mutations,e.mutations,(n,r)=>Sv(n,r))&&Mi(this.baseMutations,e.baseMutations,(n,r)=>Sv(n,r))}}class Cp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return d4}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Cp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,ie;function k4(t){switch(t){case L.OK:return Y(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function FE(t){if(t===void 0)return Qn("GRPC error has no .code"),L.UNKNOWN;switch(t){case De.OK:return L.OK;case De.CANCELLED:return L.CANCELLED;case De.UNKNOWN:return L.UNKNOWN;case De.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case De.INTERNAL:return L.INTERNAL;case De.UNAVAILABLE:return L.UNAVAILABLE;case De.UNAUTHENTICATED:return L.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case De.NOT_FOUND:return L.NOT_FOUND;case De.ALREADY_EXISTS:return L.ALREADY_EXISTS;case De.PERMISSION_DENIED:return L.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case De.ABORTED:return L.ABORTED;case De.OUT_OF_RANGE:return L.OUT_OF_RANGE;case De.UNIMPLEMENTED:return L.UNIMPLEMENTED;case De.DATA_LOSS:return L.DATA_LOSS;default:return Y(39323,{code:t})}}(ie=De||(De={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=new jr([4294967295,4294967295],0);function Rv(t){const e=C4().encode(t),n=new Zx;return n.update(e),new Uint8Array(n.digest())}function Nv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jr([n,r],0),new jr([s,i],0)]}class Rp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ho(`Invalid padding: ${n}`);if(r<0)throw new Ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ho(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(jr.fromNumber(r)));return s.compare(R4)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Rv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Rp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Rv(e),[r,s]=Nv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zc(J.min(),s,new be(re),Yn(),se())}}class rl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new rl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class VE{constructor(e,n){this.targetId=e,this.Ce=n}}class UE{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Av{constructor(){this.ve=0,this.Fe=Pv(),this.Me=Ze.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new rl(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Pv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,le(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class N4{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.He=Hl(),this.Je=Hl(),this.Ze=new be(re)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(zf(i))if(r===0){const o=new G(i.path);this.et(n,o,ot.newNoDocument(o,J.min()))}else le(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=zr(r).toUint8Array()}catch(u){if(u instanceof dE)return Oi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Rp(o,s,i)}catch(u){return Oi(u instanceof Ho?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&zf(l.target)){const u=new G(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,ot.newNoDocument(u,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=se();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Zc(e,n,this.Ze,this.je,r);return this.je=Yn(),this.He=Hl(),this.Je=Hl(),this.Ze=new be(re),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Av,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Be(re),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Be(re),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Av),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Hl(){return new be(G.comparator)}function Pv(){return new be(G.comparator)}const A4={asc:"ASCENDING",desc:"DESCENDING"},P4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},D4={and:"AND",or:"OR"};class j4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Wf(t,e){return t.useProto3Json||qc(e)?e:{value:e}}function cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function O4(t,e){return cc(t,e.toTimestamp())}function Tn(t){return le(!!t,49232),J.fromTimestamp(function(n){const r=Ur(n);return new ge(r.seconds,r.nanos)}(t))}function Np(t,e){return Hf(t,e).canonicalString()}function Hf(t,e){const n=function(s){return new he(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function BE(t){const e=he.fromString(t);return le(GE(e),10190,{key:e.toString()}),e}function qf(t,e){return Np(t.databaseId,e.path)}function _h(t,e){const n=BE(e);if(n.get(1)!==t.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(WE(n))}function $E(t,e){return Np(t.databaseId,e)}function M4(t){const e=BE(t);return e.length===4?he.emptyPath():WE(e)}function Gf(t){return new he(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WE(t){return le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Dv(t,e,n){return{name:qf(t,e),fields:n.value.mapValue.fields}}function L4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(le(h===void 0||typeof h=="string",58123),Ze.fromBase64String(h||"")):(le(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ze.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?L.UNKNOWN:FE(d.code);return new $(h,d.message||"")}(o);n=new UE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=_h(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):J.min(),l=new xt({mapValue:{fields:r.document.fields}}),u=ot.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new wu(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=_h(t,r.document),i=r.readTime?Tn(r.readTime):J.min(),o=ot.newNoDocument(s,i),l=r.removedTargetIds||[];n=new wu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=_h(t,r.document),i=r.removedTargetIds||[];n=new wu([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new S4(s,i),l=r.targetId;n=new VE(l,o)}}return n}function F4(t,e){let n;if(e instanceof nl)n={update:Dv(t,e.key,e.value)};else if(e instanceof kp)n={delete:qf(t,e.key)};else if(e instanceof Xr)n={update:Dv(t,e.key,e.data),updateMask:G4(e.fieldMask)};else{if(!(e instanceof T4))return Y(16599,{dt:e.type});n={verify:qf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof La)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:O4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function V4(t,e){return t&&t.length>0?(le(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Tn(s.updateTime):Tn(i);return o.isEqual(J.min())&&(o=Tn(i)),new w4(o,s.transformResults||[])}(n,e))):[]}function U4(t,e){return{documents:[$E(t,e.path)]}}function z4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$E(t,s);const i=function(d){if(d.length!==0)return qE(un.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Zs(p.field),direction:W4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Wf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function B4(t){let e=M4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(m){const p=HE(m);return p instanceof un&&xE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(I){return new Ma(ei(I.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,qc(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,_=m.values||[];return new lc(_,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,_=m.values||[];return new lc(_,p)}(n.endAt)),s4(e,s,o,i,l,"F",u,d)}function $4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function HE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ei(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ei(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ei(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ei(n.unaryFilter.field);return Oe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(ei(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>HE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function W4(t){return A4[t]}function H4(t){return P4[t]}function q4(t){return D4[t]}function Zs(t){return{fieldPath:t.canonicalString()}}function ei(t){return Ye.fromServerFormat(t.fieldPath)}function qE(t){return t instanceof Oe?function(n){if(n.op==="=="){if(wv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NAN"}};if(vv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NAN"}};if(vv(n.value))return{unaryFilter:{field:Zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(n.field),op:H4(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>qE(s));return r.length===1?r[0]:{compositeFilter:{op:q4(n.op),filters:r}}}(t):Y(54877,{filter:t})}function G4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function KE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n,r,s,i=J.min(),o=J.min(),l=Ze.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(e){this.yt=e}}function Q4(t){const e=B4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?$f(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(){this.Sn=new X4}addToCollectionParentIndex(e,n){return this.Sn.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Vr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Vr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class X4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Be(he.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Be(he.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QE=41943040;class yt{static withCacheSize(e){return new yt(e,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(QE,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Vi(0)}static ar(){return new Vi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="LruGarbageCollector",J4=1048576;function Mv([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class Z4{constructor(e){this.Pr=e,this.buffer=new Be(Mv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class e6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){W(Ov,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ji(n)?W(Ov,"Ignoring IndexedDB error during garbage collection: ",n):await Xi(n)}await this.Ar(3e5)})}}class t6{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Hc.ce);const r=new Z4(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(jv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Xs()<=ne.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function n6(t,e){return new t6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r6{constructor(){this.changes=new Bs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&la(r.mutation,s,At.empty(),ge.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=_s();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Wo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=_s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Yn();const o=aa(),l=function(){return aa()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Xr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),la(h.mutation,d,h.mutation.getFieldMask(),ge.now())):o.set(d.key,At.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new s6(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=aa();let s=new be((o,l)=>o-l),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||At.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(s.get(l.batchId)||se()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=NE();h.forEach(p=>{if(!i.has(p)){const _=ME(n.get(p),r.get(p));_!==null&&m.set(p,_),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return i4(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(_s());let l=Pa,u=i;return o.next(d=>V.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?V.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,se())).next(h=>({batchId:l,changes:RE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Wo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Wo();return this.indexManager.getCollectionParents(e,i).next(l=>V.forEach(l,u=>{const d=function(m,p){return new Zi(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,ot.newInvalidDocument(h)))});let l=Wo();return o.forEach((u,d)=>{const h=i.get(u);h!==void 0&&la(h.mutation,d,At.empty(),ge.now()),Yc(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o6{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return V.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:Q4(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(){this.overlays=new be(G.comparator),this.Lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=_s();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=_s(),i=n.length+1,o=new G(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=_s(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=_s(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return V.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new b4(n,r));let i=this.Lr.get(n);i===void 0&&(i=se(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.sessionToken=Ze.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(){this.kr=new Be(We.Kr),this.qr=new Be(We.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new We(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new We(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new G(new he([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new he([])),r=new We(n,e),s=new We(n,e+1);let i=se();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Be(We.Kr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new I4(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?xp:this.Yn-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(re);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),V.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new We(new G(i),0);let l=new Be(re);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},o),V.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return V.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new We(n,0),s=this.Jr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.ti=e,this.docs=function(){return new be(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const o=n.path,l=new G(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||OD(jD(h),r)<=0||(s.has(h.key)||Yc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}ni(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new d6(this)}getSize(e){return V.resolve(this.size)}}class d6 extends r6{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h6{constructor(e){this.persistence=e,this.ri=new Bs(n=>Ip(n),bp),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.ii=0,this.si=new Ap,this.targetCount=0,this.oi=Vi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),V.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.lr(n),V.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this._i={},this.overlays={},this.ai=new Hc(0),this.ui=!1,this.ui=!0,this.ci=new l6,this.referenceDelegate=e(this),this.li=new h6(this),this.indexManager=new Y4,this.remoteDocumentCache=function(s){return new c6(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new K4(n),this.Pi=new o6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new a6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new u6(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new f6(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return V.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class f6 extends LD{constructor(e){super(),this.currentSequenceNumber=e}}class Pp{constructor(e){this.persistence=e,this.Ri=new Ap,this.Ai=null}static Vi(e){return new Pp(e)}get di(){if(this.Ai)return this.Ai;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),V.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.di,r=>{const s=G.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class dc{constructor(e,n){this.persistence=e,this.fi=new Bs(r=>UD(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=n6(this,n)}static Vi(e,n){return new dc(e,n)}Ti(){}Ii(e){return V.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return V.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?V.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,J.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),V.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yu(e.data.value)),n}wr(e,n,r){return V.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return LR()?8:FD(lt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new m6;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Xs()<=ne.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),V.resolve()):(Xs()<=ne.DEBUG&&W("QueryEngine","Query:",Js(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Xs()<=ne.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):V.resolve())}gs(e,n){if(Iv(n))return V.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=$f(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.bs(n,l);return this.Ss(n,d,o,u.readTime)?this.gs(e,$f(n,null,"F")):this.Ds(e,d,n,u)}))})))}ps(e,n,r,s){return Iv(n)||s.isEqual(J.min())?V.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?V.resolve(null):(Xs()<=ne.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Js(n)),this.Ds(e,o,n,DD(s,Pa)).next(l=>l))})}bs(e,n){let r=new Be(kE(e));return n.forEach((s,i)=>{Yc(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Xs()<=ne.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Js(n)),this.fs.getDocumentsMatchingQuery(e,n,Vr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="LocalStore",g6=3e8;class y6{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new be(re),this.Fs=new Bs(i=>Ip(i),bp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i6(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function _6(t,e,n,r){return new y6(t,e,n,r)}async function XE(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=se();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function v6(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let _=V.resolve();return p.forEach(I=>{_=_.next(()=>h.getEntry(u,I)).next(b=>{const C=d.docVersions.get(I);le(C!==null,48541),b.version.compareTo(C)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=se();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function JE(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function w6(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;l.push(n.li.removeMatchingKeys(i,h.removedDocuments,m).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,m)));let _=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(Ze.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),s=s.insert(m,_),function(b,C,E){return b.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=g6?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,_,h)&&l.push(n.li.updateTargetData(i,_))});let u=Yn(),d=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(x6(i,o,e.documentUpdates).next(h=>{u=h.Bs,d=h.Ls})),!r.isEqual(J.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(m=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return V.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.vs=s,i))}function x6(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Yn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W(jp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Bs:o,Ls:s}})}function E6(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=xp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T6(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Kf(t,e,n){const r=Z(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ji(o))throw o;W(jp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Lv(t,e,n){const r=Z(t);let s=J.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=Z(u),p=m.Fs.get(h);return p!==void 0?V.resolve(m.vs.get(p)):m.li.getTargetData(d,h)}(r,o,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:se())).next(l=>(I6(r,l4(e),l),{documents:l,ks:i})))}function I6(t,e,n){let r=t.Ms.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Fv{constructor(){this.activeTargetIds=m4()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class b6{constructor(){this.vo=new Fv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Fv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="ConnectivityMonitor";class Uv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){W(Vv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){W(Vv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql=null;function Qf(){return ql===null?ql=function(){return 268435456+Math.round(2147483648*Math.random())}():ql++,"0x"+ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="RestConnection",k6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class C6{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===oc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Qf(),l=this.Qo(e,n.toUriEncodedString());W(vh,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(l),h=Qr(d);return this.zo(e,l,u,r,h).then(m=>(W(vh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Oi(vh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=k6[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rt="WebChannelConnection",Ro=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Ti extends C6{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ti.c_){const e=rE();Ro(e,nE.STAT_EVENT,n=>{n.stat===Mf.PROXY?W(rt,"STAT_EVENT: detected buffering proxy"):n.stat===Mf.NOPROXY&&W(rt,"STAT_EVENT: detected no buffering proxy")}),Ti.c_=!0}}zo(e,n,r,s,i){const o=Qf();return new Promise((l,u)=>{const d=new eE;d.setWithCredentials(!0),d.listenOnce(tE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case gu.NO_ERROR:const m=d.getResponseJson();W(rt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case gu.TIMEOUT:W(rt,`RPC '${e}' ${o} timed out`),u(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const p=d.getStatus();if(W(rt,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let _=d.getResponseJson();Array.isArray(_)&&(_=_[0]);const I=_==null?void 0:_.error;if(I&&I.status&&I.message){const b=function(E){const y=E.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(y)>=0?y:L.UNKNOWN}(I.status);u(new $(b,I.message))}else u(new $(L.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new $(L.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{W(rt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);W(rt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Qf(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");W(rt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let m=!1,p=!1;const _=new R6({Ho:I=>{p?W(rt,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(m||(W(rt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),W(rt,`RPC '${e}' stream ${s} sending:`,I),h.send(I))},Jo:()=>h.close()});return Ro(h,$o.EventType.OPEN,()=>{p||(W(rt,`RPC '${e}' stream ${s} transport opened.`),_.i_())}),Ro(h,$o.EventType.CLOSE,()=>{p||(p=!0,W(rt,`RPC '${e}' stream ${s} transport closed`),_.o_(),this.E_(h))}),Ro(h,$o.EventType.ERROR,I=>{p||(p=!0,Oi(rt,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),_.o_(new $(L.UNAVAILABLE,"The operation could not be completed")))}),Ro(h,$o.EventType.MESSAGE,I=>{var b;if(!p){const C=I.data[0];le(!!C,16349);const E=C,y=(E==null?void 0:E.error)||((b=E[0])==null?void 0:b.error);if(y){W(rt,`RPC '${e}' stream ${s} received error:`,y);const x=y.status;let P=function(S){const w=De[S];if(w!==void 0)return FE(w)}(x),M=y.message;P===void 0&&(P=L.INTERNAL,M="Unknown error status: "+x+" with message "+y.message),p=!0,_.o_(new $(P,M)),h.close()}else W(rt,`RPC '${e}' stream ${s} received:`,C),_.__(C)}}),Ti.u_(),setTimeout(()=>{_.s_()},0),_}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6(t){return new Ti(t)}function wh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new j4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.c_=!1;class ZE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="PersistentStream";class eT{constructor(e,n,r,s,i,o,l,u){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new $(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(zv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(W(zv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class A6 extends eT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=L4(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?Tn(o.readTime):J.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Gf(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=zf(u)?{documents:U4(i,u)}:{query:z4(i,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=zE(i,o.resumeToken);const d=Wf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=cc(i,o.snapshotVersion.toTimestamp());const d=Wf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=$4(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Gf(this.serializer),n.removeTarget=e,this.K_(n)}}class P6 extends eT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=V4(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Gf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>F4(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{}class j6 extends D6{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,Hf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(L.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Hf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function O6(t,e,n,r){return new j6(t,e,n,r)}class M6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Qn(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class L6{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{$s(this)&&(W(js,"Restarting streams for network reachability change."),await async function(u){const d=Z(u);d.Ea.add(4),await sl(d),d.Va.set("Unknown"),d.Ea.delete(4),await td(d)}(this))})}),this.Va=new M6(r,s)}}async function td(t){if($s(t))for(const e of t.Ra)await e(!0)}async function sl(t){for(const e of t.Ra)await e(!1)}function tT(t,e){const n=Z(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fp(n)?Lp(n):eo(n).O_()&&Mp(n,e))}function Op(t,e){const n=Z(t),r=eo(n);n.Ia.delete(e),r.O_()&&nT(n,e),n.Ia.size===0&&(r.O_()?r.L_():$s(n)&&n.Va.set("Unknown"))}function Mp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}eo(t).Z_(e)}function nT(t,e){t.da.$e(e),eo(t).X_(e)}function Lp(t){t.da=new N4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),eo(t).start(),t.Va.ua()}function Fp(t){return $s(t)&&!eo(t).x_()&&t.Ia.size>0}function $s(t){return Z(t).Ea.size===0}function rT(t){t.da=void 0}async function F6(t){t.Va.set("Online")}async function V6(t){t.Ia.forEach((e,n)=>{Mp(t,e)})}async function U6(t,e){rT(t),Fp(t)?(t.Va.ha(e),Lp(t)):t.Va.set("Unknown")}async function z6(t,e,n){if(t.Va.set("Online"),e instanceof UE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){W(js,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hc(t,r)}else if(e instanceof wu?t.da.Xe(e):e instanceof VE?t.da.st(e):t.da.tt(e),!n.isEqual(J.min()))try{const r=await JE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(Ze.EMPTY_BYTE_STRING,h.snapshotVersion)),nT(i,u);const m=new Tr(h.target,u,d,h.sequenceNumber);Mp(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W(js,"Failed to raise snapshot:",r),await hc(t,r)}}async function hc(t,e,n){if(!Ji(e))throw e;t.Ea.add(1),await sl(t),t.Va.set("Offline"),n||(n=()=>JE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(js,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await td(t)})}function sT(t,e){return e().catch(n=>hc(t,n,e))}async function nd(t){const e=Z(t),n=$r(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:xp;for(;B6(e);)try{const s=await E6(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,$6(e,s)}catch(s){await hc(e,s)}iT(e)&&oT(e)}function B6(t){return $s(t)&&t.Ta.length<10}function $6(t,e){t.Ta.push(e);const n=$r(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function iT(t){return $s(t)&&!$r(t).x_()&&t.Ta.length>0}function oT(t){$r(t).start()}async function W6(t){$r(t).ra()}async function H6(t){const e=$r(t);for(const n of t.Ta)e.ea(n.mutations)}async function q6(t,e,n){const r=t.Ta.shift(),s=Cp.from(r,e,n);await sT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nd(t)}async function G6(t,e){e&&$r(t).Y_&&await async function(r,s){if(function(o){return k4(o)&&o!==L.ABORTED}(s.code)){const i=r.Ta.shift();$r(r).B_(),await sT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nd(r)}}(t,e),iT(t)&&oT(t)}async function Bv(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),W(js,"RemoteStore received new credentials");const r=$s(n);n.Ea.add(3),await sl(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await td(n)}async function K6(t,e){const n=Z(t);e?(n.Ea.delete(2),await td(n)):e||(n.Ea.add(2),await sl(n),n.Va.set("Unknown"))}function eo(t){return t.ma||(t.ma=function(n,r,s){const i=Z(n);return i.sa(),new A6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:F6.bind(null,t),Yo:V6.bind(null,t),t_:U6.bind(null,t),J_:z6.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Fp(t)?Lp(t):t.Va.set("Unknown")):(await t.ma.stop(),rT(t))})),t.ma}function $r(t){return t.fa||(t.fa=function(n,r,s){const i=Z(n);return i.sa(),new P6(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:W6.bind(null,t),t_:G6.bind(null,t),ta:H6.bind(null,t),na:q6.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await nd(t)):(await t.fa.stop(),t.Ta.length>0&&(W(js,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Vp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),Ji(t))return new $(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{static emptySet(e){return new Ii(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Wo(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.ga=new be(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ui(e,n,Ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Y6{constructor(){this.queries=Wv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=Wv(),i.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function Wv(){return new Bs(t=>SE(t),Qc)}async function zp(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new Q6,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Up(o,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&$p(n)}async function Bp(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function X6(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&$p(n)}function J6(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function $p(t){t.Ca.forEach(e=>{e.next()})}var Yf,Hv;(Hv=Yf||(Yf={})).Ma="default",Hv.Cache="cache";class Wp{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e){this.key=e}}class lT{constructor(e){this.key=e}}class Z6{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=se(),this.mutatedKeys=se(),this.eu=kE(e),this.tu=new Ii(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new $v,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),_=Yc(this.query,m)?m:null,I=!!p&&this.mutatedKeys.has(p.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let C=!1;p&&_?p.data.isEqual(_.data)?I!==b&&(r.track({type:3,doc:_}),C=!0):this.su(p,_)||(r.track({type:2,doc:_}),C=!0,(u&&this.eu(_,u)>0||d&&this.eu(_,d)<0)&&(l=!0)):!p&&_?(r.track({type:0,doc:_}),C=!0):p&&!_&&(r.track({type:1,doc:p}),C=!0,(u||d)&&(l=!0)),C&&(_?(o=o.add(_),i=b?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(_,I){const b=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Vt:C})}};return b(_)-b(I)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,o.length!==0||d?{snapshot:new Ui(this.query,e.tu,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $v,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new lT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new aT(r))}),n}cu(e){this.Za=e.ks,this.Ya=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ui.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Hp="SyncEngine";class e3{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class t3{constructor(e){this.key=e,this.hu=!1}}class n3{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Bs(l=>SE(l),Qc),this.Iu=new Map,this.Eu=new Set,this.Ru=new be(G.comparator),this.Au=new Map,this.Vu=new Ap,this.du={},this.mu=new Map,this.fu=Vi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function r3(t,e,n=!0){const r=mT(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await uT(r,e,n,!0),s}async function s3(t,e){const n=mT(t);await uT(n,e,!0,!1)}async function uT(t,e,n,r){const s=await T6(t.localStore,En(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await i3(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tT(t.remoteStore,s),l}async function i3(t,e,n,r,s){t.pu=(m,p,_)=>async function(b,C,E,y){let x=C.view.ru(E);x.Ss&&(x=await Lv(b.localStore,C.query,!1).then(({documents:S})=>C.view.ru(S,x)));const P=y&&y.targetChanges.get(C.targetId),M=y&&y.targetMismatches.get(C.targetId)!=null,F=C.view.applyChanges(x,b.isPrimaryClient,P,M);return Gv(b,C.targetId,F.au),F.snapshot}(t,m,p,_);const i=await Lv(t.localStore,e,!0),o=new Z6(e,i.ks),l=o.ru(i.documents),u=rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);Gv(t,n,d.au);const h=new e3(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function o3(t,e,n){const r=Z(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Qc(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Op(r.remoteStore,s.targetId),Xf(r,s.targetId)}).catch(Xi)):(Xf(r,s.targetId),await Kf(r.localStore,s.targetId,!0))}async function a3(t,e){const n=Z(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Op(n.remoteStore,r.targetId))}async function l3(t,e,n){const r=p3(t);try{const s=await function(o,l){const u=Z(o),d=ge.now(),h=l.reduce((_,I)=>_.add(I.key),se());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=Yn(),b=se();return u.xs.getEntries(_,h).next(C=>{I=C,I.forEach((E,y)=>{y.isValidDocument()||(b=b.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,I)).next(C=>{m=C;const E=[];for(const y of l){const x=E4(y,m.get(y.key).overlayedDocument);x!=null&&E.push(new Xr(y.key,x,_E(x.value.mapValue),Wt.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,E,l)}).next(C=>{p=C;const E=C.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(_,C.batchId,E)})}).then(()=>({batchId:p.batchId,changes:RE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.du[o.currentUser.toKey()];d||(d=new be(re)),d=d.insert(l,u),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await il(r,s.changes),await nd(r.remoteStore)}catch(s){const i=Up(s,"Failed to persist write");n.reject(i)}}async function cT(t,e){const n=Z(t);try{const r=await w6(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?le(o.hu,14607):s.removedDocuments.size>0&&(le(o.hu,42227),o.hu=!1))}),await il(n,r,e)}catch(r){await Xi(r)}}function qv(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Z(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.ba)p.va(l)&&(d=!0)}),d&&$p(u)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function u3(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new be(G.comparator);o=o.insert(i,ot.newNoDocument(i,J.min()));const l=se().add(i),u=new Zc(J.min(),new Map,new be(re),o,l);await cT(r,u),r.Ru=r.Ru.remove(i),r.Au.delete(e),qp(r)}else await Kf(r.localStore,e,!1).then(()=>Xf(r,e,n)).catch(Xi)}async function c3(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await v6(n.localStore,e);hT(n,r,null),dT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await il(n,s)}catch(s){await Xi(s)}}async function d3(t,e,n){const r=Z(t);try{const s=await function(o,l){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(le(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);hT(r,e,n),dT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await il(r,s)}catch(s){await Xi(s)}}function dT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function hT(t,e,n){const r=Z(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Xf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||fT(t,r)})}function fT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Op(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),qp(t))}function Gv(t,e,n){for(const r of n)r instanceof aT?(t.Vu.addReference(r.key,e),h3(t,r)):r instanceof lT?(W(Hp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||fT(t,r.key)):Y(19791,{wu:r})}function h3(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(W(Hp,"New document in limbo: "+n),t.Eu.add(r),qp(t))}function qp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(he.fromString(e)),r=t.fu.next();t.Au.set(r,new t3(n)),t.Ru=t.Ru.insert(n,r),tT(t.remoteStore,new Tr(En(Kc(n.path)),r,"TargetPurposeLimboResolution",Hc.ce))}}async function il(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Dp.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(u,d){const h=Z(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(d,p=>V.forEach(p.Ts,_=>h.persistence.referenceDelegate.addReference(m,p.targetId,_)).next(()=>V.forEach(p.Is,_=>h.persistence.referenceDelegate.removeReference(m,p.targetId,_)))))}catch(m){if(!Ji(m))throw m;W(jp,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const _=h.vs.get(p),I=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(I);h.vs=h.vs.insert(p,b)}}}(r.localStore,i))}async function f3(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){W(Hp,"User change. New user:",e.toKey());const r=await XE(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new $(L.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await il(n,r.Ns)}}function m3(t,e){const n=Z(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let s=se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function mT(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=u3.bind(null,e),e.Pu.J_=X6.bind(null,e.eventManager),e.Pu.yu=J6.bind(null,e.eventManager),e}function p3(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=c3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=d3.bind(null,e),e}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _6(this.persistence,new p6,e.initialUser,this.serializer)}Cu(e){return new YE(Pp.Vi,this.serializer)}Du(e){return new b6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class g3 extends fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){le(this.persistence.referenceDelegate instanceof dc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new e6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yt.withCacheSize(this.cacheSizeBytes):yt.DEFAULT;return new YE(r=>dc.Vi(r,n),this.serializer)}}class Jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=f3.bind(null,this.syncEngine),await K6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Y6}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),r=N6(e.databaseInfo);return O6(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new L6(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>qv(this.syncEngine,n,0),function(){return Uv.v()?new Uv:new S6}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,h){const m=new n3(s,i,o,l,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);W(js,"RemoteStore shutting down."),i.Ea.add(5),await sl(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Jf.provider={build:()=>new Jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class y3{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=st.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W(Wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W(Wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xh(t,e){t.asyncQueue.verifyOperationInProgress(),W(Wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await XE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Kv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _3(t);W(Wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Bv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Bv(e.remoteStore,s)),t._onlineComponents=e}async function _3(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Wr,"Using user provided OfflineComponentProvider");try{await xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await xh(t,new fc)}}else W(Wr,"Using default OfflineComponentProvider"),await xh(t,new g3(void 0));return t._offlineComponents}async function pT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Wr,"Using user provided OnlineComponentProvider"),await Kv(t,t._uninitializedComponentsProvider._online)):(W(Wr,"Using default OnlineComponentProvider"),await Kv(t,new Jf))),t._onlineComponents}function v3(t){return pT(t).then(e=>e.syncEngine)}async function mc(t){const e=await pT(t),n=e.eventManager;return n.onListen=r3.bind(null,e.syncEngine),n.onUnlisten=o3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=a3.bind(null,e.syncEngine),n}function w3(t,e,n,r){const s=new Gp(r),i=new Wp(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>zp(await mc(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>Bp(await mc(t),i))}}function x3(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new Gp({next:p=>{h.Nu(),o.enqueueAndForget(()=>Bp(i,m));const _=p.docs.has(l);!_&&p.fromCache?d.reject(new $(L.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&p.fromCache&&u&&u.source==="server"?d.reject(new $(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Wp(Kc(l.path),h,{includeMetadataChanges:!0,Ka:!0});return zp(i,m)}(await mc(t),t.asyncQueue,e,n,r)),r.promise}function E3(t,e,n={}){const r=new Vn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const h=new Gp({next:p=>{h.Nu(),o.enqueueAndForget(()=>Bp(i,m)),p.fromCache&&u.source==="server"?d.reject(new $(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Wp(l,h,{includeMetadataChanges:!0,Ka:!0});return zp(i,m)}(await mc(t),t.asyncQueue,e,n,r)),r.promise}function T3(t,e){const n=new Vn;return t.asyncQueue.enqueueAndForget(async()=>l3(await v3(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3="ComponentProvider",Qv=new Map;function b3(t,e,n,r,s){return new $D(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,gT(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="firestore.googleapis.com",Yv=!0;class Xv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yT,this.ssl=Yv}else this.host=e.host,this.ssl=e.ssl??Yv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<J4)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ED;switch(r.type){case"firstParty":return new SD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Qv.get(n);r&&(W(I3,"Removing Datastore"),Qv.delete(n),r.terminate())}(this),Promise.resolve()}}function S3(t,e,n,r={}){var d;t=St(t,rd);const s=Qr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(sp(`https://${l}`),ip("Firestore",!0)),i.host!==yT&&i.host!==l&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Ns(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=st.MOCK_USER;else{h=mx(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new st(p)}t._authCredentials=new TD(new oE(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class Re{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Re(this.firestore,e,this._key)}toJSON(){return{type:Re._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(tl(n,Re._jsonSchema))return new Re(e,r||null,new G(he.fromString(n.referencePath)))}}Re._jsonSchemaVersion="firestore/documentReference/1.0",Re._jsonSchema={type:Me("string",Re._jsonSchemaVersion),referencePath:Me("string")};class Or extends Jr{constructor(e,n,r){super(e,n,Kc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Re(this.firestore,null,new G(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function Xn(t,e,...n){if(t=xe(t),aE("collection","path",e),t instanceof rd){const r=he.fromString(e,...n);return cv(r),new Or(t,null,r)}{if(!(t instanceof Re||t instanceof Or))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return cv(r),new Or(t.firestore,null,r)}}function Ht(t,e,...n){if(t=xe(t),arguments.length===1&&(e=wp.newId()),aE("doc","path",e),t instanceof rd){const r=he.fromString(e,...n);return uv(r),new Re(t,null,new G(r))}{if(!(t instanceof Re||t instanceof Or))throw new $(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(he.fromString(e,...n));return uv(r),new Re(t.firestore,t instanceof Or?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="AsyncQueue";class Zv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZE(this,"async_queue_retry"),this._c=()=>{const r=wh();r&&W(Jv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=wh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=wh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Vn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ji(e))throw e;W(Jv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Qn("INTERNAL UNHANDLED ERROR: ",e0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Vp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:e0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function e0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Jn extends rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Zv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Zv(e),this._firestoreClient=void 0,await e}}}function k3(t,e){const n=typeof t=="object"?t:lp(),r=typeof t=="string"?t:oc,s=Uc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=dx("firestore");i&&S3(s,...i)}return s}function sd(t){if(t._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||C3(t),t._firestoreClient}function C3(t){var r,s,i,o;const e=t._freezeSettings(),n=b3(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new y3(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zt(Ze.fromBase64String(e))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zt(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tl(e,zt._jsonSchema))return zt.fromBase64String(e.bytes)}}zt._jsonSchemaVersion="firestore/bytes/1.0",zt._jsonSchema={type:Me("string",zt._jsonSchemaVersion),bytes:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ye(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:In._jsonSchemaVersion}}static fromJSON(e){if(tl(e,In._jsonSchema))return new In(e.latitude,e.longitude)}}In._jsonSchemaVersion="firestore/geoPoint/1.0",In._jsonSchema={type:Me("string",In._jsonSchemaVersion),latitude:Me("number"),longitude:Me("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:an._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tl(e,an._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new an(e.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}an._jsonSchemaVersion="firestore/vectorValue/1.0",an._jsonSchema={type:Me("string",an._jsonSchemaVersion),vectorValues:Me("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=/^__.*__$/;class N3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new nl(e,this.data,n,this.fieldTransforms)}}class _T{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function vT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{dataSource:t})}}class Qp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Qp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return pc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(vT(this.dataSource)&&R3.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class A3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ed(e)}createContext(e,n,r,s=!1){return new Qp({dataSource:e,methodName:n,targetDoc:r,path:Ye.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function od(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new A3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wT(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);Xp("Data must be an object, but it was:",o,r);const l=xT(r,o);let u,d;if(i.merge)u=new At(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const p=Os(e,m,n);if(!o.contains(p))throw new $(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);IT(h,p)||h.push(p)}u=new At(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new N3(new xt(l),u,d)}class ad extends id{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ad}}class Yp extends id{_toFieldTransform(e){return new _4(e.path,new La)}isEqual(e){return e instanceof Yp}}function P3(t,e,n,r){const s=t.createContext(1,e,n);Xp("Data must be an object, but it was:",s,r);const i=[],o=xt.empty();Yr(r,(u,d)=>{const h=TT(e,u,n);d=xe(d);const m=s.childContextForFieldPath(h);if(d instanceof ad)i.push(h);else{const p=ol(d,m);p!=null&&(i.push(h),o.set(h,p))}});const l=new At(i);return new _T(o,l,s.fieldTransforms)}function D3(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[Os(e,r,n)],u=[s];if(i.length%2!=0)throw new $(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)l.push(Os(e,i[p])),u.push(i[p+1]);const d=[],h=xt.empty();for(let p=l.length-1;p>=0;--p)if(!IT(d,l[p])){const _=l[p];let I=u[p];I=xe(I);const b=o.childContextForFieldPath(_);if(I instanceof ad)d.push(_);else{const C=ol(I,b);C!=null&&(d.push(_),h.set(_,C))}}const m=new At(d);return new _T(h,m,o.fieldTransforms)}function j3(t,e,n,r=!1){return ol(n,t.createContext(r?4:3,e))}function ol(t,e){if(ET(t=xe(t)))return Xp("Unsupported field value:",e,t),xT(t,e);if(t instanceof id)return function(r,s){if(!vT(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=ol(l,s.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p4(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ge.fromDate(r);return{timestampValue:cc(s.serializer,i)}}if(r instanceof ge){const i=new ge(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cc(s.serializer,i)}}if(r instanceof In)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zt)return{bytesValue:zE(s.serializer,r._byteString)};if(r instanceof Re){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Np(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof an)return function(o,l){const u=o instanceof an?o.toArray():o;return{mapValue:{fields:{[gE]:{stringValue:yE},[ac]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return Sp(l.serializer,h)})}}}}}}(r,s);if(KE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Wc(r)}`)}(t,e)}function xT(t,e){const n={};return cE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(r,s)=>{const i=ol(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function ET(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ge||t instanceof In||t instanceof zt||t instanceof Re||t instanceof id||t instanceof an||KE(t))}function Xp(t,e,n){if(!ET(n)||!lE(n)){const r=Wc(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Os(t,e,n){if((e=xe(e))instanceof Kp)return e._internalPath;if(typeof e=="string")return TT(t,e);throw pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const O3=new RegExp("[~\\*/\\[\\]]");function TT(t,e,n){if(e.search(O3)>=0)throw pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kp(...e.split("."))._internalPath}catch{throw pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new $(L.INVALID_ARGUMENT,l+t+u)}function IT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[ac].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ae(o.doubleValue));return new an(n)}convertGeoPoint(e){return new In(Ae(e.latitude),Ae(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=he.fromString(e);le(GE(r),9688,{name:e});const s=new ja(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp extends M3{constructor(e){super(),this.firestore=e}convertBytes(e){return new zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Re(this.firestore,null,n)}}function ld(){return new Yp("serverTimestamp")}const t0="@firebase/firestore",n0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Re(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new L3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Os("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class L3 extends bT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zp{}class kT extends Zp{}function to(t,e,...n){let r=[];e instanceof Zp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof eg).length,l=i.filter(u=>u instanceof ud).length;if(o>1||o>0&&l>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class ud extends kT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ud(e,n,r)}_apply(e){const n=this._parse(e);return CT(e._query,n),new Jr(e.firestore,e.converter,Bf(e._query,n))}_parse(e){const n=od(e.firestore);return function(i,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){i0(m,h);const I=[];for(const b of m)I.push(s0(u,i,b));p={arrayValue:{values:I}}}else p=s0(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||i0(m,h),p=j3(l,o,m,h==="in"||h==="not-in");return Oe.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ms(t,e,n){const r=e,s=Os("where",t);return ud._create(s,r,n)}class eg extends Zp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new eg(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)CT(o,u),o=Bf(o,u)}(e._query,n),new Jr(e.firestore,e.converter,Bf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tg extends kT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tg(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ma(i,o)}(e._query,this._field,this._direction);return new Jr(e.firestore,e.converter,a4(e._query,n))}}function ng(t,e="asc"){const n=e,r=Os("orderBy",t);return tg._create(r,n)}function s0(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(he.fromString(n));if(!G.isDocumentKey(r))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _v(t,new G(r))}if(n instanceof Re)return _v(t,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(n)}.`)}function i0(t,e){if(!Array.isArray(t)||t.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function RT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Es extends bT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Os("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Es._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Es._jsonSchemaVersion="firestore/documentSnapshot/1.0",Es._jsonSchema={type:Me("string",Es._jsonSchemaVersion),bundleSource:Me("string","DocumentSnapshot"),bundleName:Me("string"),bundle:Me("string")};class xu extends Es{data(e={}){return super.data(e)}}class Ts{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xu(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new xu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:F3(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ts._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=wp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function F3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ts._jsonSchemaVersion="firestore/querySnapshot/1.0",Ts._jsonSchema={type:Me("string",Ts._jsonSchemaVersion),bundleSource:Me("string","QuerySnapshot"),bundleName:Me("string"),bundle:Me("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(t){t=St(t,Re);const e=St(t.firestore,Jn),n=sd(e);return x3(n,t._key).then(r=>NT(e,t,r))}function V3(t){t=St(t,Jr);const e=St(t.firestore,Jn),n=sd(e),r=new Jp(e);return ST(t._query),E3(n,t._query).then(s=>new Ts(e,r,t,s))}function Zf(t,e,n){t=St(t,Re);const r=St(t.firestore,Jn),s=RT(t.converter,e,n),i=od(r);return cd(r,[wT(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wt.none())])}function gc(t,e,n,...r){t=St(t,Re);const s=St(t.firestore,Jn),i=od(s);let o;return o=typeof(e=xe(e))=="string"||e instanceof Kp?D3(i,"updateDoc",t._key,e,n,r):P3(i,"updateDoc",t._key,e),cd(s,[o.toMutation(t._key,Wt.exists(!0))])}function U3(t){return cd(St(t.firestore,Jn),[new kp(t._key,Wt.none())])}function sg(t,e){const n=St(t.firestore,Jn),r=Ht(t),s=RT(t.converter,e),i=od(t.firestore);return cd(n,[wT(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Wt.exists(!1))]).then(()=>r)}function al(t,...e){var d,h,m;t=xe(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||r0(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(r0(e[r])){const p=e[r];e[r]=(d=p.next)==null?void 0:d.bind(p),e[r+1]=(h=p.error)==null?void 0:h.bind(p),e[r+2]=(m=p.complete)==null?void 0:m.bind(p)}let i,o,l;if(t instanceof Re)o=St(t.firestore,Jn),l=Kc(t._key.path),i={next:p=>{e[r]&&e[r](NT(o,t,p))},error:e[r+1],complete:e[r+2]};else{const p=St(t,Jr);o=St(p.firestore,Jn),l=p._query;const _=new Jp(o);i={next:I=>{e[r]&&e[r](new Ts(o,_,p,I))},error:e[r+1],complete:e[r+2]},ST(t._query)}const u=sd(o);return w3(u,l,s,i)}function cd(t,e){const n=sd(t);return T3(n,e)}function NT(t,e,n){const r=n.docs.get(e._key),s=new Jp(t);return new Es(t,s,e._key,r,new qo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){xD(zs),As(new Fr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Jn(new ID(r.getProvider("auth-internal")),new kD(o,r.getProvider("app-check-internal")),WD(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wn(t0,n0,e),wn(t0,n0,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="firebasestorage.googleapis.com",PT="storageBucket",z3=2*60*1e3,B3=10*60*1e3,$3=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se extends Sn{constructor(e,n,r=0){super(Eh(e),`Firebase Storage: ${n} (${Eh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Se.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var _e;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(_e||(_e={}));function Eh(t){return"storage/"+t}function ig(){const t="An unknown error occurred, please check the error payload for server response.";return new Se(_e.UNKNOWN,t)}function W3(t){return new Se(_e.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function H3(t){return new Se(_e.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function q3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Se(_e.UNAUTHENTICATED,t)}function G3(){return new Se(_e.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function K3(t){return new Se(_e.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function DT(){return new Se(_e.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jT(){return new Se(_e.CANCELED,"User canceled the upload/download.")}function Q3(t){return new Se(_e.INVALID_URL,"Invalid URL '"+t+"'.")}function Y3(t){return new Se(_e.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function X3(){return new Se(_e.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+PT+"' property when initializing the app?")}function OT(){return new Se(_e.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function J3(){return new Se(_e.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Z3(){return new Se(_e.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ej(t){return new Se(_e.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function em(t){return new Se(_e.INVALID_ARGUMENT,t)}function MT(){return new Se(_e.APP_DELETED,"The Firebase app was deleted.")}function tj(t){return new Se(_e.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ua(t,e){return new Se(_e.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function No(t){throw new Se(_e.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Pt.makeFromUrl(e,n)}catch{return new Pt(e,"")}if(r.path==="")return r;throw Y3(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),I={bucket:1,path:3},b=n===AT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${b}/${s}/${C}`,"i"),x=[{regex:l,indices:u,postModify:i},{regex:_,indices:I,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<x.length;P++){const M=x[P],F=M.regex.exec(e);if(F){const S=F[M.indices.bucket];let w=F[M.indices.path];w||(w=""),r=new Pt(S,w),M.postModify(r);break}}if(r==null)throw Q3(e);return r}}class nj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function h(...C){d||(d=!0,e.apply(null,C))}function m(C){s=setTimeout(()=>{s=null,t(_,u())},C)}function p(){i&&clearTimeout(i)}function _(C,...E){if(d){p();return}if(C){p(),h.call(null,C,...E);return}if(u()||o){p(),h.call(null,C,...E);return}r<64&&(r*=2);let x;l===1?(l=2,x=0):x=(r+Math.random())*1e3,m(x)}let I=!1;function b(C){I||(I=!0,p(),!d&&(s!==null?(C||(l=2),clearTimeout(s),m(0)):C||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function sj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){return t!==void 0}function oj(t){return typeof t=="function"}function aj(t){return typeof t=="object"&&!Array.isArray(t)}function dd(t){return typeof t=="string"||t instanceof String}function o0(t){return og()&&t instanceof Blob}function og(){return typeof Blob<"u"}function a0(t,e,n,r){if(r<e)throw em(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw em(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function LT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Is;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Is||(Is={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FT(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,r,s,i,o,l,u,d,h,m,p=!0,_=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,b)=>{this.resolve_=I,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Is.NO_ERROR,u=i.getStatus();if(!l||FT(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Is.ABORT;r(!1,new Gl(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Gl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());ij(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=ig();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?MT():jT();o(u)}else{const u=DT();o(u)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=rj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function uj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function cj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function hj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function fj(t,e,n,r,s,i,o=!0,l=!1){const u=LT(t.urlParams),d=t.url+u,h=Object.assign({},t.headers);return dj(h,e),uj(h,n),cj(h,i),hj(h,r),new lj(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pj(...t){const e=mj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(og())return new Blob(t);throw new Se(_e.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t){if(typeof atob>"u")throw ej("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Th{constructor(e,n){this.data=e,this.contentType=n||null}}function _j(t,e){switch(t){case yn.RAW:return new Th(VT(e));case yn.BASE64:case yn.BASE64URL:return new Th(UT(t,e));case yn.DATA_URL:return new Th(wj(e),xj(e))}throw ig()}function VT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function vj(t){let e;try{e=decodeURIComponent(t)}catch{throw ua(yn.DATA_URL,"Malformed data URL.")}return VT(e)}function UT(t,e){switch(t){case yn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ua(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ua(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=yj(e)}catch(s){throw s.message.includes("polyfill")?s:ua(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class zT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ua(yn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Ej(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function wj(t){const e=new zT(t);return e.base64?UT(yn.BASE64,e.rest):vj(e.rest)}function xj(t){return new zT(t).contentType}function Ej(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e,n){let r=0,s="";o0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(o0(this.data_)){const r=this.data_,s=gj(r,e,n);return s===null?null:new wr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new wr(r,!0)}}static getBlob(...e){if(og()){const n=e.map(r=>r instanceof wr?r.data_:r);return new wr(pj.apply(null,n))}else{const n=e.map(o=>dd(o)?_j(yn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new wr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){let e;try{e=JSON.parse(t)}catch{return null}return aj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Ij(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function $T(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(t,e){return e}class dt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||bj}}let Kl=null;function Sj(t){return!dd(t)||t.length<2?t:$T(t)}function WT(){if(Kl)return Kl;const t=[];t.push(new dt("bucket")),t.push(new dt("generation")),t.push(new dt("metageneration")),t.push(new dt("name","fullPath",!0));function e(i,o){return Sj(o)}const n=new dt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new dt("size");return s.xform=r,t.push(s),t.push(new dt("timeCreated")),t.push(new dt("updated")),t.push(new dt("md5Hash",null,!0)),t.push(new dt("cacheControl",null,!0)),t.push(new dt("contentDisposition",null,!0)),t.push(new dt("contentEncoding",null,!0)),t.push(new dt("contentLanguage",null,!0)),t.push(new dt("contentType",null,!0)),t.push(new dt("metadata","customMetadata",!0)),Kl=t,Kl}function kj(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Pt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function Cj(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return kj(r,t),r}function HT(t,e,n){const r=BT(e);return r===null?null:Cj(t,r,n)}function Rj(t,e,n,r){const s=BT(e);if(s===null||!dd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),_=no(p,n,r),I=LT({alt:"media",token:d});return _+I})[0]}function qT(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Ws{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t){if(!t)throw ig()}function ag(t,e){function n(r,s){const i=HT(t,s,e);return Un(i!==null),i}return n}function Nj(t,e){function n(r,s){const i=HT(t,s,e);return Un(i!==null),Rj(i,s,t.host,t._protocol)}return n}function ll(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=G3():s=q3():n.getStatus()===402?s=H3(t.bucket):n.getStatus()===403?s=K3(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function lg(t){const e=ll(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=W3(t.path)),i.serverResponse=s.serverResponse,i}return n}function Aj(t,e,n){const r=e.fullServerUrl(),s=no(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Ws(s,i,ag(t,n),o);return l.errorHandler=lg(e),l}function Pj(t,e,n){const r=e.fullServerUrl(),s=no(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new Ws(s,i,Nj(t,n),o);return l.errorHandler=lg(e),l}function Dj(t,e){const n=e.fullServerUrl(),r=no(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(u,d){}const l=new Ws(r,s,o,i);return l.successCodes=[200,204],l.errorHandler=lg(e),l}function jj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function GT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=jj(null,e)),r}function Oj(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let x="";for(let P=0;P<2;P++)x=x+Math.random().toString().slice(2);return x}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=GT(e,r,s),h=qT(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",_=wr.getBlob(m,r,p);if(_===null)throw OT();const I={name:d.fullPath},b=no(i,t.host,t._protocol),C="POST",E=t.maxUploadRetryTime,y=new Ws(b,C,ag(t,n),E);return y.urlParams=I,y.headers=o,y.body=_.uploadData(),y.errorHandler=ll(e),y}class yc{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ug(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Un(!1)}return Un(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Mj(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=GT(e,r,s),l={name:o.fullPath},u=no(i,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=qT(o,n),p=t.maxUploadRetryTime;function _(b){ug(b);let C;try{C=b.getResponseHeader("X-Goog-Upload-URL")}catch{Un(!1)}return Un(dd(C)),C}const I=new Ws(u,d,_,p);return I.urlParams=l,I.headers=h,I.body=m,I.errorHandler=ll(e),I}function Lj(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const h=ug(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Un(!1)}m||Un(!1);const p=Number(m);return Un(!isNaN(p)),new yc(p,r.size(),h==="final")}const o="POST",l=t.maxUploadRetryTime,u=new Ws(n,o,i,l);return u.headers=s,u.errorHandler=ll(e),u}const l0=256*1024;function Fj(t,e,n,r,s,i,o,l){const u=new yc(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw J3();const d=u.total-u.current;let h=d;s>0&&(h=Math.min(h,s));const m=u.current,p=m+h;let _="";h===0?_="finalize":d===h?_="upload, finalize":_="upload";const I={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${u.current}`},b=r.slice(m,p);if(b===null)throw OT();function C(P,M){const F=ug(P,["active","final"]),S=u.current+h,w=r.size();let T;return F==="final"?T=ag(e,i)(P,M):T=null,new yc(S,w,F==="final",T)}const E="POST",y=e.maxUploadRetryTime,x=new Ws(n,E,C,y);return x.headers=I,x.body=b.uploadData(),x.progressCallback=l||null,x.errorHandler=ll(t),x}const _t={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ih(t){switch(t){case"running":case"pausing":case"canceling":return _t.RUNNING;case"paused":return _t.PAUSED;case"success":return _t.SUCCESS;case"canceled":return _t.CANCELED;case"error":return _t.ERROR;default:return _t.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n,r){if(oj(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Uj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Is.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Is.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Is.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw No("cannot .send() more than once");if(Qr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw No("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw No("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw No("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw No("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class zj extends Uj{initXhr(){this.xhr_.responseType="text"}}function fs(){return new zj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=WT(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(_e.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(FT(s.status,[]))if(i)s=DT();else{this.sleepTime=Math.max(this.sleepTime*2,$3),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(_e.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Mj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=Lj(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,fs,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=l0*this._chunkMultiplier,n=new yc(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=Fj(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const l=this._ref.storage._makeRequest(o,fs,s,i,!1);this._request=l,l.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){l0*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=Aj(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Oj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,fs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=jT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ih(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new Vj(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ih(this._state)){case _t.SUCCESS:Qs(this._resolve.bind(null,this.snapshot))();break;case _t.CANCELED:case _t.ERROR:const n=this._reject;Qs(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ih(this._state)){case _t.RUNNING:case _t.PAUSED:e.next&&Qs(e.next.bind(e,this.snapshot))();break;case _t.SUCCESS:e.complete&&Qs(e.complete.bind(e))();break;case _t.CANCELED:case _t.ERROR:e.error&&Qs(e.error.bind(e,this._error))();break;default:e.error&&Qs(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n){this._service=e,n instanceof Pt?this._location=n:this._location=Pt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ls(e,n)}get root(){const e=new Pt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $T(this._location.path)}get storage(){return this._service}get parent(){const e=Tj(this._location.path);if(e===null)return null;const n=new Pt(this._location.bucket,e);return new Ls(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw tj(e)}}function $j(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Bj(t,new wr(e),n)}function Wj(t){t._throwIfRoot("getDownloadURL");const e=Pj(t.storage,t._location,WT());return t.storage.makeRequestWithTokens(e,fs).then(n=>{if(n===null)throw Z3();return n})}function Hj(t){t._throwIfRoot("deleteObject");const e=Dj(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fs)}function qj(t,e){const n=Ij(t._location.path,e),r=new Pt(t._location.bucket,n);return new Ls(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(t){return/^[A-Za-z]+:\/\//.test(t)}function Kj(t,e){return new Ls(t,e)}function KT(t,e){if(t instanceof cg){const n=t;if(n._bucket==null)throw X3();const r=new Ls(n,n._bucket);return e!=null?KT(r,e):r}else return e!==void 0?qj(t,e):t}function Qj(t,e){if(e&&Gj(e)){if(t instanceof cg)return Kj(t,e);throw em("To use ref(service, url), the first argument must be a Storage instance.")}else return KT(t,e)}function u0(t,e){const n=e==null?void 0:e[PT];return n==null?null:Pt.makeFromBucketSpec(n,t)}function Yj(t,e,n,r={}){t.host=`${e}:${n}`;const s=Qr(e);s&&(sp(`https://${t.host}/b`),ip("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:mx(i,t.app.options.projectId))}class cg{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=AT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=z3,this._maxUploadRetryTime=B3,this._requests=new Set,s!=null?this._bucket=Pt.makeFromBucketSpec(s,this._host):this._bucket=u0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pt.makeFromBucketSpec(this._url,e):this._bucket=u0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(wt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ls(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new nj(MT());{const o=fj(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const c0="@firebase/storage",d0="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="storage";function Xj(t,e,n){return t=xe(t),$j(t,e,n)}function Jj(t){return t=xe(t),Wj(t)}function Zj(t){return t=xe(t),Hj(t)}function h0(t,e){return t=xe(t),Qj(t,e)}function eO(t=lp(),e){t=xe(t);const r=Uc(t,QT).getImmediate({identifier:e}),s=dx("storage");return s&&tO(r,...s),r}function tO(t,e,n,r={}){Yj(t,e,n,r)}function nO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cg(n,r,s,e,zs)}function rO(){As(new Fr(QT,nO,"PUBLIC").setMultipleInstances(!0)),wn(c0,d0,""),wn(c0,d0,"esm2020")}rO();const sO={apiKey:"AIzaSyAmo6_E4He_DFUO7byO9B7BfBDjTKzIQDg",authDomain:"advantage-7d8cb.firebaseapp.com",projectId:"advantage-7d8cb",storageBucket:"advantage-7d8cb.firebasestorage.app",messagingSenderId:"874118190832",appId:"1:874118190832:web:6097e5d923717bf7f75435"},dg=yx(sO),Ao=sa(dg),Le=k3(dg),f0=eO(dg),YT=async(t,e)=>{try{const n=Ht(Le,"content",t);await gc(n,{status:e,updatedAt:ld()}),console.log("Post status updated successfully")}catch(n){throw console.error("Error updating post status:",n),n}},XT=A.createContext({}),kn=()=>{const t=A.useContext(XT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},iO=({children:t})=>{const[e,n]=A.useState(null),[r,s]=A.useState(null),[i,o]=A.useState(!0),l=async(_,I,b)=>{try{const E=(await sP(Ao,_,I)).user,y=Ht(Le,"organizations",b.organizationId);await Zf(y,{name:b.organizationName,createdAt:new Date,plan:"free",ownerId:E.uid});const x=Ht(Le,"users",E.uid);return await Zf(x,{email:E.email,name:b.name,organizationId:b.organizationId,role:"admin",createdAt:new Date}),E}catch(C){throw console.error("Signup error:",C),C}},u=async(_,I)=>{try{return(await iP(Ao,_,I)).user}catch(b){throw console.error("Sign in error:",b),b}},d=async()=>{try{await uP(Ao),s(null)}catch(_){throw console.error("Logout error:",_),_}},h=async _=>{try{await rP(Ao,_)}catch(I){throw console.error("Password reset error:",I),I}},m=async _=>{try{const I=await rg(Ht(Le,"users",_));I.exists()&&s(I.data())}catch(I){console.error("Error fetching user profile:",I)}};A.useEffect(()=>lP(Ao,async I=>{n(I),I?await m(I.uid):s(null),o(!1)}),[]);const p={currentUser:e,userProfile:r,signup:l,signin:u,logout:d,resetPassword:h,loading:i};return c.jsx(XT.Provider,{value:p,children:!i&&t})},oO=({userRole:t,setUserRole:e})=>{var u;const{currentUser:n,userProfile:r,logout:s}=kn(),i=Us(),o=[{icon:DC,label:"Dashboard",path:"/"},{icon:qC,label:"Campaigns",path:"/campaigns"},{icon:Uo,label:"Inbox",path:"/inbox"},{icon:xC,label:"Content",path:"/editor"},{icon:bC,label:"Assets",path:"/assets"},{icon:sC,label:"Analytics",path:"/analytics"},{icon:bf,label:"Calendar",path:"/calendar"}],l=async()=>{try{await s(),i("/login")}catch(d){console.error("Logout error:",d)}};return c.jsxs("div",{className:"w-64 bg-[#0B0C15] border-r border-[#1F2937]/50 flex flex-col h-screen sticky top-0",children:[c.jsx("div",{className:"p-6 border-b border-[#1F2937]/50",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/20",children:c.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-white font-bold text-base",children:"Studio AI"}),c.jsx("p",{className:"text-gray-500 text-[10px] uppercase tracking-wider font-semibold",children:"Marketing v1"})]})]})}),c.jsxs("nav",{className:"flex-1 p-4",children:[c.jsx("div",{className:"space-y-1",children:o.map(d=>c.jsx(X1,{to:d.path,end:d.path==="/",className:({isActive:h})=>`group flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium transition-all relative cursor-pointer ${h?"bg-[#6366F1] text-white shadow-lg shadow-[#6366F1]/30":"text-gray-400 hover:text-white hover:bg-[#1F2937]/50"}`,children:({isActive:h})=>c.jsxs(c.Fragment,{children:[h&&c.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-r-full"}),c.jsx(d.icon,{size:20,className:"z-10",strokeWidth:2.5}),c.jsx("span",{className:"z-10",children:d.label})]})},d.path))}),c.jsx("div",{className:"my-6 h-px bg-[#1F2937]/50"}),c.jsx("div",{className:"space-y-1",children:c.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-gray-400 hover:text-white hover:bg-[#1F2937]/50 transition-all",children:[c.jsx(sR,{size:20,strokeWidth:2.5}),c.jsx("span",{children:"Settings"})]})})]}),c.jsx("div",{className:"p-4 border-t border-[#1F2937]/50",children:c.jsxs("button",{onClick:l,className:"w-full flex items-center gap-3 p-3 rounded-xl bg-[#1F2937]/30 hover:bg-[#1F2937]/50 transition-colors cursor-pointer group",children:[c.jsxs("div",{className:"relative",children:[c.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg",children:c.jsx("span",{className:"text-white text-sm font-bold",children:((u=r==null?void 0:r.name)==null?void 0:u.charAt(0).toUpperCase())||"U"})}),c.jsx("div",{className:"absolute bottom-0 right-0 w-3 h-3 bg-green-400 border-2 border-[#0B0C15] rounded-full"})]}),c.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[c.jsx("p",{className:"text-white text-sm font-semibold truncate",children:(r==null?void 0:r.name)||"User"}),c.jsx("p",{className:"text-gray-500 text-xs truncate capitalize",children:(r==null?void 0:r.role)||t})]}),c.jsx($C,{size:16,className:"text-gray-500 group-hover:text-gray-400 transition-colors"})]})})]})},aO=({children:t,userRole:e,setUserRole:n})=>c.jsxs("div",{className:"min-h-screen bg-[#030712] text-white flex",children:[c.jsx(oO,{userRole:e,setUserRole:n}),c.jsx("main",{className:"flex-1 overflow-auto",children:c.jsx("div",{className:"p-8",children:t})})]}),lO=({children:t})=>{const{currentUser:e,loading:n}=kn();return n?c.jsx("div",{className:"min-h-screen bg-[#030712] flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading..."})]})}):e?t:c.jsx(lk,{to:"/login"})},uO=()=>{const{userProfile:t}=kn(),[e,n]=A.useState([]),[r,s]=A.useState({activeCampaigns:2,pendingReview:0,scheduled:0}),[i]=A.useState([{user:"AI Studio",action:"generated 3 assets",time:"2 hours ago"},{user:"John Doe",action:"approved UI Strategy",time:"5 hours ago"},{user:"Sarah Chen",action:"modified ad copy",time:"Yesterday"}]);return A.useEffect(()=>{if(!(t!=null&&t.organizationId))return;const o=to(Xn(Le,"content"),Ms("organizationId","==",t.organizationId)),l=al(o,u=>{let d=0,h=0;const m=[];u.forEach(p=>{const _=p.data();m.push({id:p.id,..._}),_.status==="IN_REVIEW"&&d++,_.status==="SCHEDULED"&&h++}),n(m),s(p=>({...p,pendingReview:d,scheduled:h}))});return()=>l()},[t]),t!=null&&t.organizationId?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Dashboard"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Campaign Performance Overview"})]}),c.jsxs(ft,{to:"/campaigns",className:"flex items-center gap-2 px-4 py-2 bg-[#6366F1] hover:bg-[#5558E3] text-white text-sm font-medium rounded-lg transition-colors",children:[c.jsx(Ku,{size:16}),"Create Campaign"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(bh,{title:"TOTAL REACH",value:"1.2M",change:"+9.2%",icon:rp}),c.jsx(bh,{title:"ENGAGEMENT",value:"4.8%",change:"+2.4%",icon:ix}),c.jsx(bh,{title:"ACTIVE ADS",value:r.activeCampaigns.toString(),change:"+10%",icon:bf})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Performance Trends"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-gray-400 hover:text-white bg-[#1F2937]/50 rounded-lg",children:"7D"}),c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-gray-400 hover:text-white bg-[#1F2937]/50 rounded-lg",children:"30D"}),c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-white bg-[#6366F1] rounded-lg",children:"90D"})]})]}),c.jsx("div",{className:"flex items-end justify-between gap-3 h-48",children:["MON","TUE","WED","THU","FRI","SAT","SUN"].map((o,l)=>c.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-full bg-[#1F2937]/50 rounded-t-lg relative",style:{height:`${[40,55,45,75,60,50,65][l]}% `},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#6366F1] to-[#8B5CF6] rounded-t-lg"})}),c.jsx("span",{className:"text-xs text-gray-500 font-medium",children:o})]},o))})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Schedule"}),c.jsx(bf,{size:18,className:"text-gray-400"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Sh,{date:"MAY 12",title:"Product Feature",platform:"Instagram",time:"10:00 AM"}),c.jsx(Sh,{date:"MAY 14",title:"AI Trend Report v2",platform:"LinkedIn",time:"03:00 PM"}),c.jsx(Sh,{date:"MAY 15",title:"Success Story",platform:"Twitter",time:"06:00 PM"})]}),c.jsx(ft,{to:"/calendar",className:"mt-6 w-full flex items-center justify-center gap-2 px-4 py-2 bg-[#1F2937]/50 hover:bg-[#1F2937] text-white text-sm font-medium rounded-lg transition-colors",children:"Open Full Calendar"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Active Campaigns"}),c.jsx(ft,{to:"/campaigns",className:"text-sm text-[#6366F1] hover:text-[#8B5CF6] font-medium",children:"VIEW ALL"})]}),c.jsxs("div",{className:"space-y-3",children:[e.slice(0,3).map(o=>c.jsx(cO,{name:o.title||"Untitled Campaign",channels:[o.platform||"Instagram"],reach:`${Math.floor(Math.random()*500)} K`,status:o.status==="APPROVED"?"live":o.status==="IN_REVIEW"?"reviewing":"pending"},o.id)),e.length===0&&c.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No campaigns yet"})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Activity"}),c.jsx("div",{className:"space-y-4",children:i.map((o,l)=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"w-2 h-2 mt-1.5 rounded-full bg-[#6366F1]"}),c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm text-white",children:[c.jsx("span",{className:"font-medium",children:o.user})," ",o.action]}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:o.time})]})]},l))})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:" AI-Powered Tools"}),c.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supercharge your content creation with AI"})]}),c.jsx(ft,{to:"/test-ai",className:"text-sm text-[#6366F1] hover:text-[#8B5CF6] font-medium",children:"TEST ALL"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsx(ft,{to:"/editor/new",className:"group",children:c.jsxs("div",{className:"bg-gradient-to-br from-[#6366F1]/10 to-[#8B5CF6]/10 border border-[#6366F1]/20 rounded-lg p-4 hover:border-[#6366F1]/40 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 bg-[#6366F1]/20 rounded-lg",children:c.jsx(Qu,{className:"text-[#6366F1]",size:20})}),c.jsx("h4",{className:"font-semibold text-white text-sm",children:"AI Caption Generator"})]}),c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Generate captions with custom tones"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#6366F1]/20 text-[#6366F1] rounded",children:"Professional"}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#6366F1]/20 text-[#6366F1] rounded",children:"Casual"}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#6366F1]/20 text-[#6366F1] rounded",children:"Playful"})]})]})}),c.jsx(ft,{to:"/editor/new",className:"group",children:c.jsxs("div",{className:"bg-gradient-to-br from-[#3B82F6]/10 to-[#2563EB]/10 border border-[#3B82F6]/20 rounded-lg p-4 hover:border-[#3B82F6]/40 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 bg-[#3B82F6]/20 rounded-lg",children:c.jsx(Pi,{className:"text-[#3B82F6]",size:20})}),c.jsx("h4",{className:"font-semibold text-white text-sm",children:"AI Image Generator"})]}),c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Create stunning visuals with AI"}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#3B82F6]/20 text-[#3B82F6] rounded",children:"Powered by Gemini"})]})}),c.jsx(ft,{to:"/editor/new",className:"group",children:c.jsxs("div",{className:"bg-gradient-to-br from-[#10B981]/10 to-[#059669]/10 border border-[#10B981]/20 rounded-lg p-4 hover:border-[#10B981]/40 transition-all",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"p-2 bg-[#10B981]/20 rounded-lg",children:c.jsx(vi,{className:"text-[#10B981]",size:20})}),c.jsx("h4",{className:"font-semibold text-white text-sm",children:"Multi-Platform Adapter"})]}),c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Adapt content for all platforms"}),c.jsxs("div",{className:"flex flex-wrap gap-1",children:[c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#10B981]/20 text-[#10B981] rounded",children:"Instagram"}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#10B981]/20 text-[#10B981] rounded",children:"Twitter"}),c.jsx("span",{className:"text-xs px-2 py-0.5 bg-[#10B981]/20 text-[#10B981] rounded",children:"LinkedIn"})]})]})})]})]})]}):c.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading dashboard..."})]})})},bh=({title:t,value:e,change:n,icon:r})=>c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(r,{size:16,className:"text-gray-400"}),c.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:t})]}),c.jsxs("span",{className:"text-xs font-semibold text-green-400 flex items-center gap-1",children:[c.jsx(rp,{size:12}),n]})]}),c.jsx("div",{className:"text-3xl font-bold text-white",children:e})]}),Sh=({date:t,title:e,platform:n,time:r})=>c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:t.split(" ")[0]}),c.jsx("div",{className:"text-lg font-bold text-white",children:t.split(" ")[1]})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-white truncate",children:e}),c.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[c.jsx("span",{className:"text-xs text-gray-500",children:n}),c.jsx("span",{className:"text-xs text-gray-600",children:""}),c.jsx("span",{className:"text-xs text-gray-500",children:r})]})]}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-[#14B8A6] mt-1"})]}),cO=({name:t,channels:e,reach:n,status:r})=>{const s={live:"bg-green-500/10 text-green-400 border-green-500/20",reviewing:"bg-amber-500/10 text-amber-400 border-amber-500/20",pending:"bg-gray-500/10 text-gray-400 border-gray-500/20"};return c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[#1F2937]/30 last:border-0",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-white",children:t}),c.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:e.join(", ")})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"text-sm font-semibold text-white",children:n}),c.jsx("span",{className:`text - xs font - medium px - 2 py - 1 rounded border ${s[r]} capitalize`,children:r})]})]})},dO=()=>{const{userProfile:t}=kn(),e=Us(),[n,r]=A.useState([]),[s,i]=A.useState("all"),o=[{id:"DRAFT",label:"Drafting",count:3},{id:"IN_REVIEW",label:"In Review",count:2},{id:"APPROVED",label:"Approved",count:1}];A.useEffect(()=>{if(!(t!=null&&t.organizationId))return;const h=to(Xn(Le,"content"),Ms("organizationId","==",t.organizationId),ng("createdAt","desc")),m=al(h,p=>{const _=p.docs.map(I=>({id:I.id,...I.data()}));r(_)});return()=>m()},[t]);const l=async()=>{if(t!=null&&t.organizationId)try{const h={title:"Untitled Campaign",content:"",platform:"Instagram",status:"DRAFT",organizationId:t.organizationId,createdBy:t.email,createdAt:new Date},m=await sg(Xn(Le,"content"),h);e(`/editor/${m.id}`)}catch(h){console.error("Error creating campaign:",h)}};if(!(t!=null&&t.organizationId))return c.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading campaigns..."})]})});const u=h=>{switch(h==null?void 0:h.toLowerCase()){case"instagram":return c.jsx(Di,{size:14});case"twitter":return c.jsx(Qa,{size:14});case"linkedin":return c.jsx(Ka,{size:14});default:return c.jsx(Di,{size:14})}},d=h=>n.filter(m=>m.status===h);return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Campaign Workflow"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Manage your content pipeline with style."})]}),c.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-4 py-2 bg-[#6366F1] hover:bg-[#5558E3] text-white text-sm font-medium rounded-lg transition-colors",children:[c.jsx(Ku,{size:16}),"Create New Asset"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-white text-sm font-medium rounded-lg",children:"Filters"}),c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-gray-400 hover:text-white text-sm font-medium rounded-lg",children:"Instagram"}),c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-gray-400 hover:text-white text-sm font-medium rounded-lg",children:"LinkedIn"}),c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-gray-400 hover:text-white text-sm font-medium rounded-lg",children:"High Priority"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(h=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"text-sm font-semibold text-white uppercase tracking-wider",children:h.label}),c.jsx("span",{className:"px-2 py-0.5 bg-[#1F2937]/50 text-gray-400 text-xs font-semibold rounded",children:d(h.id).length})]}),c.jsx("button",{className:"text-gray-500 hover:text-white",children:c.jsx(yC,{size:16})})]}),c.jsxs("div",{className:"space-y-3",children:[d(h.id).map(m=>c.jsxs(ft,{to:`/editor/${m.id}`,className:"block bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-4 hover:border-[#6366F1]/50 transition-colors group",children:[c.jsx("div",{className:"w-full h-32 bg-[#1F2937]/30 rounded-lg mb-3 flex items-center justify-center",children:c.jsx("span",{className:"text-gray-600 text-sm",children:"Preview"})}),c.jsx("h4",{className:"text-sm font-semibold text-white mb-2 group-hover:text-[#6366F1] transition-colors",children:m.title||"Untitled Campaign"}),c.jsx("p",{className:"text-xs text-gray-500 mb-3 line-clamp-2",children:m.content||"No description yet..."}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-1 bg-[#1F2937]/50 text-gray-400 text-xs font-medium rounded",children:[u(m.platform),m.platform]})}),c.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center",children:c.jsx("span",{className:"text-white text-[10px] font-bold",children:"A"})})]})]},m.id)),c.jsxs("button",{onClick:l,className:"w-full p-4 border-2 border-dashed border-[#1F2937]/50 hover:border-[#6366F1]/50 rounded-xl text-gray-500 hover:text-white transition-colors",children:[c.jsx(Ku,{size:20,className:"mx-auto mb-1"}),c.jsx("span",{className:"text-sm font-medium",children:"Add Asset"})]})]})]},h.id))})]})},zi="AIzaSyB561_xWwbHvrjpLYzyvr5Hl1vFPQvDi1M",JT=async()=>"models/gemini-1.5-flash-latest",hO=t=>{const e=/#[\w]+/g;return t.match(e)||[]},Po=(t,e)=>{const r={instagram:30,twitter:2,linkedin:5,facebook:10}[e.toLowerCase()]||5;return t.slice(0,r)},Do=(t,e)=>{const r={instagram:2200,twitter:280,linkedin:3e3,facebook:63206}[e.toLowerCase()]||280;return{length:t.length,limit:r,withinLimit:t.length<=r,remaining:r-t.length}},ZT=async(t,e="Instagram",n="casual")=>{try{const r=await JT();console.log(` Using: ${r}`);const s={professional:"Use a professional, business-appropriate tone. Be clear, concise, and authoritative. Use minimal emojis (if any).",casual:"Use a friendly, conversational tone. Feel free to use emojis and casual language.",playful:"Use a fun, energetic, and playful tone. Use lots of emojis and exciting language!",inspirational:"Use an uplifting, motivational tone. Inspire and encourage the audience."},i={instagram:"Make it visually appealing with emojis. Include relevant hashtags (5-10).",twitter:"Keep it concise and punchy. Use 1-2 hashtags max. Must be under 280 characters.",linkedin:"Use a professional tone suitable for B2B audience. Include 3-5 relevant hashtags.",facebook:"Make it engaging and conversational. Can be longer form."},o=s[n.toLowerCase()]||s.casual,l=i[e.toLowerCase()]||i.instagram,u=`Write ONE ${e} post about "${t}".

Tone: ${o}
Platform: ${l}

DO NOT use markdown formatting (no **, >, etc.). Just write the plain text post ready to copy-paste.
${e.toLowerCase()==="twitter"?"CRITICAL: Must be under 280 characters total!":"Keep it under 200 words."}`,h=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/${r}:generateContent?key=${zi}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:u}]}]})})).json();if(h.candidates&&h.candidates.length>0){let m=h.candidates[0].content.parts[0].text;return m=m.replace(/\*\*/g,"").replace(/\*/g,"").replace(/^>\s*/gm,"").replace(/^#{1,6}\s/gm,"").trim(),console.log(" Caption generated!"),m}else return"Error: Model returned no text. Try again."}catch(r){return console.error("Caption Generation Error:",r),`Error: ${r.message}`}},eI=async t=>{try{const e="gemini-2.5-flash-image";console.log(` Using Nano Banana: ${e}`);const r=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/${e}:generateContent?key=${zi}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`Generate a high-quality image: ${t}. Make it professional and suitable for marketing/social media use.`}]}],generationConfig:{temperature:1,topP:.95}})})).json();if(r.candidates&&r.candidates.length>0){const i=r.candidates[0].content.parts.find(o=>{var l;return o.inline_data&&((l=o.inline_data.mime_type)==null?void 0:l.startsWith("image/"))});if(i)return console.log(" Image generated with Nano Banana!"),{success:!0,imageUrl:i.inline_data.data,isBase64:!0}}return r.error?(console.warn(" Nano Banana not available:",r.error.message),{success:!1,error:"Image generation not available with current API key.",suggestion:`For now, you can use this prompt with external tools like DALL-E, Midjourney, or Stable Diffusion:

"${t}"`}):{success:!1,error:"Image generation failed. The model might not be available yet.",suggestion:`Try this prompt with DALL-E or Midjourney:

"${t}"`}}catch(e){return console.error("Image Generation Error:",e),{success:!1,error:e.message,suggestion:`For now, use this prompt with external tools:

"${t}"`}}},fO=async(t,e)=>{const n=e.toLowerCase();try{const r=hO(t),s=t.replace(/#[\w]+/g,"").trim(),i={twitter:async()=>{let d=s;d.length>250&&(d=d.substring(0,247)+"...");const h=Po(r,"twitter");return h.length>0&&(d+=`

`+h.join(" ")),{content:d,hashtags:h,...Do(d,"twitter")}},instagram:async()=>{let d=s;const h=Po(r,"instagram");return d.length<2e3||(d=d.substring(0,2200-h.join(" ").length-10)),d+=`

`+h.join(" "),{content:d,hashtags:h,...Do(d,"instagram")}},linkedin:async()=>{try{const d=await JT(),h=`Rewrite this content for LinkedIn with a professional, B2B-appropriate tone. Keep key messages but make it suitable for business professionals:

"${s}"

Do NOT use markdown. Keep it under 250 words.`,p=await(await fetch(`https://generativelanguage.googleapis.com/v1beta/${d}:generateContent?key=${zi}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:h}]}]})})).json();let _=s;p.candidates&&p.candidates.length>0&&(_=p.candidates[0].content.parts[0].text.replace(/\*\*/g,"").replace(/\*/g,"").trim());const I=Po(r,"linkedin");return _+=`

`+I.join(" "),{content:_,hashtags:I,...Do(_,"linkedin")}}catch{const h=Po(r,"linkedin");return{content:s+`

`+h.join(" "),hashtags:h,...Do(s,"linkedin"),error:"Could not generate professional adaptation"}}},facebook:async()=>{const u=Po(r,"facebook"),d=t+(u.length>0&&!t.includes(u[0])?`

`+u.join(" "):"");return{content:d,hashtags:u,...Do(d,"facebook")}}},l=await(i[n]||i.instagram)();return{platform:e,success:!0,...l}}catch(r){return console.error(`Error adapting for ${n}:`,r),{platform:e,success:!1,error:r.message,content:t}}},tI=async t=>{const e=["instagram","twitter","linkedin","facebook"],n={};for(const r of e)n[r]=await fO(t,r);return n},mO=()=>{const{id:t}=K2(),e=Us(),{userProfile:n}=kn(),[r,s]=A.useState(""),[i,o]=A.useState(""),[l,u]=A.useState({platform:"Instagram",scheduledDate:"",status:"DRAFT"}),[d,h]=A.useState(""),[m,p]=A.useState("casual"),[_,I]=A.useState(!1),[b,C]=A.useState(!1),[E,y]=A.useState(""),[x,P]=A.useState(null),[M,F]=A.useState(!1),[S,w]=A.useState(!1),[T,k]=A.useState(null),[N,D]=A.useState(!1);A.useEffect(()=>{t&&(async()=>{const q=Ht(Le,"content",t),X=await rg(q);if(X.exists()){const ae=X.data();s(ae.title||""),o(ae.content||""),u({platform:ae.platform||"Instagram",scheduledDate:ae.scheduledDate||"",status:ae.status||"DRAFT"})}})()},[t]);const R=async()=>{if(n!=null&&n.organizationId){C(!0);try{const U=Ht(Le,"content",t);await gc(U,{title:r,content:i,platform:l.platform,scheduledDate:l.scheduledDate,status:l.status,organizationId:n.organizationId,updatedAt:new Date}),setTimeout(()=>C(!1),1e3)}catch(U){console.error("Error saving:",U),C(!1)}}},Fe=async()=>{if(d){I(!0);try{const U=await ZT(d,l.platform,m);o(q=>q+`

`+U)}catch(U){console.error("Error generating content:",U)}I(!1)}},Yt=async()=>{if(E){F(!0);try{const U=await eI(E);P(U)}catch(U){P({success:!1,error:U.message})}F(!1)}},Zr=async()=>{if(i.trim()){D(!0),w(!0);try{const U=await tI(i);k(U)}catch(U){k({error:U.message})}D(!1)}},es=U=>{navigator.clipboard.writeText(U)};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:()=>e("/campaigns"),className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors",children:c.jsx(Kk,{size:20,className:"text-gray-400"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-white",children:"Content Editor"}),c.jsx("p",{className:"text-sm text-gray-400",children:"Craft your marketing masterpiece"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsxs("button",{onClick:R,disabled:b,className:"flex items-center gap-2 px-4 py-2 bg-[#1F2937]/50 hover:bg-[#1F2937] text-white text-sm font-medium rounded-lg transition-colors disabled:opacity-50",children:[c.jsx(ZC,{size:16}),b?"Saving...":"Save Draft"]}),c.jsx("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#6366F1] hover:bg-[#5558E3] text-white text-sm font-medium rounded-lg transition-colors",children:"Publish"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[c.jsx("input",{type:"text",value:r,onChange:U=>s(U.target.value),placeholder:"Campaign Title...",className:"w-full bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl px-6 py-4 text-2xl font-bold text-white placeholder-gray-600 outline-none focus:border-[#6366F1]/50 transition-colors"}),c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl",children:[c.jsx("button",{className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:c.jsx(Zk,{size:18})}),c.jsx("button",{className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:c.jsx(AC,{size:18})}),c.jsx("button",{className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:c.jsx(OC,{size:18})}),c.jsx("button",{className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:c.jsx(FC,{size:18})}),c.jsx("div",{className:"flex-1"}),c.jsx("button",{className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors text-gray-400 hover:text-white",children:c.jsx(k_,{size:18})})]}),c.jsx("textarea",{value:i,onChange:U=>o(U.target.value),placeholder:"Start writing your content...",className:"w-full h-[500px] bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 text-white placeholder-gray-600 outline-none focus:border-[#6366F1]/50 transition-colors resize-none"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[#6366F1]",children:[c.jsx(yR,{size:20}),c.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wider",children:"AI Caption Generator"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Platform"}),c.jsxs("select",{value:l.platform,onChange:U=>u({...l,platform:U.target.value}),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-[#6366F1]/50 transition-colors",children:[c.jsx("option",{children:"Instagram"}),c.jsx("option",{children:"Twitter"}),c.jsx("option",{children:"LinkedIn"}),c.jsx("option",{children:"Facebook"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Tone"}),c.jsxs("select",{value:m,onChange:U=>p(U.target.value),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-[#6366F1]/50 transition-colors",children:[c.jsx("option",{value:"professional",children:" Professional"}),c.jsx("option",{value:"casual",children:" Casual"}),c.jsx("option",{value:"playful",children:" Playful"}),c.jsx("option",{value:"inspirational",children:" Inspirational"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Topic / Prompt"}),c.jsx("textarea",{value:d,onChange:U=>h(U.target.value),placeholder:"e.g. Summer Sale announcement...",className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg p-3 text-white text-sm placeholder-gray-600 outline-none focus:border-[#6366F1]/50 transition-colors h-20 resize-none"})]}),c.jsx("button",{onClick:Fe,disabled:_||!d,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] hover:from-[#5558E3] hover:to-[#7C3AED] text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:_?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qu,{size:16}),"Generate Caption"]})})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[#3B82F6]",children:[c.jsx(Pi,{size:20}),c.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wider",children:"AI Image Generator"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Image Description"}),c.jsx("textarea",{value:E,onChange:U=>y(U.target.value),placeholder:"e.g. Modern tech startup team collaborating...",className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg p-3 text-white text-sm placeholder-gray-600 outline-none focus:border-[#3B82F6]/50 transition-colors h-20 resize-none"})]}),c.jsx("button",{onClick:Yt,disabled:M||!E,className:"w-full flex items-center justify-center gap-2 py-2.5 bg-gradient-to-r from-[#3B82F6] to-[#2563EB] hover:from-[#2563EB] hover:to-[#1D4ED8] text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:M?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Generating..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Pi,{size:16}),"Generate Image"]})}),x&&c.jsx("div",{className:"mt-3 p-3 bg-[#1F2937]/30 rounded-lg border border-[#1F2937]/50",children:x.success?c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-green-400 mb-2",children:" Image Generated!"}),x.isBase64?c.jsx("img",{src:`data:image/png;base64,${x.imageUrl}`,alt:"Generated",className:"w-full rounded-lg"}):c.jsx("img",{src:x.imageUrl,alt:"Generated",className:"w-full rounded-lg"})]}):c.jsxs("div",{children:[c.jsxs("p",{className:"text-xs font-medium text-yellow-400 mb-2",children:[" ",x.error]}),x.suggestion&&c.jsx("p",{className:"text-xs text-gray-400 mt-2 whitespace-pre-wrap",children:x.suggestion})]})})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2 text-[#10B981]",children:[c.jsx(vi,{size:20}),c.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wider",children:"Multi-Platform Adapter"})]}),c.jsx("p",{className:"text-xs text-gray-400",children:"Adapt your content for all platforms instantly"}),c.jsx("button",{onClick:Zr,disabled:N||!i.trim(),className:"w-full flex items-center justify-center gap-2 py-2.5 bg-gradient-to-r from-[#10B981] to-[#059669] hover:from-[#059669] hover:to-[#047857] text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm",children:N?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Adapting..."]}):c.jsxs(c.Fragment,{children:[c.jsx(vi,{size:16}),"Adapt for All Platforms"]})})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 space-y-4",children:[c.jsx("h3",{className:"font-semibold text-white text-sm",children:"Post Settings"}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Status"}),c.jsxs("select",{value:l.status,onChange:U=>u({...l,status:U.target.value}),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-[#6366F1]/50 transition-colors",children:[c.jsx("option",{value:"DRAFT",children:"Draft"}),c.jsx("option",{value:"IN_REVIEW",children:"In Review"}),c.jsx("option",{value:"APPROVED",children:"Approved"}),c.jsx("option",{value:"SCHEDULED",children:"Scheduled"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2 block",children:"Schedule Date"}),c.jsx("input",{type:"date",value:l.scheduledDate,onChange:U=>u({...l,scheduledDate:U.target.value}),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg px-3 py-2 text-white text-sm outline-none focus:border-[#6366F1]/50 transition-colors"})]})]})]})]}),S&&c.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-6",children:c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vi,{className:"text-[#10B981]",size:24}),c.jsx("h2",{className:"text-2xl font-bold text-white",children:"Multi-Platform Content Adapter"})]}),c.jsx("button",{onClick:()=>w(!1),className:"p-2 hover:bg-[#1F2937]/50 rounded-lg transition-colors",children:c.jsx(ox,{size:20,className:"text-gray-400"})})]}),T&&!T.error?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["instagram","twitter","linkedin","facebook"].map(U=>{const q=T[U],X={instagram:"border-pink-500/50 bg-pink-500/5",twitter:"border-blue-500/50 bg-blue-500/5",linkedin:"border-indigo-500/50 bg-indigo-500/5",facebook:"border-blue-400/50 bg-blue-400/5"};return c.jsxs("div",{className:`p-4 rounded-lg border-2 ${X[U]}`,children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h3",{className:"font-bold text-lg capitalize text-white",children:U}),c.jsxs("button",{onClick:()=>es(q.content),className:"px-3 py-1 bg-[#1F2937]/50 hover:bg-[#1F2937] text-white text-xs font-medium rounded transition-colors flex items-center gap-1",children:[c.jsx(k_,{size:12}),"Copy"]})]}),c.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-wrap mb-3 min-h-[100px]",children:q.content}),c.jsxs("div",{className:"flex justify-between items-center text-xs",children:[c.jsxs("span",{className:"text-gray-400",children:["Chars: ",q.length,"/",q.limit]}),c.jsx("span",{className:q.withinLimit?"text-green-400 font-semibold":"text-red-400 font-semibold",children:q.withinLimit?" Within limit":" Exceeds limit"})]}),q.hashtags&&q.hashtags.length>0&&c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Hashtags: ",q.hashtags.length]})]},U)})}):T!=null&&T.error?c.jsx("div",{className:"p-4 bg-red-500/10 rounded-lg border border-red-500/20",children:c.jsxs("p",{className:"text-sm font-medium text-red-400",children:["Error: ",T.error]})}):c.jsx("div",{className:"flex items-center justify-center py-12",children:c.jsx("div",{className:"w-8 h-8 border-2 border-[#10B981]/30 border-t-[#10B981] rounded-full animate-spin"})})]})})]})},pO=()=>{const{userProfile:t}=kn(),[e,n]=A.useState(new Date),[r,s]=A.useState([]),i=e.getFullYear(),o=e.getMonth(),l=new Date(i,o,1),d=new Date(i,o+1,0).getDate(),h=l.getDay(),m=["January","February","March","April","May","June","July","August","September","October","November","December"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];A.useEffect(()=>{if(!(t!=null&&t.organizationId))return;const y=to(Xn(Le,"content"),Ms("organizationId","==",t.organizationId),Ms("status","in",["SCHEDULED","APPROVED"])),x=al(y,P=>{const M=P.docs.map(F=>({id:F.id,...F.data()}));s(M),setIsLoading(!1)},P=>{console.error("Error fetching posts: ",P),setIsLoading(!1)});return()=>x()},[t]);const _=y=>{n(new Date(i,o+y,1))},I=y=>{const x=new Date(i,o,y).toISOString().split("T")[0];return r.filter(P=>P.scheduledDate?new Date(P.scheduledDate).toISOString().split("T")[0]===x:!1)},b=y=>{switch(y==null?void 0:y.toLowerCase()){case"instagram":return"bg-pink-500";case"twitter":return"bg-sky-500";case"linkedin":return"bg-blue-600";default:return"bg-gray-500"}},C=[];for(let y=0;y<h;y++)C.push(null);for(let y=1;y<=d;y++)C.push(y);const E=y=>{const x=new Date;return y===x.getDate()&&o===x.getMonth()&&i===x.getFullYear()};return t!=null&&t.organizationId?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Calendar"}),c.jsx("p",{className:"text-gray-400 text-sm",children:"Visual scheduling for your campaigns"})]}),c.jsxs(ft,{to:"/editor",className:"flex items-center gap-2 px-4 py-2 bg-[#6366F1] hover:bg-[#5558E3] text-white text-sm font-medium rounded-lg transition-colors",children:[c.jsx(Ku,{size:16}),"New Post"]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-white",children:[m[o]," ",i]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>_(-1),className:"p-2 hover:bg-[#1F2937]/50 rounded-lg text-gray-400 hover:text-white transition-colors",children:c.jsx(uC,{size:20})}),c.jsx("button",{onClick:()=>n(new Date),className:"px-4 py-2 hover:bg-[#1F2937]/50 rounded-lg text-gray-400 hover:text-white text-sm font-medium transition-colors",children:"Today"}),c.jsx("button",{onClick:()=>_(1),className:"p-2 hover:bg-[#1F2937]/50 rounded-lg text-gray-400 hover:text-white transition-colors",children:c.jsx(dC,{size:20})})]})]}),c.jsxs("div",{className:"flex gap-2 mb-6",children:[c.jsx("button",{className:"px-3 py-1.5 bg-[#6366F1] text-white text-sm font-medium rounded-lg",children:"MONTH"}),c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-gray-400 hover:text-white text-sm font-medium rounded-lg",children:"WEEK"}),c.jsx("button",{className:"px-3 py-1.5 bg-[#1F2937]/50 text-gray-400 hover:text-white text-sm font-medium rounded-lg",children:"DAY"})]}),c.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:p.map(y=>c.jsx("div",{className:"text-center text-xs font-semibold text-gray-500 uppercase tracking-wider py-2",children:y},y))}),c.jsx("div",{className:"grid grid-cols-7 gap-2",children:C.map((y,x)=>{if(y===null)return c.jsx("div",{},`empty-${x}`);const P=I(y),M=E(y);return c.jsxs("div",{className:`min-h-[100px] p-2 rounded-lg border transition-colors ${M?"border-[#6366F1] bg-[#6366F1]/5":"border-[#1F2937]/50 hover:border-[#1F2937]"}`,children:[c.jsx("div",{className:`text-sm font-semibold mb-2 ${M?"text-[#6366F1]":"text-gray-400"}`,children:y}),c.jsxs("div",{className:"space-y-1",children:[P.slice(0,2).map(F=>c.jsx(ft,{to:`/editor/${F.id}`,className:`block text-[10px] font-medium px-2 py-1 rounded text-white truncate hover:opacity-80 transition-opacity ${b(F.platform)}`,title:F.title,children:F.title||"Untitled"},F.id)),P.length>2&&c.jsxs("div",{className:"text-[10px] text-gray-500 px-2",children:["+",P.length-2," more"]})]})]},y)})})]})]}):c.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading calendar..."})]})})},gO=()=>{const{userProfile:t}=kn(),[e,n]=A.useState([]),[r,s]=A.useState({totalImpressions:0,engagementRate:0,followersGrowth:0,conversionRate:0}),[i,o]=A.useState({Instagram:{reach:0,engagement:0,count:0},Twitter:{reach:0,engagement:0,count:0},LinkedIn:{reach:0,engagement:0,count:0}});A.useEffect(()=>{if(!(t!=null&&t.organizationId))return;const h=to(Xn(Le,"content"),Ms("organizationId","==",t.organizationId),ng("createdAt","desc")),m=al(h,p=>{const _=p.docs.map(I=>({id:I.id,...I.data()}));n(_),l(_)});return()=>m()},[t]);const l=h=>{const m=h.length,p=m*25e3,_={Instagram:{reach:0,engagement:0,count:0},Twitter:{reach:0,engagement:0,count:0},LinkedIn:{reach:0,engagement:0,count:0}};h.forEach(I=>{const b=I.platform||"Instagram";_[b]&&(_[b].count++,_[b].reach+=5e4,_[b].engagement+=Math.random()*10)}),Object.keys(_).forEach(I=>{_[I].count>0&&(_[I].engagement=(_[I].engagement/_[I].count).toFixed(1))}),o(_),s({totalImpressions:p,engagementRate:(5+Math.random()*3).toFixed(1),followersGrowth:Math.floor(m*50),conversionRate:(2+Math.random()*2).toFixed(1)})},u=h=>h>=1e6?(h/1e6).toFixed(1)+"M":h>=1e3?(h/1e3).toFixed(1)+"K":h.toString(),d=()=>e.filter(h=>h.status==="APPROVED"||h.status==="SCHEDULED").slice(0,4).map(h=>({title:h.title||"Untitled Post",platform:h.platform||"Instagram",impressions:u(Math.floor(Math.random()*2e5)+5e4),engagement:(Math.random()*8+4).toFixed(1)+"%"}));return t!=null&&t.organizationId?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Analytics"}),c.jsxs("p",{className:"text-gray-400 text-sm",children:["Track your campaign performance metrics  ",e.length," total posts"]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsx(Ql,{title:"Total Impressions",value:u(r.totalImpressions),change:"+12.5%",icon:nx,trend:"up"}),c.jsx(Ql,{title:"Engagement Rate",value:`${r.engagementRate}%`,change:"+2.3%",icon:QC,trend:"up"}),c.jsx(Ql,{title:"Followers Growth",value:`+${r.followersGrowth}`,change:"+8.1%",icon:ix,trend:"up"}),c.jsx(Ql,{title:"Conversion Rate",value:`${r.conversionRate}%`,change:"-0.4%",icon:rp,trend:"down"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Platform Performance"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(kh,{icon:Di,name:"Instagram",reach:u(i.Instagram.reach),engagement:`${i.Instagram.engagement}%`,growth:`+${i.Instagram.count} posts`,color:"from-pink-500 to-purple-500"}),c.jsx(kh,{icon:Qa,name:"Twitter",reach:u(i.Twitter.reach),engagement:`${i.Twitter.engagement}%`,growth:`+${i.Twitter.count} posts`,color:"from-sky-400 to-blue-500"}),c.jsx(kh,{icon:Ka,name:"LinkedIn",reach:u(i.LinkedIn.reach),engagement:`${i.LinkedIn.engagement}%`,growth:`+${i.LinkedIn.count} posts`,color:"from-blue-600 to-blue-700"})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Top Performing Posts"}),c.jsx("div",{className:"space-y-4",children:d().length>0?d().map((h,m)=>c.jsx(yO,{...h},m)):c.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No posts yet. Create some content to see analytics!"})})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white",children:"Engagement Trend (Last 14 Days)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-gray-400 hover:text-white bg-[#1F2937]/50 rounded-lg",children:"7D"}),c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-white bg-[#6366F1] rounded-lg",children:"14D"}),c.jsx("button",{className:"px-3 py-1 text-xs font-medium text-gray-400 hover:text-white bg-[#1F2937]/50 rounded-lg",children:"30D"})]})]}),c.jsx("div",{className:"h-64 flex items-end justify-between gap-2",children:[65,70,68,75,72,80,78,85,82,88,86,91,89,94].map((h,m)=>c.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[c.jsx("div",{className:"w-full relative",style:{height:`${h}%`},children:c.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#6366F1]/30 to-[#6366F1]/10 rounded-t-lg border-t-2 border-[#6366F1]"})}),c.jsx("span",{className:"text-[10px] text-gray-500 font-medium",children:m+1})]},m))})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Age Groups"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ls,{label:"18-24",percentage:28}),c.jsx(ls,{label:"25-34",percentage:42}),c.jsx(ls,{label:"35-44",percentage:20}),c.jsx(ls,{label:"45+",percentage:10})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Gender Distribution"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(ls,{label:"Female",percentage:58,color:"bg-pink-500"}),c.jsx(ls,{label:"Male",percentage:40,color:"bg-blue-500"}),c.jsx(ls,{label:"Other",percentage:2,color:"bg-purple-500"})]})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Locations"}),c.jsxs("div",{className:"space-y-3",children:[c.jsx(Yl,{city:"New York",percentage:24}),c.jsx(Yl,{city:"Los Angeles",percentage:18}),c.jsx(Yl,{city:"Chicago",percentage:14}),c.jsx(Yl,{city:"Houston",percentage:12})]})]})]})]}):c.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading analytics..."})]})})},Ql=({title:t,value:e,change:n,icon:r,trend:s})=>c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx(r,{size:20,className:"text-gray-400"}),c.jsxs("span",{className:`text-xs font-semibold flex items-center gap-1 ${s==="up"?"text-green-400":"text-red-400"}`,children:[c.jsx(Yk,{size:12,className:s==="down"?"rotate-90":""}),n]})]}),c.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:e}),c.jsx("div",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:t})]}),kh=({icon:t,name:e,reach:n,engagement:r,growth:s,color:i})=>c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${i} flex items-center justify-center`,children:c.jsx(t,{size:20,className:"text-white"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-semibold text-white",children:e}),c.jsxs("p",{className:"text-xs text-gray-500",children:[n," reach"]})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-semibold text-white",children:r}),c.jsx("p",{className:"text-xs text-green-400",children:s})]})]}),yO=({title:t,platform:e,impressions:n,engagement:r})=>c.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-[#1F2937]/30 last:border-0",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-white mb-1",children:t}),c.jsx("p",{className:"text-xs text-gray-500",children:e})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-sm font-semibold text-white",children:n}),c.jsxs("p",{className:"text-xs text-green-400",children:[r," eng."]})]})]}),ls=({label:t,percentage:e,color:n="bg-[#6366F1]"})=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[c.jsx("span",{className:"text-sm text-gray-400",children:t}),c.jsxs("span",{className:"text-sm font-semibold text-white",children:[e,"%"]})]}),c.jsx("div",{className:"w-full h-2 bg-[#1F2937]/50 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full ${n} rounded-full transition-all`,style:{width:`${e}%`}})})]}),Yl=({city:t,percentage:e})=>c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-400",children:t}),c.jsxs("span",{className:"text-sm font-semibold text-white",children:[e,"%"]})]}),_O=()=>{const{userProfile:t}=kn(),[e,n]=A.useState([]),[r,s]=A.useState(""),[i,o]=A.useState("all"),[l,u]=A.useState(!1),[d,h]=A.useState(0);A.useEffect(()=>{if(!(t!=null&&t.organizationId))return;const C=to(Xn(Le,"assets"),Ms("organizationId","==",t.organizationId)),E=al(C,y=>{const x=y.docs.map(P=>({id:P.id,...P.data()}));n(x)});return()=>E()},[t]);const m=async C=>{const E=C.target.files;if(!(!E||E.length===0)){u(!0);try{for(const y of E){const x=h0(f0,`assets/${Date.now()}_${y.name}`),P=Xj(x,y);P.on("state_changed",M=>{const F=M.bytesTransferred/M.totalBytes*100;h(F)},M=>{console.error("Upload error:",M),u(!1)},async()=>{const M=await Jj(P.snapshot.ref);let F="document";y.type.startsWith("image/")?F="image":y.type.startsWith("video/")&&(F="video"),await sg(Xn(Le,"assets"),{name:y.name,type:F,size:`${(y.size/1024/1024).toFixed(2)} MB`,url:M,storagePath:P.snapshot.ref.fullPath,organizationId:t.organizationId,uploadedAt:new Date().toISOString(),createdAt:new Date}),h(0)})}}catch(y){console.error("Error uploading files:",y)}finally{u(!1)}}},p=async C=>{if(confirm(`Delete "${C.name}"?`))try{const E=h0(f0,C.storagePath);await Zj(E),await U3(Ht(Le,"assets",C.id))}catch(E){console.error("Error deleting asset:",E)}},_=C=>{const E=document.createElement("a");E.href=C.url,E.download=C.name,E.click()},I=e.filter(C=>{const E=C.name.toLowerCase().includes(r.toLowerCase()),y=i==="all"||C.type===i;return E&&y}),b=C=>{switch(C){case"image":return c.jsx(Pi,{size:40,className:"text-blue-400"});case"video":return c.jsx(pR,{size:40,className:"text-purple-400"});default:return c.jsx(TC,{size:40,className:"text-gray-400"})}};return t!=null&&t.organizationId?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Assets"}),c.jsxs("p",{className:"text-gray-400 text-sm",children:["Centralized storage for all your marketing assets  ",e.length," files"]})]}),c.jsxs("label",{className:"relative cursor-pointer",children:[c.jsx("input",{type:"file",multiple:!0,accept:"image/*,video/*,.pdf,.doc,.docx",onChange:m,className:"hidden",disabled:l}),c.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 bg-[#6366F1] hover:bg-[#5558E3] text-white text-sm font-medium rounded-lg transition-colors ${l?"opacity-50 cursor-not-allowed":""}`,children:[c.jsx(R_,{size:16}),l?`Uploading... ${d.toFixed(0)}%`:"Upload Assets"]})]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(sx,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"text",placeholder:"Search assets...",value:r,onChange:C=>s(C.target.value),className:"w-full bg-[#0B0C15] border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-2.5 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>o("all"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i==="all"?"bg-[#6366F1] text-white":"bg-[#1F2937]/50 text-gray-400 hover:text-white"}`,children:"All"}),c.jsx("button",{onClick:()=>o("image"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i==="image"?"bg-[#6366F1] text-white":"bg-[#1F2937]/50 text-gray-400 hover:text-white"}`,children:"Images"}),c.jsx("button",{onClick:()=>o("video"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i==="video"?"bg-[#6366F1] text-white":"bg-[#1F2937]/50 text-gray-400 hover:text-white"}`,children:"Videos"}),c.jsx("button",{onClick:()=>o("document"),className:`px-3 py-2 text-sm font-medium rounded-lg transition-colors ${i==="document"?"bg-[#6366F1] text-white":"bg-[#1F2937]/50 text-gray-400 hover:text-white"}`,children:"Documents"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:I.map(C=>c.jsxs("div",{className:"group bg-[#0B0C15] border border-[#1F2937]/50 rounded-xl p-4 hover:border-[#6366F1]/50 transition-all",children:[c.jsx("div",{className:"w-full h-40 bg-[#1F2937]/30 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:C.type==="image"?c.jsx("img",{src:C.url,alt:C.name,className:"w-full h-full object-cover"}):b(C.type)}),c.jsx("h3",{className:"text-sm font-semibold text-white mb-1 truncate",title:C.name,children:C.name}),c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-3",children:[c.jsx("span",{children:C.size}),c.jsx("span",{children:new Date(C.uploadedAt).toLocaleDateString()})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[c.jsx("a",{href:C.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-[#1F2937]/50 hover:bg-[#1F2937] rounded-lg text-xs text-gray-400 hover:text-white transition-colors",children:c.jsx(nx,{size:14})}),c.jsx("button",{onClick:()=>_(C),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-[#1F2937]/50 hover:bg-[#1F2937] rounded-lg text-xs text-gray-400 hover:text-white transition-colors",children:c.jsx(pC,{size:14})}),c.jsx("button",{onClick:()=>p(C),className:"flex items-center justify-center gap-1 px-2 py-1.5 bg-red-500/10 hover:bg-red-500/20 rounded-lg text-xs text-red-400 hover:text-red-300 transition-colors",children:c.jsx(aR,{size:14})})]})]},C.id))}),I.length===0&&!l&&c.jsxs("div",{className:"text-center py-16",children:[c.jsx(R_,{size:48,className:"mx-auto mb-4 text-gray-600"}),c.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No assets found"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Upload your first asset to get started"})]})]}):c.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30 animate-pulse",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("p",{className:"text-gray-400",children:"Loading assets..."})]})})},nI=6048e5,vO=864e5,Xl=43200,m0=1440,p0=Symbol.for("constructDateFrom");function Zn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&p0 in t?t[p0](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ge(t,e){return Zn(e||t,t)}let wO={};function ul(){return wO}function Ua(t,e){var l,u,d,h;const n=ul(),r=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??n.weekStartsOn??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=Ge(t,e==null?void 0:e.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function _c(t,e){return Ua(t,{...e,weekStartsOn:1})}function rI(t,e){const n=Ge(t,e==null?void 0:e.in),r=n.getFullYear(),s=Zn(n,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=_c(s),o=Zn(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=_c(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=l.getTime()?r:r-1}function vc(t){const e=Ge(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function hd(t,...e){const n=Zn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function g0(t,e){const n=Ge(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function xO(t,e,n){const[r,s]=hd(n==null?void 0:n.in,t,e),i=g0(r),o=g0(s),l=+i-vc(i),u=+o-vc(o);return Math.round((l-u)/vO)}function EO(t,e){const n=rI(t,e),r=Zn(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),_c(r)}function Eu(t,e){const n=+Ge(t)-+Ge(e);return n<0?-1:n>0?1:n}function TO(t){return Zn(t,Date.now())}function IO(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bO(t){return!(!IO(t)&&typeof t!="number"||isNaN(+Ge(t)))}function SO(t,e,n){const[r,s]=hd(n==null?void 0:n.in,t,e),i=r.getFullYear()-s.getFullYear(),o=r.getMonth()-s.getMonth();return i*12+o}function kO(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function CO(t,e){return+Ge(t)-+Ge(e)}function RO(t,e){const n=Ge(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function NO(t,e){const n=Ge(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function AO(t,e){const n=Ge(t,e==null?void 0:e.in);return+RO(n,e)==+NO(n,e)}function PO(t,e,n){const[r,s,i]=hd(n==null?void 0:n.in,t,t,e),o=Eu(s,i),l=Math.abs(SO(s,i));if(l<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-o*l);let u=Eu(s,i)===-o;AO(r)&&l===1&&Eu(r,i)===1&&(u=!1);const d=o*(l-+u);return d===0?0:d}function DO(t,e,n){const r=CO(t,e)/1e3;return kO(n==null?void 0:n.roundingMethod)(r)}function jO(t,e){const n=Ge(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const OO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},MO=(t,e,n)=>{let r;const s=OO[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Ch(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const LO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},FO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},UO={date:Ch({formats:LO,defaultWidth:"full"}),time:Ch({formats:FO,defaultWidth:"full"}),dateTime:Ch({formats:VO,defaultWidth:"full"})},zO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},BO=(t,e,n,r)=>zO[t];function jo(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):o;s=t.formattingValues[l]||t.formattingValues[o]}else{const o=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[o]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const $O={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},WO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},HO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},qO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},GO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},KO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},QO=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},YO={ordinalNumber:QO,era:jo({values:$O,defaultWidth:"wide"}),quarter:jo({values:WO,defaultWidth:"wide",argumentCallback:t=>t-1}),month:jo({values:HO,defaultWidth:"wide"}),day:jo({values:qO,defaultWidth:"wide"}),dayPeriod:jo({values:GO,defaultWidth:"wide",formattingValues:KO,defaultFormattingWidth:"wide"})};function Oo(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?JO(l,m=>m.test(o)):XO(l,m=>m.test(o));let d;d=t.valueCallback?t.valueCallback(u):u,d=n.valueCallback?n.valueCallback(d):d;const h=e.slice(o.length);return{value:d,rest:h}}}function XO(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function JO(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function ZO(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],i=e.match(t.parsePattern);if(!i)return null;let o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const l=e.slice(s.length);return{value:o,rest:l}}}const eM=/^(\d+)(th|st|nd|rd)?/i,tM=/\d+/i,nM={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rM={any:[/^b/i,/^(a|c)/i]},sM={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},iM={any:[/1/i,/2/i,/3/i,/4/i]},oM={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aM={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lM={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},uM={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cM={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dM={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},hM={ordinalNumber:ZO({matchPattern:eM,parsePattern:tM,valueCallback:t=>parseInt(t,10)}),era:Oo({matchPatterns:nM,defaultMatchWidth:"wide",parsePatterns:rM,defaultParseWidth:"any"}),quarter:Oo({matchPatterns:sM,defaultMatchWidth:"wide",parsePatterns:iM,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Oo({matchPatterns:oM,defaultMatchWidth:"wide",parsePatterns:aM,defaultParseWidth:"any"}),day:Oo({matchPatterns:lM,defaultMatchWidth:"wide",parsePatterns:uM,defaultParseWidth:"any"}),dayPeriod:Oo({matchPatterns:cM,defaultMatchWidth:"any",parsePatterns:dM,defaultParseWidth:"any"})},sI={code:"en-US",formatDistance:MO,formatLong:UO,formatRelative:BO,localize:YO,match:hM,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fM(t,e){const n=Ge(t,e==null?void 0:e.in);return xO(n,jO(n))+1}function mM(t,e){const n=Ge(t,e==null?void 0:e.in),r=+_c(n)-+EO(n);return Math.round(r/nI)+1}function iI(t,e){var h,m,p,_;const n=Ge(t,e==null?void 0:e.in),r=n.getFullYear(),s=ul(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((_=(p=s.locale)==null?void 0:p.options)==null?void 0:_.firstWeekContainsDate)??1,o=Zn((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=Ua(o,e),u=Zn((e==null?void 0:e.in)||t,0);u.setFullYear(r,0,i),u.setHours(0,0,0,0);const d=Ua(u,e);return+n>=+l?r+1:+n>=+d?r:r-1}function pM(t,e){var l,u,d,h;const n=ul(),r=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(d=n.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=iI(t,e),i=Zn((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),Ua(i,e)}function gM(t,e){const n=Ge(t,e==null?void 0:e.in),r=+Ua(n,e)-+pM(n,e);return Math.round(r/nI)+1}function ue(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const fr={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ue(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ue(n+1,2)},d(t,e){return ue(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ue(t.getHours()%12||12,e.length)},H(t,e){return ue(t.getHours(),e.length)},m(t,e){return ue(t.getMinutes(),e.length)},s(t,e){return ue(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),s=Math.trunc(r*Math.pow(10,n-3));return ue(s,e.length)}},Ys={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},y0={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),s=r>0?r:1-r;return n.ordinalNumber(s,{unit:"year"})}return fr.y(t,e)},Y:function(t,e,n,r){const s=iI(t,r),i=s>0?s:1-s;if(e==="YY"){const o=i%100;return ue(o,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):ue(i,e.length)},R:function(t,e){const n=rI(t);return ue(n,e.length)},u:function(t,e){const n=t.getFullYear();return ue(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ue(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ue(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return fr.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ue(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const s=gM(t,r);return e==="wo"?n.ordinalNumber(s,{unit:"week"}):ue(s,e.length)},I:function(t,e,n){const r=mM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ue(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):fr.d(t,e)},D:function(t,e,n){const r=fM(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ue(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return ue(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(s,{width:"short",context:"formatting"});case"eeee":default:return n.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const s=t.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return ue(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(s,{width:"narrow",context:"standalone"});case"cccccc":return n.day(s,{width:"short",context:"standalone"});case"cccc":default:return n.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),s=r===0?7:r;switch(e){case"i":return String(s);case"ii":return ue(s,e.length);case"io":return n.ordinalNumber(s,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let s;switch(r===12?s=Ys.noon:r===0?s=Ys.midnight:s=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let s;switch(r>=17?s=Ys.evening:r>=12?s=Ys.afternoon:r>=4?s=Ys.morning:s=Ys.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return fr.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):fr.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ue(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ue(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):fr.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):fr.s(t,e)},S:function(t,e){return fr.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return v0(r);case"XXXX":case"XX":return hs(r);case"XXXXX":case"XXX":default:return hs(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return v0(r);case"xxxx":case"xx":return hs(r);case"xxxxx":case"xxx":default:return hs(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_0(r,":");case"OOOO":default:return"GMT"+hs(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_0(r,":");case"zzzz":default:return"GMT"+hs(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ue(r,e.length)},T:function(t,e,n){return ue(+t,e.length)}};function _0(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=Math.trunc(r/60),i=r%60;return i===0?n+String(s):n+String(s)+e+ue(i,2)}function v0(t,e){return t%60===0?(t>0?"-":"+")+ue(Math.abs(t)/60,2):hs(t,e)}function hs(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),s=ue(Math.trunc(r/60),2),i=ue(r%60,2);return n+s+e+i}const w0=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oI=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},yM=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],s=n[2];if(!s)return w0(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",w0(r,e)).replace("{{time}}",oI(s,e))},_M={p:oI,P:yM},vM=/^D+$/,wM=/^Y+$/,xM=["D","DD","YY","YYYY"];function EM(t){return vM.test(t)}function TM(t){return wM.test(t)}function IM(t,e,n){const r=bM(t,e,n);if(console.warn(r),xM.includes(t))throw new RangeError(r)}function bM(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const SM=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kM=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CM=/^'([^]*?)'?$/,RM=/''/g,NM=/[a-zA-Z]/;function AM(t,e,n){var h,m,p,_;const r=ul(),s=r.locale??sI,i=r.firstWeekContainsDate??((m=(h=r.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=r.weekStartsOn??((_=(p=r.locale)==null?void 0:p.options)==null?void 0:_.weekStartsOn)??0,l=Ge(t,n==null?void 0:n.in);if(!bO(l))throw new RangeError("Invalid time value");let u=e.match(kM).map(I=>{const b=I[0];if(b==="p"||b==="P"){const C=_M[b];return C(I,s.formatLong)}return I}).join("").match(SM).map(I=>{if(I==="''")return{isToken:!1,value:"'"};const b=I[0];if(b==="'")return{isToken:!1,value:PM(I)};if(y0[b])return{isToken:!0,value:I};if(b.match(NM))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:I}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return u.map(I=>{if(!I.isToken)return I.value;const b=I.value;(TM(b)||EM(b))&&IM(b,e,String(t));const C=y0[b[0]];return C(l,b,s.localize,d)}).join("")}function PM(t){const e=t.match(CM);return e?e[1].replace(RM,"'"):t}function DM(t,e,n){const r=ul(),s=(n==null?void 0:n.locale)??r.locale??sI,i=2520,o=Eu(t,e);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[u,d]=hd(n==null?void 0:n.in,...o>0?[e,t]:[t,e]),h=DO(d,u),m=(vc(d)-vc(u))/1e3,p=Math.round((h-m)/60);let _;if(p<2)return n!=null&&n.includeSeconds?h<5?s.formatDistance("lessThanXSeconds",5,l):h<10?s.formatDistance("lessThanXSeconds",10,l):h<20?s.formatDistance("lessThanXSeconds",20,l):h<40?s.formatDistance("halfAMinute",0,l):h<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):p===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",p,l);if(p<45)return s.formatDistance("xMinutes",p,l);if(p<90)return s.formatDistance("aboutXHours",1,l);if(p<m0){const I=Math.round(p/60);return s.formatDistance("aboutXHours",I,l)}else{if(p<i)return s.formatDistance("xDays",1,l);if(p<Xl){const I=Math.round(p/m0);return s.formatDistance("xDays",I,l)}else if(p<Xl*2)return _=Math.round(p/Xl),s.formatDistance("aboutXMonths",_,l)}if(_=PO(d,u),_<12){const I=Math.round(p/Xl);return s.formatDistance("xMonths",I,l)}else{const I=_%12,b=Math.trunc(_/12);return I<3?s.formatDistance("aboutXYears",b,l):I<9?s.formatDistance("overXYears",b,l):s.formatDistance("almostXYears",b+1,l)}}function jM(t,e){return DM(t,TO(t),e)}const OM=({message:t,isSelected:e,onClick:n})=>{const r=l=>{const u={size:16,strokeWidth:2};switch(l){case"twitter":return c.jsx(Qa,{...u});case"linkedin":return c.jsx(Ka,{...u});case"instagram":return c.jsx(Di,{...u});case"facebook":return c.jsx(np,{...u});default:return c.jsx(ji,{...u})}},s=l=>{const u={size:14,strokeWidth:2};switch(l){case"dm":return c.jsx(Fc,{...u});case"reply":return c.jsx(Ca,{...u});case"mention":return c.jsx(ex,{...u});default:return c.jsx(ji,{...u})}},i=l=>{switch(l){case"twitter":return"#1DA1F2";case"linkedin":return"#0A66C2";case"instagram":return"#E1306C";case"facebook":return"#1877F2";default:return"#6366F1"}},o=(l,u=80)=>l.length<=u?l:l.substring(0,u)+"...";return c.jsxs("div",{onClick:n,className:`
                relative p-4 border-b border-[#1F2937]/30 cursor-pointer transition-all duration-200
                ${e?"bg-[#1F2937]/40 border-l-2 border-l-[#6366F1]":"hover:bg-[#1F2937]/20"}
                ${t.isRead?"":"bg-[#1F2937]/10"}
            `,children:[c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("div",{className:"relative flex-shrink-0",children:[c.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-[#1F2937]",children:c.jsx("img",{src:t.sender.avatar,alt:t.sender.name,className:"w-full h-full object-cover"})}),c.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full flex items-center justify-center shadow-lg border-2 border-[#0B0C15]",style:{backgroundColor:i(t.platform)},children:r(t.platform)})]}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h3",{className:`text-sm font-semibold truncate ${t.isRead?"text-gray-300":"text-white"}`,children:t.sender.name}),c.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.sender.username})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[c.jsx("div",{className:"text-gray-500",children:s(t.type)}),c.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:jM(t.timestamp,{addSuffix:!0})})]})]}),c.jsx("p",{className:`text-sm mb-1 ${t.isRead?"text-gray-400":"text-gray-300 font-medium"}`,children:o(t.message)}),t.relatedPost&&c.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[c.jsx(Ca,{size:12,className:"text-gray-600"}),c.jsxs("span",{className:"text-xs text-gray-600 italic truncate",children:["Re: ",t.relatedPost]})]})]}),!t.isRead&&c.jsx("div",{className:"flex-shrink-0",children:c.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#6366F1] shadow-lg shadow-[#6366F1]/50"})})]}),t.priority==="high"&&c.jsx("div",{className:"absolute top-2 right-2",children:c.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"})})]})},cl=[{id:1,platform:"twitter",type:"comment",sender:{name:"Sarah Johnson",username:"@sarahj_design",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah"},message:"This is exactly what our marketing team needed! The AI-powered features are game-changing. When can we expect mobile app support?",timestamp:new Date(Date.now()-2*60*60*1e3),isRead:!1,relatedPost:"New AI Marketing Features Launch",priority:"high"},{id:2,platform:"linkedin",type:"dm",sender:{name:"Michael Chen",username:"michael-chen-cmo",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Michael"},message:"Hi! I saw your demo at the marketing conference. Would love to discuss a potential partnership opportunity. Are you available for a call next week?",timestamp:new Date(Date.now()-5*60*60*1e3),isRead:!1,relatedPost:null,priority:"high"},{id:3,platform:"instagram",type:"comment",sender:{name:"Emma Martinez",username:"@emmamart",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Emma"},message:" Love the new design! The UI is so clean and intuitive.",timestamp:new Date(Date.now()-8*60*60*1e3),isRead:!0,relatedPost:"Studio AI Platform Redesign",priority:"normal"},{id:4,platform:"facebook",type:"reply",sender:{name:"David Brown",username:"david.brown.marketing",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=David"},message:"Thanks for the quick response! Just signed up and already loving the campaign management features.",timestamp:new Date(Date.now()-12*60*60*1e3),isRead:!0,relatedPost:"Q: How does the campaign scheduler work?",priority:"normal"},{id:5,platform:"twitter",type:"mention",sender:{name:"Tech Review Daily",username:"@techreviewdaily",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=TechReview"},message:"Just reviewed @StudioAI and it's incredible! The AI copilot feature saved our team 10+ hours this week. Highly recommend for marketing teams. #MarTech #AI",timestamp:new Date(Date.now()-1*24*60*60*1e3),isRead:!1,relatedPost:null,priority:"high"},{id:6,platform:"linkedin",type:"comment",sender:{name:"Jennifer Wilson",username:"jennifer-wilson-99",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Jennifer"},message:"Impressive work! We've been looking for a solution like this. Does it integrate with our existing CRM systems?",timestamp:new Date(Date.now()-1*24*60*60*1e3),isRead:!0,relatedPost:"Streamline Your Marketing Workflow",priority:"normal"},{id:7,platform:"instagram",type:"dm",sender:{name:"Alex Rivera",username:"@alexrivera_creative",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex"},message:"Hey! I'm a content creator interested in collaborating. Your platform looks amazing! Can we chat about potential opportunities?",timestamp:new Date(Date.now()-2*24*60*60*1e3),isRead:!1,relatedPost:null,priority:"normal"},{id:8,platform:"facebook",type:"comment",sender:{name:"Rachel Green",username:"rachel.green.marketing",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Rachel"},message:"This is revolutionary! We just switched from our old tool and the difference is night and day. Team is much more productive now.",timestamp:new Date(Date.now()-2*24*60*60*1e3),isRead:!0,relatedPost:"Why Marketing Teams Love Studio AI",priority:"normal"},{id:9,platform:"twitter",type:"comment",sender:{name:"Mark Thompson",username:"@markthompson_tech",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Mark"},message:"Question: Can I schedule posts across multiple platforms at once? That would be a huge time saver!",timestamp:new Date(Date.now()-3*24*60*60*1e3),isRead:!0,relatedPost:"Master Your Social Media Strategy",priority:"normal"},{id:10,platform:"linkedin",type:"mention",sender:{name:"Lisa Anderson",username:"lisa-anderson-ceo",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Lisa"},message:"Our entire marketing department is now using Studio AI. The ROI has been phenomenal. If you're in marketing and not using this, you're missing out!",timestamp:new Date(Date.now()-4*24*60*60*1e3),isRead:!0,relatedPost:null,priority:"normal"},{id:11,platform:"instagram",type:"comment",sender:{name:"Chris Parker",username:"@chrisparker_creative",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Chris"},message:" The AI-generated captions are spot on! Saved me so much time brainstorming.",timestamp:new Date(Date.now()-5*24*60*60*1e3),isRead:!0,relatedPost:"AI-Powered Content Creation",priority:"normal"},{id:12,platform:"twitter",type:"dm",sender:{name:"Nina Patel",username:"@ninapatel_startup",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Nina"},message:"Hi there! I run a startup and we're looking for marketing tools. Do you offer any startup discounts or trial periods?",timestamp:new Date(Date.now()-6*24*60*60*1e3),isRead:!1,relatedPost:null,priority:"high"}],x0=()=>cl.filter(t=>!t.isRead).length,MM=(t,e)=>{let n=cl;return t!=="all"&&(n=n.filter(r=>r.platform===t)),e!=="all"&&(n=n.filter(r=>r.type===e)),n},LM=t=>{const e=cl.find(n=>n.id===t);e&&(e.isRead=!0)},FM=t=>{const e=cl.find(n=>n.id===t);e&&(e.isRead=!1)},VM=t=>({twitter:"Twitter",linkedin:"LinkedIn",instagram:"Instagram",facebook:"Facebook"})[t]||t,UM=t=>({comment:"Comment",dm:"Direct Message",reply:"Reply",mention:"Mention"})[t]||t,zM=({message:t,onClose:e,onUpdate:n})=>{const[r,s]=A.useState(""),[i,o]=A.useState(!1);if(!t)return c.jsx("div",{className:"flex-1 flex items-center justify-center bg-[#0B0C15] border-l border-[#1F2937]/30",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ji,{size:64,className:"text-gray-700 mx-auto mb-4",strokeWidth:1.5}),c.jsx("p",{className:"text-gray-500 text-lg",children:"Select a message to view details"})]})});const l=m=>{const p={size:20,strokeWidth:2};switch(m){case"twitter":return c.jsx(Qa,{...p});case"linkedin":return c.jsx(Ka,{...p});case"instagram":return c.jsx(Di,{...p});case"facebook":return c.jsx(np,{...p});default:return c.jsx(ji,{...p})}},u=m=>{switch(m){case"twitter":return"#1DA1F2";case"linkedin":return"#0A66C2";case"instagram":return"#E1306C";case"facebook":return"#1877F2";default:return"#6366F1"}},d=()=>{t.isRead?FM(t.id):LM(t.id),n()},h=()=>{r.trim()&&(console.log("Sending reply:",r),o(!0),s(""),setTimeout(()=>o(!1),3e3))};return c.jsxs("div",{className:"flex-1 flex flex-col bg-[#0B0C15] border-l border-[#1F2937]/30",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-[#1F2937]/30",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:u(t.platform)},children:l(t.platform)}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-white font-semibold text-lg",children:VM(t.platform)}),c.jsx("p",{className:"text-gray-500 text-sm",children:UM(t.type)})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("button",{onClick:d,className:"px-4 py-2 rounded-lg bg-[#1F2937]/50 hover:bg-[#1F2937] text-white text-sm font-medium transition-colors flex items-center gap-2",children:[t.isRead?c.jsx(aC,{size:16}):c.jsx(Sf,{size:16}),"Mark as ",t.isRead?"Unread":"Read"]}),c.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-[#1F2937]/50 text-gray-400 hover:text-white transition-colors md:hidden",children:c.jsx(ox,{size:20})})]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[c.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[c.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden bg-[#1F2937] flex-shrink-0",children:c.jsx("img",{src:t.sender.avatar,alt:t.sender.name,className:"w-full h-full object-cover"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"text-white font-semibold text-lg",children:t.sender.name}),c.jsx("p",{className:"text-gray-500 text-sm mb-1",children:t.sender.username}),c.jsx("p",{className:"text-gray-600 text-xs",children:AM(t.timestamp,"MMMM d, yyyy 'at' h:mm a")})]}),t.priority==="high"&&c.jsx("div",{className:"px-3 py-1 rounded-full bg-red-500/20 border border-red-500/30",children:c.jsx("span",{className:"text-red-400 text-xs font-semibold",children:"High Priority"})})]}),t.relatedPost&&c.jsxs("div",{className:"mb-6 p-4 rounded-lg bg-[#1F2937]/30 border border-[#1F2937]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Ca,{size:14,className:"text-gray-500"}),c.jsx("span",{className:"text-gray-500 text-xs font-semibold uppercase tracking-wide",children:"In Response To"})]}),c.jsx("p",{className:"text-gray-400 text-sm",children:t.relatedPost})]}),c.jsx("div",{className:"bg-[#1F2937]/20 rounded-lg p-6 border border-[#1F2937]/50",children:c.jsx("p",{className:"text-gray-300 leading-relaxed whitespace-pre-wrap",children:t.message})}),i&&c.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-green-500/20 border border-green-500/30 flex items-center gap-3",children:[c.jsx(Sf,{size:20,className:"text-green-400"}),c.jsx("p",{className:"text-green-400 text-sm font-medium",children:"Reply sent successfully!"})]})]}),c.jsxs("div",{className:"p-6 border-t border-[#1F2937]/30 bg-[#030712]",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Ca,{size:16,className:"text-gray-500"}),c.jsx("span",{className:"text-gray-400 text-sm font-semibold",children:"Reply"})]}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("textarea",{value:r,onChange:m=>s(m.target.value),placeholder:"Type your reply...",className:"flex-1 px-4 py-3 rounded-lg bg-[#1F2937]/30 border border-[#1F2937] text-white placeholder-gray-600 focus:outline-none focus:border-[#6366F1] focus:ring-2 focus:ring-[#6366F1]/20 transition-all resize-none",rows:"3"}),c.jsxs("button",{onClick:h,disabled:!r.trim(),className:"px-6 py-3 rounded-lg bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] hover:from-[#5558E3] hover:to-[#7C3AED] text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-[#6366F1]/20 flex items-center gap-2 self-start",children:[c.jsx(nR,{size:18}),"Send"]})]})]})]})},BM=()=>{const[t,e]=A.useState(cl),[n,r]=A.useState(null),[s,i]=A.useState("all"),[o,l]=A.useState("all"),[u,d]=A.useState(""),[h,m]=A.useState(x0());A.useEffect(()=>{p()},[s,o,u]);const p=()=>{let y=MM(s,o);u.trim()&&(y=y.filter(x=>x.sender.name.toLowerCase().includes(u.toLowerCase())||x.message.toLowerCase().includes(u.toLowerCase())||x.sender.username.toLowerCase().includes(u.toLowerCase()))),e(y),m(x0())},_=y=>{r(y)},I=()=>{r(null)},b=()=>{t.forEach(y=>{y.isRead||(y.isRead=!0)}),p()},C=[{value:"all",label:"All Platforms",icon:Uo},{value:"twitter",label:"Twitter",icon:Qa},{value:"linkedin",label:"LinkedIn",icon:Ka},{value:"instagram",label:"Instagram",icon:Di},{value:"facebook",label:"Facebook",icon:np}],E=[{value:"all",label:"All Types",icon:Uo},{value:"dm",label:"Direct Messages",icon:Fc},{value:"comment",label:"Comments",icon:ji},{value:"reply",label:"Replies",icon:Ca},{value:"mention",label:"Mentions",icon:ex}];return c.jsxs("div",{className:"h-[calc(100vh-4rem)]",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/20",children:c.jsx(Uo,{size:24,className:"text-white",strokeWidth:2.5})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-white",children:"Social Inbox"}),c.jsx("p",{className:"text-gray-500 text-sm",children:"Manage all your social media interactions in one place"})]})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[h>0&&c.jsxs("button",{onClick:b,className:"px-4 py-2 rounded-lg bg-[#1F2937]/50 hover:bg-[#1F2937] text-white text-sm font-medium transition-colors flex items-center gap-2",children:[c.jsx(Sf,{size:16}),"Mark All Read"]}),c.jsx("div",{className:"px-4 py-2 rounded-lg bg-[#6366F1]/20 border border-[#6366F1]/30",children:c.jsxs("span",{className:"text-[#6366F1] font-semibold text-sm",children:[h," Unread"]})})]})]}),c.jsxs("div",{className:"flex gap-3 items-center bg-[#1F2937]/20 rounded-xl p-4 border border-[#1F2937]/30",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(sx,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",size:18}),c.jsx("input",{type:"text",placeholder:"Search messages...",value:u,onChange:y=>d(y.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-lg bg-[#0B0C15] border border-[#1F2937] text-white placeholder-gray-600 focus:outline-none focus:border-[#6366F1] focus:ring-2 focus:ring-[#6366F1]/20 transition-all text-sm"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(C_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",size:18}),c.jsx("select",{value:s,onChange:y=>i(y.target.value),className:"pl-10 pr-8 py-2.5 rounded-lg bg-[#0B0C15] border border-[#1F2937] text-white focus:outline-none focus:border-[#6366F1] focus:ring-2 focus:ring-[#6366F1]/20 transition-all text-sm appearance-none cursor-pointer min-w-[180px]",children:C.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))})]}),c.jsxs("div",{className:"relative",children:[c.jsx(C_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 pointer-events-none",size:18}),c.jsx("select",{value:o,onChange:y=>l(y.target.value),className:"pl-10 pr-8 py-2.5 rounded-lg bg-[#0B0C15] border border-[#1F2937] text-white focus:outline-none focus:border-[#6366F1] focus:ring-2 focus:ring-[#6366F1]/20 transition-all text-sm appearance-none cursor-pointer min-w-[180px]",children:E.map(y=>c.jsx("option",{value:y.value,children:y.label},y.value))})]})]})]}),c.jsxs("div",{className:"h-[calc(100%-180px)] flex gap-4",children:[c.jsx("div",{className:`${n?"w-1/3 hidden md:block":"w-full"} bg-[#0B0C15] rounded-xl border border-[#1F2937]/30 overflow-hidden flex flex-col`,children:c.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length>0?t.map(y=>c.jsx(OM,{message:y,isSelected:(n==null?void 0:n.id)===y.id,onClick:()=>_(y)},y.id)):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-[#1F2937]/30 flex items-center justify-center mb-4",children:c.jsx(Uo,{size:40,className:"text-gray-600",strokeWidth:1.5})}),c.jsx("h3",{className:"text-gray-400 text-lg font-semibold mb-2",children:"No messages found"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Try adjusting your filters or search query"})]})})}),n&&c.jsx("div",{className:"flex-1 md:w-2/3",children:c.jsx("div",{className:"bg-[#0B0C15] rounded-xl border border-[#1F2937]/30 overflow-hidden h-full",children:c.jsx(zM,{message:n,onClose:I,onUpdate:p})})}),!n&&c.jsx("div",{className:"hidden md:flex flex-1 bg-[#0B0C15] rounded-xl border border-[#1F2937]/30 items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-20 h-20 rounded-full bg-[#1F2937]/30 flex items-center justify-center mx-auto mb-4",children:c.jsx(ji,{size:40,className:"text-gray-600",strokeWidth:1.5})}),c.jsx("h3",{className:"text-gray-400 text-lg font-semibold mb-2",children:"Select a message"}),c.jsx("p",{className:"text-gray-600 text-sm",children:"Choose a message from the list to view details"})]})})]})]})},$M=()=>{const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(""),[o,l]=A.useState(!1),{signin:u}=kn(),d=Us(),h=async m=>{m.preventDefault(),i(""),l(!0);try{await u(t,n),d("/")}catch(p){i(p.message||"Failed to sign in")}finally{l(!1)}};return c.jsx("div",{className:"min-h-screen bg-[#030712] flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Welcome Back"}),c.jsx("p",{className:"text-gray-400",children:"Sign in to your Studio AI account"})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-2xl p-8",children:[s&&c.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-lg flex items-center gap-3 text-red-400",children:[c.jsx(tx,{size:20}),c.jsx("p",{className:"text-sm",children:s})]}),c.jsxs("form",{onSubmit:h,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"email",required:!0,value:t,onChange:m=>e(m.target.value),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:"you@company.com"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(kf,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"password",required:!0,value:n,onChange:m=>r(m.target.value),className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:""})]})]}),c.jsx("div",{className:"flex justify-end",children:c.jsx(ft,{to:"/forgot-password",className:"text-sm text-[#6366F1] hover:text-[#8B5CF6] transition-colors",children:"Forgot password?"})}),c.jsx("button",{type:"submit",disabled:o,className:"w-full py-3 bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-[#6366F1]/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:o?c.jsxs(c.Fragment,{children:[c.jsx(rx,{size:18,className:"animate-spin"}),"Signing in..."]}):"Sign In"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",c.jsx(ft,{to:"/signup",className:"text-[#6366F1] hover:text-[#8B5CF6] font-semibold transition-colors",children:"Sign up"})]})})]})]})})},WM=()=>{const[t,e]=A.useState({name:"",email:"",password:"",confirmPassword:"",organizationName:"",organizationId:""}),[n,r]=A.useState(""),[s,i]=A.useState(!1),{signup:o}=kn(),l=Us(),u=h=>{const{name:m,value:p}=h.target;if(e(_=>({..._,[m]:p})),m==="organizationName"){const _=p.toLowerCase().replace(/[^a-z0-9]/g,"-");e(I=>({...I,organizationId:_}))}},d=async h=>{if(h.preventDefault(),r(""),t.password!==t.confirmPassword)return r("Passwords do not match");if(t.password.length<6)return r("Password must be at least 6 characters");if(!t.organizationName)return r("Organization name is required");i(!0);try{await o(t.email,t.password,{name:t.name,organizationName:t.organizationName,organizationId:t.organizationId}),l("/")}catch(m){r(m.message||"Failed to create account")}finally{i(!1)}};return c.jsx("div",{className:"min-h-screen bg-[#030712] flex items-center justify-center p-4",children:c.jsxs("div",{className:"w-full max-w-md",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] flex items-center justify-center shadow-lg shadow-[#6366F1]/30",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"S"})}),c.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Create Account"}),c.jsx("p",{className:"text-gray-400",children:"Start your AI-powered marketing journey"})]}),c.jsxs("div",{className:"bg-[#0B0C15] border border-[#1F2937]/50 rounded-2xl p-8",children:[n&&c.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-lg flex items-center gap-3 text-red-400",children:[c.jsx(tx,{size:20}),c.jsx("p",{className:"text-sm",children:n})]}),c.jsxs("form",{onSubmit:d,className:"space-y-5",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Full Name"}),c.jsxs("div",{className:"relative",children:[c.jsx(hR,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"text",name:"name",required:!0,value:t.name,onChange:u,className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:"John Doe"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Email Address"}),c.jsxs("div",{className:"relative",children:[c.jsx(Fc,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"email",name:"email",required:!0,value:t.email,onChange:u,className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:"you@company.com"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Organization Name"}),c.jsxs("div",{className:"relative",children:[c.jsx(tC,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"text",name:"organizationName",required:!0,value:t.organizationName,onChange:u,className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:"Acme Inc"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(kf,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"password",name:"password",required:!0,value:t.password,onChange:u,className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:""})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-400 mb-2",children:"Confirm Password"}),c.jsxs("div",{className:"relative",children:[c.jsx(kf,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),c.jsx("input",{type:"password",name:"confirmPassword",required:!0,value:t.confirmPassword,onChange:u,className:"w-full bg-[#1F2937]/30 border border-[#1F2937]/50 rounded-lg pl-10 pr-4 py-3 text-white placeholder-gray-500 outline-none focus:border-[#6366F1]/50 transition-colors",placeholder:""})]})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full py-3 bg-gradient-to-r from-[#6366F1] to-[#8B5CF6] text-white font-semibold rounded-lg hover:shadow-lg hover:shadow-[#6366F1]/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?c.jsxs(c.Fragment,{children:[c.jsx(rx,{size:18,className:"animate-spin"}),"Creating account..."]}):"Create Account"})]}),c.jsx("div",{className:"mt-6 text-center",children:c.jsxs("p",{className:"text-gray-400 text-sm",children:["Already have an account?"," ",c.jsx(ft,{to:"/login",className:"text-[#6366F1] hover:text-[#8B5CF6] font-semibold transition-colors",children:"Sign in"})]})})]})]})})},HM=sa(),qM=async t=>{var n;let e;try{switch(t.toLowerCase()){case"twitter":e=new An;break;case"facebook":e=new Nn;break;case"linkedin":e=new xs("oidc.linkedin");break;case"instagram":e=new xs("facebook"),e.addScope("instagram_basic"),e.addScope("pages_show_list");break;default:throw new Error(`Platform ${t} is not supported.`)}const r=await RP(HM,e),s=r.user,i=xs.credentialFromResult(r),o=i==null?void 0:i.accessToken,l=i==null?void 0:i.secret;return s&&o&&await GM(s.uid,t,{accessToken:o,secret:l,connectedAt:ld(),profileId:((n=r.user.providerData[0])==null?void 0:n.uid)||s.uid,email:r.user.email}),{user:s,credential:i}}catch(r){throw console.error(`Error connecting to ${t}:`,r),r}},GM=async(t,e,n)=>{const r=Ht(Le,"users",t,"connections",e);await Zf(r,n,{merge:!0}),console.log(`Successfully linked ${e} for user ${t}`)},KM=async(t,e)=>{try{const n=Ht(Le,"users",t,"connections",e);return(await rg(n)).exists()}catch(n){return console.error("Error checking platform connection:",n),!1}},aI=async(t,e,n)=>{console.log(`Attempting to publish to ${e}...`);try{const r=await QM(e,t);if(r.success)return console.log(`Successfully published to ${e}:`,r.id),t.id&&await YT(t.id,"PUBLISHED"),r;throw new Error(r.error||"Unknown error during publishing")}catch(r){throw console.error(`Failed to publish to ${e}:`,r),r}},QM=(t,e)=>new Promise(n=>{setTimeout(()=>{n({success:!0,id:`${t}_post_${Date.now()}`,platform:t,timestamp:new Date().toISOString()})},1500)}),YM=async(t,e,n)=>{try{const r=Xn(Le,"queue"),s=await sg(r,{...t,originalPostId:t.id||null,scheduledAt:e,status:"PENDING",userId:n,createdAt:ld()});return t.id&&await YT(t.id,"SCHEDULED"),console.log("Added to queue with ID:",s.id),s.id}catch(r){throw console.error("Error adding to queue:",r),r}},lI=async()=>{try{const t=Xn(Le,"queue"),e=to(t,Ms("status","==","PENDING"),ng("scheduledAt","asc"));return(await V3(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error fetching schedule:",t),t}},XM=async()=>{console.log("Processing queue...");const t=new Date,e=await lI();for(const n of e)if((n.scheduledAt.toDate?n.scheduledAt.toDate():new Date(n.scheduledAt))<=t){console.log(`Publishing due post: ${n.title}`);try{await aI(n,n.platform||"Unknown",n.userId);const s=Ht(Le,"queue",n.id);await gc(s,{status:"COMPLETED",publishedAt:ld()})}catch(s){console.error(`Failed to process queue item ${n.id}`,s);const i=Ht(Le,"queue",n.id);await gc(i,{status:"FAILED",error:s.message})}}},JM=()=>{const[t,e]=A.useState(""),[n,r]=A.useState({twitter:!1,facebook:!1,linkedin:!1,instagram:!1}),[s,i]=A.useState(""),[o,l]=A.useState(""),[u,d]=A.useState([]);A.useEffect(()=>{(async()=>{const E=sa().currentUser;if(E){const y={...n};for(const x of Object.keys(n))y[x]=await KM(E.uid,x);r(y)}})(),h()},[]);const h=async()=>{try{const b=await lI();d(b)}catch(b){console.error(b)}},m=async b=>{try{e(`Connecting to ${b}...`),await qM(b),e(`Connected to ${b} successfully!`),r(C=>({...C,[b]:!0}))}catch(C){e(`Error connecting: ${C.message}`)}},p=async b=>{const C=sa();if(!C.currentUser)return e("Please login first");try{e(`Publishing to ${b}...`),await aI({title:s,content:s},b,C.currentUser.uid),e(`Published to ${b}!`)}catch(E){e(`Error publishing: ${E.message}`)}},_=async()=>{const b=sa();if(!b.currentUser)return e("Please login first");if(!o)return e("Select a time");try{e("Scheduling..."),await YM({title:s,content:s,platform:"twitter"},new Date(o),b.currentUser.uid),e("Scheduled successfully!"),h()}catch(C){e(`Error: ${C.message}`)}},I=async()=>{e("Processing queue..."),await XM(),e("Queue processed."),h()};return c.jsxs("div",{className:"p-8 text-white bg-[#0B0C15] min-h-screen",children:[c.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Social Media Integration Test"}),t&&c.jsx("div",{className:"p-4 mb-6 bg-blue-500/20 border border-blue-500 rounded-lg",children:t}),c.jsxs("div",{className:"mb-8 border border-gray-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"1. OAuth Connections"}),c.jsx("div",{className:"flex gap-4",children:Object.keys(n).map(b=>c.jsx("button",{onClick:()=>m(b),className:`px-4 py-2 rounded-lg capitalize ${n[b]?"bg-green-500/20 text-green-400 border border-green-500":"bg-indigo-600 hover:bg-indigo-700"}`,children:n[b]?`${b} Connected`:`Connect ${b}`},b))})]}),c.jsxs("div",{className:"mb-8 border border-gray-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-xl font-semibold mb-4",children:"2. Create & Publish"}),c.jsx("textarea",{className:"w-full p-3 bg-gray-900 border border-gray-700 rounded-lg mb-4 text-white",rows:"3",placeholder:"What's on your mind?",value:s,onChange:b=>i(b.target.value)}),c.jsxs("div",{className:"flex gap-4 items-end",children:[c.jsx("button",{onClick:()=>p("twitter"),className:"px-4 py-2 bg-blue-500 hover:bg-blue-600 rounded-lg",children:"Publish Now (Twitter)"}),c.jsxs("div",{className:"flex flex-col gap-1 ml-auto",children:[c.jsx("span",{className:"text-sm text-gray-400",children:"Schedule for:"}),c.jsx("input",{type:"datetime-local",className:"bg-gray-800 text-white p-2 rounded border border-gray-700",value:o,onChange:b=>l(b.target.value)})]}),c.jsx("button",{onClick:_,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg",children:"Schedule Post"})]})]}),c.jsxs("div",{className:"mb-8 border border-gray-700 p-6 rounded-xl",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h2",{className:"text-xl font-semibold",children:"3. Scheduled Queue"}),c.jsxs("button",{onClick:I,className:"px-3 py-1 bg-yellow-600/50 hover:bg-yellow-600 text-yellow-100 rounded text-sm",children:["Simulate Queue Processor (",u.length," pending)"]})]}),c.jsx("div",{className:"space-y-2",children:u.length===0?c.jsx("p",{className:"text-gray-500",children:"No pending posts."}):u.map(b=>{var C;return c.jsxs("div",{className:"p-3 bg-gray-800 rounded flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("span",{className:"font-semibold block",children:b.title}),c.jsxs("span",{className:"text-xs text-gray-400",children:["Due: ",(C=b.scheduledAt)!=null&&C.toDate?b.scheduledAt.toDate().toLocaleString():new Date(b.scheduledAt).toLocaleString()]})]}),c.jsxs("span",{className:"px-2 py-1 bg-blue-900/50 text-blue-200 text-xs rounded",children:[b.status," - ",b.platform]})]},b.id)})})]})]})},ZM=()=>{const[t,e]=A.useState(""),[n,r]=A.useState("Instagram"),[s,i]=A.useState("casual"),[o,l]=A.useState(""),[u,d]=A.useState(!1),[h,m]=A.useState(""),[p,_]=A.useState(null),[I,b]=A.useState(!1),[C,E]=A.useState(""),[y,x]=A.useState(null),[P,M]=A.useState(!1),F=async()=>{if(t.trim()){d(!0);try{const T=await ZT(t,n,s);l(T)}catch(T){l(`Error: ${T.message}`)}d(!1)}},S=async()=>{if(h.trim()){b(!0);try{const T=await eI(h);_(T)}catch(T){_({success:!1,error:T.message})}b(!1)}},w=async()=>{if(C.trim()){M(!0);try{const T=await tI(C);x(T)}catch(T){x({error:T.message})}M(!1)}};return c.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:" AI Content Generation Testing"}),c.jsx("p",{className:"text-gray-600",children:"Test all AI features for Member 2's implementation"})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-purple-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Qu,{className:"text-purple-600",size:24}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Caption Generation"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Platform"}),c.jsxs("select",{value:n,onChange:T=>r(T.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[c.jsx("option",{children:"Instagram"}),c.jsx("option",{children:"Twitter"}),c.jsx("option",{children:"LinkedIn"}),c.jsx("option",{children:"Facebook"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tone"}),c.jsxs("select",{value:s,onChange:T=>i(T.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500",children:[c.jsx("option",{value:"professional",children:" Professional"}),c.jsx("option",{value:"casual",children:" Casual"}),c.jsx("option",{value:"playful",children:" Playful"}),c.jsx("option",{value:"inspirational",children:" Inspirational"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic"}),c.jsx("input",{type:"text",value:t,onChange:T=>e(T.target.value),placeholder:"e.g., New product launch",className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500"})]})]}),c.jsx("button",{onClick:F,disabled:u||!t.trim(),className:"w-full bg-purple-600 text-white py-3 rounded-lg font-semibold hover:bg-purple-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?c.jsxs(c.Fragment,{children:[c.jsx(uh,{className:"animate-spin",size:20}),"Generating Caption..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Qu,{size:20}),"Generate Caption"]})}),o&&c.jsxs("div",{className:"mt-4 p-4 bg-purple-50 rounded-lg border border-purple-200",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Generated Caption:"}),c.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:o}),c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Characters: ",o.length]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-blue-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(Pi,{className:"text-blue-600",size:24}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"AI Image Generation"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image Description"}),c.jsx("textarea",{value:h,onChange:T=>m(T.target.value),placeholder:"e.g., A modern tech startup office with diverse team collaborating",rows:3,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),c.jsx("button",{onClick:S,disabled:I||!h.trim(),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:I?c.jsxs(c.Fragment,{children:[c.jsx(uh,{className:"animate-spin",size:20}),"Generating Image..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Pi,{size:20}),"Generate Image"]})}),p&&c.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:p.success?c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:" Image Generated!"}),p.isBase64?c.jsx("img",{src:`data:image/png;base64,${p.imageUrl}`,alt:"Generated",className:"w-full rounded-lg"}):c.jsx("img",{src:p.imageUrl,alt:"Generated",className:"w-full rounded-lg"})]}):c.jsxs("div",{children:[c.jsxs("p",{className:"text-sm font-medium text-red-600 mb-2",children:[" ",p.error]}),p.suggestion&&c.jsxs("div",{className:"mt-2 p-3 bg-yellow-50 border border-yellow-200 rounded",children:[c.jsx("p",{className:"text-xs font-medium text-yellow-800 mb-1",children:" Suggestion:"}),c.jsx("p",{className:"text-xs text-yellow-700 whitespace-pre-wrap",children:p.suggestion})]})]})})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 border-2 border-green-200",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx(vi,{className:"text-green-600",size:24}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Multi-Platform Content Adapter"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Original Content"}),c.jsx("textarea",{value:C,onChange:T=>E(T.target.value),placeholder:"Paste your long-form content here... Include hashtags like #marketing #socialmedia",rows:5,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500"})]}),c.jsx("button",{onClick:w,disabled:P||!C.trim(),className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:P?c.jsxs(c.Fragment,{children:[c.jsx(uh,{className:"animate-spin",size:20}),"Adapting Content..."]}):c.jsxs(c.Fragment,{children:[c.jsx(vi,{size:20}),"Adapt for All Platforms"]})}),y&&!y.error&&c.jsx("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:["instagram","twitter","linkedin","facebook"].map(T=>{const k=y[T],N={instagram:"bg-pink-50 border-pink-300",twitter:"bg-blue-50 border-blue-300",linkedin:"bg-indigo-50 border-indigo-300",facebook:"bg-blue-50 border-blue-300"};return c.jsxs("div",{className:`p-4 rounded-lg border-2 ${N[T]}`,children:[c.jsx("h3",{className:"font-bold text-lg capitalize mb-2",children:T}),c.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap mb-2",children:k.content}),c.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[c.jsxs("span",{children:["Chars: ",k.length,"/",k.limit]}),c.jsx("span",{className:k.withinLimit?"text-green-600":"text-red-600",children:k.withinLimit?" Within limit":" Exceeds limit"})]}),k.hashtags&&k.hashtags.length>0&&c.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Hashtags: ",k.hashtags.length]})]},T)})}),y&&y.error&&c.jsx("div",{className:"mt-4 p-4 bg-red-50 rounded-lg border border-red-200",children:c.jsxs("p",{className:"text-sm font-medium text-red-600",children:["Error: ",y.error]})})]})]})},eL=A.createContext(),tL=({children:t})=>{const[e,n]=A.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("theme");if(s)return s;if(window.matchMedia("(prefers-color-scheme: dark)").matches)return"dark"}return"dark"});A.useEffect(()=>{const s=window.document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="dark"?"light":"dark")};return c.jsx(eL.Provider,{value:{theme:e,toggleTheme:r},children:t})};function nL(){const[t,e]=A.useState("admin");return c.jsx(tL,{children:c.jsx(iO,{children:c.jsx(Dk,{children:c.jsxs(I_,{children:[c.jsx(Ct,{path:"/login",element:c.jsx($M,{})}),c.jsx(Ct,{path:"/signup",element:c.jsx(WM,{})}),c.jsx(Ct,{path:"/*",element:c.jsx(lO,{children:c.jsx(aO,{userRole:t,setUserRole:e,children:c.jsxs(I_,{children:[c.jsx(Ct,{path:"/",element:c.jsx(uO,{})}),c.jsx(Ct,{path:"/campaigns",element:c.jsx(dO,{})}),c.jsx(Ct,{path:"/inbox",element:c.jsx(BM,{})}),c.jsx(Ct,{path:"/editor/:id?",element:c.jsx(mO,{})}),c.jsx(Ct,{path:"/assets",element:c.jsx(_O,{})}),c.jsx(Ct,{path:"/analytics",element:c.jsx(gO,{})}),c.jsx(Ct,{path:"/calendar",element:c.jsx(pO,{})}),c.jsx(Ct,{path:"/test-social",element:c.jsx(JM,{})}),c.jsx(Ct,{path:"/test-ai",element:c.jsx(ZM,{})})]})})})})]})})})})}Rh.createRoot(document.getElementById("root")).render(c.jsx(eb.StrictMode,{children:c.jsx(nL,{})}));
